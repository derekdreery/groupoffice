Ext.namespace("GO.bookmarks");GO.bookmarks.getThumbUrl=function(b,a){if(GO.util.empty(a)){return BaseHref+"controls/thumb.php?src="+b+"&h=16&w=16&pub=0"}else{return GO.settings.modules.bookmarks.url+b}};GO.bookmarks.MainPanel=function(a){if(!a){a={}}this.selectCategory=new GO.form.ComboBoxReset({fieldLabel:"Category",hiddenName:"category_id",store:GO.bookmarks.comboCategoriesStore,displayField:"name",valueField:"id",triggerAction:"all",editable:true,width:200,emptyText:GO.bookmarks.lang.showAll,selectOnFocus:false,listeners:{clear:function(){GO.bookmarks.groupingStore.baseParams.category=0;GO.bookmarks.groupingStore.load()},select:function(c,b){GO.bookmarks.groupingStore.baseParams.category=b.data.id;GO.bookmarks.groupingStore.load()}}});this.searchField=new GO.form.SearchField({store:GO.bookmarks.groupingStore,width:220});this.toolbar=new Ext.Toolbar({anchor:"100%",cls:"go-paging-tb",displayMsg:GO.lang.displayingItems,emptyMsg:GO.lang.strNoItems,items:[GO.bookmarks.lang.category+":",this.selectCategory,"-",GO.lang.strSearch+":",this.searchField]});this.bmView=new GO.bookmarks.BookmarksView({store:GO.bookmarks.groupingStore,tbar:this.toolbar});a.tbar=new Ext.Toolbar({cls:"go-head-tb",items:[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){GO.bookmarks.showBookmarksDialog({edit:0})},scope:this},{iconCls:"no-btn-categories",text:GO.bookmarks.lang.administrateCategories,cls:"x-btn-text-icon",handler:function(){if(!this.categoriesDialog){this.categoriesDialog=new GO.bookmarks.ManageCategoriesDialog({listeners:{close:function(){},scope:this}});this.categoriesDialog.on("change",function(){},this)}this.categoriesDialog.show()},scope:this}]});a.layout="fit";a.items=this.bmView;GO.bookmarks.MainPanel.superclass.constructor.call(this,a)};Ext.extend(GO.bookmarks.MainPanel,Ext.Panel,{toggleLayout:function(){this.centerPanel.tab=!this.centerPanel.tab;var a=(this.centerPanel.tab)?1:0;this.centerPanel.getLayout().setActiveItem(a);if(a==0){this.northPanel.topToolbar.items.items[1].enable()}if(a==1){this.northPanel.topToolbar.items.items[1].disable()}}});GO.bookmarks.showBookmarksDialog=function(a){if(!this.bookmarksDialog){this.bookmarksDialog=new GO.bookmarks.BookmarksDialog({edit:a.edit,listeners:{save:function(){GO.bookmarks.groupingStore.load()},scope:this}})}this.bookmarksDialog.show(a)};GO.bookmarks.openBookmark=function(b){if(b.data.behave_as_module=="1"){var a=GO.mainLayout.openModule("bookmarks-id-"+b.id);if(a){return true}}if(b.data.open_extern==0){var c=new GO.panel.IFrameComponent({title:b.data.name,url:b.data.content,border:false,closable:true});GO.mainLayout.tabPanel.add(c);c.show()}else{window.open(b.data.content)}};GO.bookmarks.removeBookmark=function(a){if(confirm(GO.bookmarks.lang.confirmDelete)){Ext.Ajax.request({url:GO.settings.modules.bookmarks.url+"action.php",params:{task:"delete_bookmark",bm_id:a.data.id,usr_id:a.data.user_id},scope:this,callback:function(c,e,b){var d=Ext.decode(b.responseText);if(!d.deleteSuccess){Ext.MessageBox.alert(GO.lang.strError,d.deleteFeedback)}else{GO.bookmarks.groupingStore.remove(a)}}})}};GO.moduleManager.addModule("bookmarks",GO.bookmarks.MainPanel,{title:GO.bookmarks.lang.bookmarks,iconCls:"go-tab-icon-bookmarks"});GO.bookmarks.BookmarksView=function(a){a=a||{};a.autoScroll=true;Ext.QuickTips.init();this.bookmarkthumbs=new Ext.XTemplate('<tpl for=".">','<tpl if="(this.is_new_category(category_name)||(!index))">','<h1 class="categorie">{category_name}</h1>',"</tpl>",'<div class="thumb-wrap"  >','<div class="thumb">','<div class="thumb-name" style="background-image:url({thumb})"><h1>{name}</h1>{[Ext.util.Format.nl2br(values.description)]}</div>',"</div>","</div>","</tpl>",'<div style="clear:both"></div>',{is_new_category:function(b){if(b!=this.lastcategory){this.lastcategory=b;return true}else{return false}}});this.DV=new Ext.DataView({store:a.store,tpl:this.bookmarkthumbs,cls:"thumbnails",itemSelector:"div.thumb",multiSelect:false,singleSelect:false,trackOver:true});if(!this.closeButton){this.closeButton=new GO.bookmarks.CloseButton({autoEl:{tag:"img",src:"modules/bookmarks/themes/Default/images/close.gif",cls:"closebutton"}})}this.closeButton.hide();this.closeButton.on("remove_bookmark",GO.bookmarks.removeBookmark,this);this.DV.on("click",function(d,c,f,g){var b=this.DV.getRecord(f);GO.bookmarks.openBookmark(b)},this);this.DV.on("contextmenu",function(d,c,f,g){g.preventDefault();var b=this.DV.getRecord(f).data;if(this.DV.getRecord(f).data.write_permission){GO.bookmarks.showBookmarksDialog({record:b,edit:1})}},this);this.DV.on("mouseenter",function(c,b,d,f){this.mouseOver=true},this);this.DV.on("mouseenter",function(c,b,d,f){if((this.mouseOver)&&(this.DV.getRecord(d)!=undefined)){if(this.DV.getRecord(d).data.write_permission){this.closeButton.show();this.closeButton.record=this.DV.getRecord(d);this.closeButton.getEl().alignTo(d,"tr",[-21,6])}}},this,{delay:600,buffer:200});this.DV.on("mouseleave",function(c,b,d,f){this.mouseOver=false;this.closeButton.hideIfNotOver.defer(100,this.closeButton)},this);Ext.apply(a,{listeners:{render:function(){a.store.load()}},items:[this.DV,this.closeButton]});GO.bookmarks.BookmarksView.superclass.constructor.call(this,a)};Ext.extend(GO.bookmarks.BookmarksView,Ext.Panel,{});GO.bookmarks.groupingStore=new Ext.data.GroupingStore({reader:new Ext.data.JsonReader({totalProperty:"total",root:"results",id:"id",fields:["id","category_id","category_name","user_id","name","content","description","logo","open_extern","write_permission","index","public_icon","thumb","behave_as_module"]}),baseParams:{task:"get_bookmarks"},proxy:new Ext.data.HttpProxy({url:GO.settings.modules.bookmarks.url+"json.php"}),groupField:"category_name",sortInfo:{field:"name",direction:"ASC"},remoteGroup:true,remoteSort:true});GO.bookmarks.writableCategoriesStore=new GO.data.JsonStore({url:GO.settings.modules.bookmarks.url+"json.php",baseParams:{auth_type:"write",task:"categories"},root:"results",id:"id",totalProperty:"total",fields:["id","name","user_name"],remoteSort:true});GO.bookmarks.comboCategoriesStore=new GO.data.JsonStore({url:GO.settings.modules.bookmarks.url+"json.php",baseParams:{task:"categories",auth_type:"read",combo:1},root:"results",id:"id",totalProperty:"total",fields:["id","user_name","acl_id","name"],remoteSort:true});GO.bookmarks.thumbstore=new GO.data.JsonStore({url:GO.settings.modules.bookmarks.url+"json.php",baseParams:{task:"thumbdir"},root:"results",id:"id",totalProperty:"total",fields:["filename"]});GO.bookmarks.CloseButton=function(a){a=a||{};a.style="cursor:pointer;";a.mouseOver=false;a.listeners={render:function(){var b=this.getEl();b.on({click:function(){this.hide();this.fireEvent("remove_bookmark",this.record)},mouseover:function(){this.mouseOver=true},mouseout:function(){this.mouseOver=false;this.hide()},scope:this})}},a.hideIfNotOver=function(){if(!this.mouseOver){this.hide()}};GO.bookmarks.CloseButton.superclass.constructor.call(this,a);this.addEvents({remove_bookmark:true})};Ext.extend(GO.bookmarks.CloseButton,Ext.BoxComponent,{});GO.bookmarks.BookmarksDialog=function(a){if(!a){a={}}this.buildForm(a);a.maximizable=true;a.layout="fit";a.modal=false;a.resizable=false;a.width=500;a.height=350;a.closeAction="hide";a.items=this.formPanel;a.title=GO.bookmarks.lang.bookmark;a.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.bookmarks.BookmarksDialog.superclass.constructor.call(this,a);this.addEvents({save:true})};Ext.extend(GO.bookmarks.BookmarksDialog,Ext.Window,{focus:function(){this.formPanel.form.findField("content").focus()},show:function(a){if(!this.selectCategory.store.loaded){return this.selectCategory.store.load({callback:function(){this.show(a)},scope:this})}if(!this.rendered){this.render(Ext.getBody())}var b="icons/bookmark.png";this.formPanel.baseParams.public_icon="1";if(a.edit==1){this.formPanel.form.setValues(a.record);this.formPanel.baseParams.id=a.record.id;b=a.record.logo;this.formPanel.baseParams.public_icon=a.record.public_icon}else{this.formPanel.baseParams.id=0;this.formPanel.form.reset();this.selectCategory.selectFirst()}this.setIcon(b,this.formPanel.baseParams.public_icon);GO.bookmarks.BookmarksDialog.superclass.show.call(this)},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.bookmarks.url+"action.php",params:{task:"save_bookmark"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){if(c.result.bookmark_id){this.formPanel.baseParams.id=c.result.bookmark_id}if(a){this.hide()}this.fireEvent("save",this)},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},setIcon:function(c,d){var b=new Date();var a=GO.bookmarks.getThumbUrl(c,d);if(d==0){a+="&amp;time="+b.format("U")}this.formPanel.baseParams.public_icon=d;this.thumbExample.getEl().update(GO.bookmarks.thumbTpl.apply({logo:a,title:GO.bookmarks.lang.title,description:GO.bookmarks.lang.description}))},buildForm:function(a){this.bookmarkPanel=new Ext.Panel({layout:"form",border:false,cls:"go-form-panel",waitMsgTarget:true,items:[this.selectCategory=new GO.form.ComboBox({fieldLabel:GO.bookmarks.lang.category,hiddenName:"category_id",anchor:"100%",store:GO.bookmarks.writableCategoriesStore,displayField:"name",valueField:"id",triggerAction:"all",editable:false,allowBlank:false,selectOnFocus:true,forceSelection:true,mode:"local"}),{name:"content",xtype:"textfield",fieldLabel:"URL",anchor:"100%",vtype:"url",value:"http://",allowBlank:false,listeners:{change:function(b){this.el.mask(GO.lang.waitMsgLoad);Ext.Ajax.request({url:GO.settings.modules.bookmarks.url+"json.php",params:{task:"description",url:b.getValue()},callback:function(e,f,d){var c=Ext.decode(d.responseText);if(!GO.util.empty(c.description)){this.formPanel.form.findField("description").setValue(c.description)}if(!GO.util.empty(c.title)){this.formPanel.form.findField("name").setValue(c.title)}if(c.logo){this.setIcon(c.logo);this.selectFile.setValue(c.logo)}this.el.unmask()},scope:this})},scope:this}},{name:"name",xtype:"textfield",fieldLabel:GO.bookmarks.lang.title,anchor:"100%",allowBlank:false},this.externCheck=new Ext.form.Checkbox({name:"open_extern",xtype:"checkbox",boxLabel:GO.bookmarks.lang.extern,hideLabel:true,anchor:"100%",checked:true}),this.moduleCheck=new Ext.form.Checkbox({name:"behave_as_module",xtype:"checkbox",boxLabel:GO.bookmarks.lang.behaveAsModule,hideLabel:true,anchor:"100%"}),{name:"description",xtype:"textarea",fieldLabel:GO.bookmarks.lang.description,anchor:"100%",height:65},this.selectFile=new GO.bookmarks.SelectFile({fieldLabel:GO.bookmarks.lang.logo,name:"logo",anchor:"100%",value:"icons/bookmark.png",dialog:this}),this.thumbExample=new Ext.Component({style:{marginLeft:"100px"}})]});this.moduleCheck.on("check",function(b,c){this.externCheck.setValue(0);this.externCheck.setDisabled(c)},this);this.items=[this.bookmarkPanel];this.formPanel=new Ext.form.FormPanel({baseParams:{id:0},items:this.items})}});GO.bookmarks.CategoryDialog=function(b){if(!b){b={}}this.buildForm();var a=function(){this.propertiesPanel.items.items[0].focus()};b.maximizable=true;b.layout="fit";b.modal=false;b.resizable=false;b.width=500;b.height=400;b.closeAction="hide";b.title=GO.bookmarks.lang.category;b.items=this.formPanel;b.focus=a.createDelegate(this);b.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdApply,handler:function(){this.submitForm()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.bookmarks.CategoryDialog.superclass.constructor.call(this,b);this.addEvents({save:true})};Ext.extend(GO.bookmarks.CategoryDialog,Ext.Window,{show:function(a){if(!this.rendered){this.render(Ext.getBody())}this.tabPanel.setActiveTab(0);if(!a){a=0}this.setCategoryId(a);if(this.category_id>0){this.formPanel.load({url:GO.settings.modules.bookmarks.url+"json.php",task:"category",success:function(b,c){this.readPermissionsTab.setAcl(c.result.data.acl_id);this.selectUser.setRemoteText(c.result.data.user_name);GO.bookmarks.CategoryDialog.superclass.show.call(this)},failure:function(b,c){Ext.Msg.alert(GO.lang.strError,c.result.feedback)},scope:this})}else{this.formPanel.form.reset();this.setWritePermission(true);GO.bookmarks.CategoryDialog.superclass.show.call(this)}},setWritePermission:function(a){this.buttons[0].setDisabled(!a);this.buttons[1].setDisabled(!a)},setCategoryId:function(a){this.formPanel.form.baseParams.category_id=a;this.category_id=a},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.bookmarks.url+"action.php",params:{task:"save_category"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){this.fireEvent("save",this);if(a){this.hide()}else{if(c.result.category_id){this.setCategoryId(c.result.category_id)}if(typeof(c.result.acl_id)!="undefined"){this.readPermissionsTab.setAcl(c.result.acl_id)}}},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},buildForm:function(){var a=[this.selectUser=new GO.form.SelectUser({fieldLabel:GO.lang.strUser,disabled:!GO.settings.modules.bookmarks["write_permission"],value:GO.settings.user_id,anchor:"100%"}),{xtype:"textfield",name:"name",anchor:"100%",allowBlank:false,fieldLabel:GO.lang.strName}];if(GO.settings.modules.bookmarks.write_permission){a.push({name:"public",xtype:"checkbox",boxLabel:GO.bookmarks.lang.sharedCategory,hideLabel:true})}this.propertiesPanel=new Ext.Panel({url:GO.settings.modules.bookmarks.url+"json.php",border:false,baseParams:{task:"category"},title:GO.lang.strProperties,cls:"go-form-panel",waitMsgTarget:true,layout:"form",autoScroll:true,items:a});var a=[this.propertiesPanel];this.readPermissionsTab=new GO.grid.PermissionsPanel({});a.push(this.readPermissionsTab);this.tabPanel=new Ext.TabPanel({activeTab:0,deferredRender:false,border:false,items:a,anchor:"100% 100%"});this.formPanel=new Ext.form.FormPanel({waitMsgTarget:true,url:GO.settings.modules.bookmarks.url+"json.php",border:false,baseParams:{task:"category"},items:this.tabPanel})}});GO.bookmarks.ManageCategoriesGrid=function(a){if(!a){a={}}a.store=GO.bookmarks.writableCategoriesStore;a.layout="fit";a.autoScroll=true;a.split=true;a.border=false;a.paging=true;var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:GO.lang.strName,dataIndex:"name"},{header:GO.lang.strOwner,dataIndex:"user_name",sortable:false}]});a.cm=b;a.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});a.sm=new Ext.grid.RowSelectionModel();a.loadMask=true;this.categoryDialog=new GO.bookmarks.CategoryDialog();this.categoryDialog.on("save",function(){this.store.load();this.changed=true},this);a.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.categoryDialog.show()},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected();this.changed=true},scope:this}];GO.bookmarks.ManageCategoriesGrid.superclass.constructor.call(this,a);this.on("rowdblclick",function(d,e){var c=d.getStore().getAt(e);this.categoryDialog.show(c.data.id)},this);GO.bookmarks.writableCategoriesStore.load()};Ext.extend(GO.bookmarks.ManageCategoriesGrid,GO.grid.GridPanel,{changed:false});GO.bookmarks.ManageCategoriesDialog=function(a){if(!a){a={}}this.categoriesGrid=new GO.bookmarks.ManageCategoriesGrid();a.maximizable=true;a.layout="fit";a.modal=false;a.resizable=false;a.width=500;a.height=300;a.closeAction="hide";a.title=GO.bookmarks.lang.administrateCategories;a.items=this.categoriesGrid;a.buttons=[{text:GO.lang.cmdClose,handler:function(){this.fireEvent("close",this);this.hide()},scope:this}];GO.bookmarks.ManageCategoriesDialog.superclass.constructor.call(this,a);this.on("hide",function(){if(this.categoriesGrid.changed){this.fireEvent("change");this.categoriesGrid.changed=false;if(GO.bookmarks.comboCategoriesStore.loaded){GO.bookmarks.comboCategoriesStore.reload()}}},this);this.addEvents({change:true})};Ext.extend(GO.bookmarks.ManageCategoriesDialog,Ext.Window,{});GO.bookmarks.BookmarksGrid=function(a){a=a||{};a.hideHeaders=true;a.hideMode="offsets";a.autoScroll=true;a.cm=new Ext.grid.ColumnModel([{id:"name",header:GO.bookmarks.lang.title,dataIndex:"name",width:175},{header:"URL",dataIndex:"content",width:250,renderer:this.urlrenderer},{header:GO.bookmarks.lang.category,dataIndex:"category_name",width:125},{header:GO.bookmarks.lang.description,dataIndex:"description",id:"description"}]);a.sm=new Ext.grid.RowSelectionModel({});a.autoExpandColumn="description";a.view=new Ext.grid.GroupingView({scrollOffset:2,hideGroupedColumn:true,groupTextTpl:'{text} ({[values.rs.length]} {[values.rs.length > 1 ? "'+GO.lang.items+'" : "'+GO.lang.item+'"]})',showGroupName:false,forceFit:false});Ext.apply(a,{listeners:{render:function(){a.store.load()}}});GO.bookmarks.BookmarksGrid.superclass.constructor.call(this,a);this.on("rowcontextmenu",function(b,d){var c=b.getStore().getAt(d).data;GO.bookmarks.showBookmarksDialog({record:c,edit:1})},this);this.on("rowdblclick",function(b,d){var c=b.getStore().getAt(d).data;GO.bookmarks.showBookmarksDialog({record:c,edit:1})},this)};Ext.extend(GO.bookmarks.BookmarksGrid,Ext.grid.GridPanel,{urlrenderer:function(e,b,a,f,c,d){return("<a class=normal-link href=\"javascript:GO.bookmarks.openBookmark('"+a+'\');" target="">'+e+"</a>")}});GO.bookmarks.SelectFile=Ext.extend(Ext.form.TriggerField,{triggerClass:"fs-form-file-select",filesFilter:"",root_folder_id:0,files_folder_id:0,dialog:false,onTriggerClick:function(){var a=this.dialog.formPanel.form.baseParams.id;if(!a){thumbtitle="Example"}if(!this.thumbsDialog){this.thumbsDialog=new GO.bookmarks.ThumbsDialog({thumb_id:a,iconfield:this,pubicon:this.dialog.formPanel.baseParams.public_icon,dialog:this.dialog})}this.thumbsDialog.thumb_id=a;this.thumbsDialog.is_publiclogo=this.dialog.formPanel.baseParams.public_icon;this.thumbsDialog.show();this.thumbsDialog.setIcon(this.getValue(),this.thumbsDialog.is_publiclogo)}});GO.bookmarks.thumbTpl=new Ext.XTemplate('<div class="thumb-wrap" ><div class="thumb"><div id="dialog_thumb" class="thumb-name" style="background-image:url({logo})"><h1>{title}</h1>{description}</div></div></div>');GO.bookmarks.ThumbsDialog=function(a){this.chosenlogo="";if(!a){a={}}a.closeAction="hide";a.height=350;a.width=800;a.layout="border";a.title=GO.bookmarks.lang.chooseIcon;a.buttons=[{text:GO.lang.cmdOk,handler:function(){this.iconfield.setValue(this.chosenlogo);a.dialog.setIcon(this.chosenlogo,this.is_publiclogo);this.hide()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];this.logolist=new Ext.XTemplate('<tpl for=".">','<div class="icons">','<img src="'+BaseHref+'modules/bookmarks/icons/{filename}"/> </div>',"</tpl>",'<div style="clear:both"></div>');this.publiclogoView=new Ext.DataView({store:GO.bookmarks.thumbstore,tpl:this.logolist,cls:"thumbnails",itemSelector:"div.icons",multiSelect:false,singleSelect:false,border:false,style:{marginLeft:"13px",marginTop:"13px",marginRight:"6px"}});this.publiclogoView.on("click",function(d,c,f,g){var b=this.publiclogoView.getRecord(f);this.is_publiclogo=1;this.chosenlogo="icons/"+b.data.filename;this.setIcon(this.chosenlogo,this.is_publiclogo)},this);this.thumbExample=new Ext.Component({style:{marginLeft:"13px"}});this.uploadFile=new GO.form.UploadFile({style:{marginTop:"6px"},border:false,inputName:"attachments",addText:GO.bookmarks.lang.uploadLogo,max:1});this.uploadForm=new Ext.form.FormPanel({border:false,cls:"go-form-panel",fileUpload:true,waitMsgTarget:true,autoScroll:true,baseParams:{task:"upload"},items:[this.uploadFile]});this.westPanel=new Ext.Panel({region:"west",border:true,header:false,width:215,items:[this.uploadForm,this.thumbExample]});this.centerPanel=new Ext.Panel({region:"center",autoScroll:true,items:[this.publiclogoView]});Ext.apply(a,{listeners:{render:function(){GO.bookmarks.thumbstore.load()}}});this.uploadFile.on("fileAdded",function(){this.is_publiclogo=0;this.uploadHandler()},this);a.items=[this.centerPanel,this.westPanel];GO.bookmarks.ThumbsDialog.superclass.constructor.call(this,a);this.addEvents({upload:true})};Ext.extend(GO.bookmarks.ThumbsDialog,Ext.Window,{setIcon:function(c,d){var b=new Date();var a=GO.bookmarks.getThumbUrl(c,d);if(d==0){a+="&amp;time="+b.format("U")}this.thumbExample.getEl().update(GO.bookmarks.thumbTpl.apply({logo:a,title:GO.bookmarks.lang.title,description:GO.bookmarks.lang.description}))},uploadHandler:function(){this.uploadForm.form.submit({url:GO.settings.modules.bookmarks.url+"action.php",waitMsg:GO.lang.waitMsgUpload,params:{thumb_id:this.thumb_id,folder_id:this.folder_id},success:function(a,b){this.uploadFile.clearQueue();this.fireEvent("upload",b);this.chosenlogo=b.result.logo;this.is_publiclogo=0;this.setIcon(this.chosenlogo,this.is_publiclogo)},failure:function(b,c){var a="";if(c.failureType=="client"){a=GO.lang.strErrorsInForm}else{a=c.result.feedback}Ext.MessageBox.alert(GO.lang.strError,a)},scope:this})}});