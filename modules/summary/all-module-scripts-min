GO.summary.AnnouncementDialog=function(b){if(!b){b={}}this.buildForm();var a=function(){this.formPanel.items.items[0].focus()};b.collapsible=true;b.maximizable=true;b.layout="fit";b.modal=false;b.resizable=false;b.width=700;b.height=500;b.closeAction="hide";b.title=GO.summary.lang.announcement;b.items=this.formPanel;b.focus=a.createDelegate(this);b.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdApply,handler:function(){this.submitForm()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.summary.AnnouncementDialog.superclass.constructor.call(this,b);this.addEvents({save:true})};Ext.extend(GO.summary.AnnouncementDialog,Ext.Window,{show:function(a,b){if(!this.rendered){this.render(Ext.getBody())}if(!a){a=0}this.setAnnouncementId(a);if(this.announcement_id>0){this.formPanel.load({url:GO.settings.modules.summary.url+"json.php",waitMsg:GO.lang.waitMsgLoad,success:function(c,d){GO.summary.AnnouncementDialog.superclass.show.call(this)},failure:function(c,d){Ext.Msg.alert(GO.lang.strError,d.result.feedback)},scope:this})}else{this.formPanel.form.reset();GO.summary.AnnouncementDialog.superclass.show.call(this)}},setAnnouncementId:function(a){this.formPanel.form.baseParams.announcement_id=a;this.announcement_id=a},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.summary.url+"action.php",params:{task:"save_announcement"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){this.fireEvent("save",this);if(a){this.hide()}else{if(c.result.announcement_id){this.setAnnouncementId(c.result.announcement_id)}}},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},buildForm:function(){this.formPanel=new Ext.form.FormPanel({waitMsgTarget:true,url:GO.settings.modules.summary.url+"action.php",border:false,baseParams:{task:"announcement"},cls:"go-form-panel",items:[{xtype:"datefield",name:"due_time",anchor:"-20",format:GO.settings.date_format,fieldLabel:GO.summary.lang.dueTime},{xtype:"textfield",name:"title",anchor:"-20",fieldLabel:GO.summary.lang.title},{xtype:"htmleditor",name:"content",anchor:"-20 -60",hideLabel:true}]})}});GO.summary.AnnouncementsGrid=function(a){if(!a){a={}}a.border=false;a.layout="fit";a.autoScroll=true;a.split=true;a.store=new GO.data.JsonStore({url:GO.settings.modules.summary.url+"json.php",baseParams:{task:"announcements"},root:"results",id:"id",totalProperty:"total",fields:["id","user_name","due_time","ctime","mtime","title"],remoteSort:true});a.paging=true;var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:GO.summary.lang.title,dataIndex:"title"},{header:GO.lang.strOwner,dataIndex:"user_name",sortable:false},{header:GO.summary.lang.dueTime,dataIndex:"due_time"},{header:GO.lang.strCtime,dataIndex:"ctime"},{header:GO.lang.strMtime,dataIndex:"mtime"}]});a.cm=b;a.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});a.sm=new Ext.grid.RowSelectionModel();a.loadMask=true;this.announcementDialog=new GO.summary.AnnouncementDialog();this.announcementDialog.on("save",function(){this.store.reload()},this);a.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.announcementDialog.show()},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected()},scope:this}];GO.summary.AnnouncementsGrid.superclass.constructor.call(this,a);this.on("rowdblclick",function(d,e){var c=d.getStore().getAt(e);this.announcementDialog.show(c.data.id)},this)};Ext.extend(GO.summary.AnnouncementsGrid,GO.grid.GridPanel,{});GO.summary.AnnouncementsViewGrid=function(a){if(!a){a={}}a.cls="go-grid3-hide-headers";a.border=false;a.autoHeight=true;a.autoScroll=true;a.split=true;a.store=new GO.data.JsonStore({url:GO.settings.modules.summary.url+"json.php",baseParams:{task:"announcements",active:"true"},root:"results",id:"id",totalProperty:"total",fields:["id","user_name","due_time","ctime","mtime","title","content"],remoteSort:true});var b=new Ext.grid.ColumnModel([{header:"",dataIndex:"title",sortable:false,renderer:function(d,e,c){return"<b>"+d+"</b>"}}]);a.cls="go-colored-table";a.cm=b;a.view=new Ext.grid.GridView({enableRowBody:true,showPreview:true,forceFit:true,autoFill:true,getRowClass:function(d,g,f,e){var c=g%2==0?"odd":"even";if(this.showPreview){f.body='<div class="description go-html-formatted">'+d.data.content+"</div>";return"x-grid3-row-expanded "+c}return"x-grid3-row-collapsed"},emptyText:GO.lang.strNoItems});a.loadMask=true;a.disableSelection=true;a.listeners={rowclick:function(f,i,h){if(h.target.tagName=="A"){h.preventDefault();var c=h.target.attributes.href.value;if(GO.email&&c.substr(0,6)=="mailto"){var g=c.indexOf("?");if(g>0){var d=c.substr(7,g-8)}else{var d=c.substr(7)}GO.email.addressContextMenu.showAt(h.getXY(),d)}else{if(c!="#"){if(c.substr(0,6)=="callto"){document.location.href=c}else{window.open(c)}}}}},scope:this};GO.summary.AnnouncementsViewGrid.superclass.constructor.call(this,a)};Ext.extend(GO.summary.AnnouncementsViewGrid,GO.grid.GridPanel,{afterRender:function(){GO.summary.AnnouncementsViewGrid.superclass.afterRender.call(this);Ext.TaskMgr.start({run:function(){this.store.load()},scope:this,interval:180000})}});GO.summary.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",autoEl:"div",defaultType:"portlet",cls:"x-portal-column"});Ext.reg("portalcolumn",GO.summary.PortalColumn);GO.summary.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:true,collapsible:true,draggable:true,cls:"x-portlet",stateful:false,initComponent:function(){this.addEvents({remove_portlet:true});GO.summary.Portlet.superclass.initComponent.call(this)},saveState:function(){},removePortlet:function(){this.fireEvent("remove_portlet",this)}});Ext.reg("portlet",GO.summary.Portlet);GO.summary.Portal=Ext.extend(Ext.Panel,{layout:"column",layoutConfig:{scrollOffset:Ext.isIE?20:0},autoScroll:true,cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){GO.summary.Portal.superclass.initComponent.call(this);this.addEvents({validatedrop:true,beforedragover:true,dragover:true,beforedrop:true,drop:true})},initEvents:function(){GO.summary.Portal.superclass.initEvents.call(this);this.dd=new GO.summary.Portal.DropZone(this,this.dropConfig)}});Ext.reg("portal",GO.summary.Portal);GO.summary.Portal.DropZone=function(a,b){this.portal=a;Ext.dd.ScrollManager.register(a.body);GO.summary.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b);a.body.ddScrollConfig=this.ddScrollConfig};Ext.extend(GO.summary.Portal.DropZone,Ext.dd.DropTarget,{ddScrollConfig:{vthresh:50,hthresh:-1,animate:true,increment:200},createEvent:function(a,f,d,b,h,g){return{portal:this.portal,panel:d.panel,columnIndex:b,column:h,position:g,data:d,source:a,rawEvent:f,status:this.dropAllowed}},notifyOver:function(u,s,v){var f=s.getXY(),a=this.portal,m=u.proxy;if(!this.grid){this.grid=this.getGrid()}var b=a.body.dom.clientWidth;if(!this.lastCW){this.lastCW=b}else{if(this.lastCW!=b){this.lastCW=b;a.doLayout();this.grid=this.getGrid()}}var d=0,k=this.grid.columnX,l=false;for(var q=k.length;d<q;d++){if(f[0]<(k[d].x+k[d].w)){l=true;break}}if(!l){d--}var o,j=false,i=0,t=a.items.itemAt(d);if(!t.items){t.initItems()}var n=t.items.items;for(var q=n.length;i<q;i++){o=n[i];var r=o.el.getHeight();if(r!==0&&(o.el.getY()+(r/2))>f[1]){j=true;break}}var g=this.createEvent(u,s,v,d,t,j&&o?i:t.items.getCount());if(a.fireEvent("validatedrop",g)!==false&&a.fireEvent("beforedragover",g)!==false){m.getProxy().setWidth("auto");if(o){m.moveProxy(o.el.dom.parentNode,j?o.el.dom:null)}else{m.moveProxy(t.el.dom,null)}this.lastPos={c:t,col:d,p:j&&o?i:false};this.scrollPos=a.body.getScroll();a.fireEvent("dragover",g);return g.status}else{return g.status}},notifyOut:function(){delete this.grid},notifyDrop:function(k,g,f){delete this.grid;if(!this.lastPos){return}var i=this.lastPos.c,b=this.lastPos.col,j=this.lastPos.p;var a=this.createEvent(k,g,f,b,i,j!==false?j:i.items.getCount());if(this.portal.fireEvent("validatedrop",a)!==false&&this.portal.fireEvent("beforedrop",a)!==false){k.proxy.getProxy().remove();k.panel.el.dom.parentNode.removeChild(k.panel.el.dom);if(j!==false){i.insert(j,k.panel)}else{i.add(k.panel)}i.doLayout();this.portal.fireEvent("drop",a);var l=this.scrollPos.top;if(l){var h=this.portal.body.dom;setTimeout(function(){h.scrollTop=l},10)}}delete this.lastPos},getGrid:function(){var a=this.portal.bwrap.getBox();a.columnX=[];this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})});return a}});GO.summary.MainPanel=function(a){if(!a){a={}}var e=Ext.state.Manager.get("summary-active-portlets");if(e){e=Ext.decode(e);if(!e[0]||e[0].col=="undefined"){e=false}}if(!e){this.activePortlets=["portlet-announcements","portlet-tasks","portlet-calendar","portlet-note"];e=[{id:"portlet-announcements",col:0},{id:"portlet-tasks",col:0},{id:"portlet-calendar",col:1},{id:"portlet-note",col:1}]}this.activePortlets=[];for(var b=0;b<e.length;b++){this.activePortlets.push(e[b].id)}this.columns=[{columnWidth:0.5,style:"padding:10px 0 10px 10px",border:false},{columnWidth:0.5,style:"padding:10px 10px 10px 10px",border:false}];for(var f=0;f<e.length;f++){if(GO.summary.portlets[e[f].id]){var d=this.columns[e[f].col];if(!d.items){d.items=[GO.summary.portlets[e[f].id]]}else{d.items.push(GO.summary.portlets[e[f].id])}}}this.availablePortletsStore=new Ext.data.JsonStore({id:"id",root:"portlets",fields:["id","title","iconCls"]});for(var f in GO.summary.portlets){if(typeof(GO.summary.portlets[f])=="object"){GO.summary.portlets[f].on("remove_portlet",function(h){h.ownerCt.remove(h,false);h.hide();this.saveActivePortlets()},this);var c=this.activePortlets.indexOf(f);if(c==-1){this.availablePortlets.push(GO.summary.portlets[f])}}}a.items=this.columns;if(!a.items){a.html=GO.summary.lang.noItems}var g=[{text:GO.lang.cmdAdd,iconCls:"btn-add",handler:this.showAvailablePortlets,scope:this}];if(GO.settings.modules.summary.write_permission){g.push({text:GO.summary.lang.manageAnnouncements,iconCls:"btn-settings",handler:function(){if(!this.manageAnnouncementsWindow){this.manageAnnouncementsWindow=new Ext.Window({layout:"fit",items:this.announcementsGrid=new GO.summary.AnnouncementsGrid(),width:700,height:400,title:GO.summary.lang.announcements,closeAction:"hide",buttons:[{text:GO.lang.cmdClose,handler:function(){this.manageAnnouncementsWindow.hide()},scope:this}],listeners:{show:function(){if(!this.announcementsGrid.store.loaded){this.announcementsGrid.store.load()}},scope:this}});this.announcementsGrid.store.on("load",function(){this.announcementsGrid.store.on("load",function(){GO.summary.announcementsPanel.store.load()},this)},this)}this.manageAnnouncementsWindow.show()},scope:this})}this.tbar=new Ext.Toolbar({cls:"go-head-tb",items:g});GO.summary.MainPanel.superclass.constructor.call(this,a);this.on("drop",this.saveActivePortlets,this)};Ext.extend(GO.summary.MainPanel,GO.summary.Portal,{activePortlets:Array(),availablePortlets:Array(),saveActivePortlets:function(){this.activePortlets=[];var b=[];for(var f=0;f<this.items.items.length;f++){var a=this.items.items[f];for(var d=0;d<a.items.items.length;d++){var e=a.items.items[d].id;this.activePortlets.push(e);b.push({id:e,col:f})}}this.availablePortlets=[];for(var d in GO.summary.portlets){if(typeof(GO.summary.portlets[d])=="object"&&this.activePortlets.indexOf(d)==-1){this.availablePortlets.push(GO.summary.portlets[d])}}this.availablePortletsStore.loadData({portlets:this.availablePortlets});Ext.state.Manager.set("summary-active-portlets",Ext.encode(b))},showAvailablePortlets:function(){if(!this.portletsWindow){var a='<tpl for="."><div class="go-item-wrap">{title}</div></tpl>';var b=new GO.grid.SimpleSelectList({store:this.availablePortletsStore,tpl:a,emptyText:GO.lang.strNoItems});b.on("click",function(c,d){var e=c.store.data.items[d].data.id;this.items.items[0].add(GO.summary.portlets[e]);GO.summary.portlets[e].show();this.items.items[0].doLayout();this.saveActivePortlets(true);b.clearSelections();this.portletsWindow.hide()},this);this.portletsWindow=new Ext.Window({title:GO.summary.lang.selectPortlet,layout:"fit",modal:false,height:400,width:600,closable:true,closeAction:"hide",items:new Ext.Panel({items:b,cls:"go-form-panel"})})}this.portletsWindow.show();this.availablePortletsStore.loadData({portlets:this.availablePortlets})}});GO.moduleManager.addModule("summary",GO.summary.MainPanel,{title:GO.summary.lang.summary,iconCls:"go-tab-icon-summary"});GO.portlets.rssFeedPortlet=function(a){a=a||{};a.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:GO.settings.modules.summary.url+"feed_proxy.php"}),baseParams:{feed:a.feed},reader:new Ext.data.XmlReader({record:"item"},["title","author",{name:"pubDate",type:"date"},"link","description","content"])});a.store.setDefaultSort("pubDate","DESC");a.columns=[{id:"title",header:GO.lang.strTitle,dataIndex:"title",sortable:true,width:420,renderer:this.formatTitle},{header:GO.lang.author,dataIndex:"author",width:100,hidden:true,sortable:true},{id:"last",header:GO.lang.strDate,dataIndex:"pubDate",width:150,renderer:this.formatDate,sortable:true}];a.loadMask={msg:GO.summary.lang.loadingFeed};a.sm=new Ext.grid.RowSelectionModel({singleSelect:true});a.viewConfig={forceFit:true,enableRowBody:true,showPreview:a.showPreview,getRowClass:this.applyRowClass};GO.portlets.rssFeedPortlet.superclass.constructor.call(this,a)};Ext.extend(GO.portlets.rssFeedPortlet,GO.grid.GridPanel,{refreshTask:false,afterRender:function(){GO.portlets.rssFeedPortlet.superclass.afterRender.call(this);this.on("rowcontextmenu",this.onContextClick,this);this.on("rowdblclick",this.rowDoubleClick,this);this.on("rowclick",this.rowClick,this);this.refreshTask={run:function(){this.store.load()},scope:this,interval:1800000};Ext.TaskMgr.start(this.refreshTask);this.on("beforedestroy",function(){Ext.TaskMgr.stop(this.refreshTask)},this)},rowDoubleClick:function(c,b,d){var a=this.store.getAt(b);window.open(a.data.link)},rowClick:function(b,a,d){var c=d.target;if(c.tagName!="A"){c=Ext.get(c).findParent("A",10);if(!c){return false}}d.preventDefault();window.open(c.attributes.href.value)},onContextClick:function(b,a,c){if(!this.menu){this.menu=new Ext.menu.Menu({items:[{iconCls:"new-win",text:GO.summary.lang.goToPost,scope:this,handler:function(){window.open(this.ctxRecord.data.link)}},"-",{iconCls:"refresh-icon",text:GO.lang.cmdRefresh,scope:this,handler:function(){this.ctxRow=null;this.store.reload()}}]});this.menu.on("hide",this.onContextHide,this)}c.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(a);this.ctxRecord=this.store.getAt(a);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(c.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},loadFeed:function(b,c){if(typeof(c)=="undefined"){c=1}var a=this.getView();a.showPreview=c;this.store.baseParams={feed:b};this.store.load()},applyRowClass:function(a,d,c,b){if(this.showPreview){c.body='<p class="description">'+Ext.util.Format.htmlDecode(a.data.description.trim())+"</p>";return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(b){if(!b){return""}var a=new Date();var e=a.clearTime(true);var c=b.clearTime(true).getTime();if(c==e.getTime()){return GO.summary.lang.today+b.dateFormat("g:i a")}e=e.add("d",-6);if(e.getTime()<=c){return b.dateFormat("D g:i a")}return b.dateFormat("n/j g:i a")},formatTitle:function(b,c,a){return'<div class="topic"><b>'+b+"</b></div>"}});GO.summary.portlets=[];GO.mainLayout.onReady(function(){var b=new Ext.TabPanel({});GO.summary.portlets["portlet-rss-reader"]=new GO.summary.Portlet({id:"portlet-rss-reader",title:GO.summary.lang.hotTopics,layout:"fit",tools:[{id:"gear",handler:function(){if(!this.manageWebFeedsWindow){this.manageWebFeedsWindow=new Ext.Window({layout:"fit",items:this.WebFeedsGrid=new GO.summary.WebFeedsGrid(),width:700,height:400,title:GO.summary.lang.rssFeeds,closeAction:"hide",buttons:[{text:GO.lang.cmdSave,handler:function(){if(!this.WebFeedsGrid.isValid(true)){alert(GO.lang.strErrorsInForm);return false}var d={task:"save_feeds"};if(this.WebFeedsGrid.store.loaded){d.feeds=Ext.encode(this.WebFeedsGrid.getGridData())}Ext.Ajax.request({url:GO.settings.modules.summary.url+"action.php",params:d,callback:function(f,j,e){if(!j){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strRequestError)}else{var h=Ext.decode(e.responseText);this.WebFeedsGrid.store.reload();this.manageWebFeedsWindow.hide();b.items.each(function(k){if(h.data[k.feedId]==undefined){b.remove(k)}else{var i=h.data[k.feedId];if(k.feed!=i.url||parseInt(k.getView().showPreview)!=parseInt(i.summary)){k.loadFeed(i.url,parseInt(i.summary))}if(k.title!=i.title){k.setTitle(i.title)}delete h.data[k.feedId]}},this);for(var g in h.data){if(g!="remove"){b.add(new GO.portlets.rssFeedPortlet({feedId:h.data[g].id,feed:h.data[g].url,title:h.data[g].title,showPreview:parseInt(h.data[g].summary),closable:false}))}}if(b.items.length==0){b.add(new Ext.Panel({title:"<br />",html:"<br />"+GO.summary.lang.noRssFeeds,cls:"go-form-panel"}));b.setActiveTab(0)}if(b.getActiveTab()==null){b.setActiveTab(0)}}},scope:this})},scope:this}],listeners:{show:function(){if(!this.WebFeedsGrid.store.loaded){this.WebFeedsGrid.store.load()}},scope:this}})}this.manageWebFeedsWindow.show()}},{id:"close",handler:function(g,f,d){d.removePortlet()}}],items:b,height:300});GO.summary.portlets["portlet-rss-reader"].on("render",function(){Ext.Ajax.request({url:GO.settings.modules.summary.url+"json.php",params:{task:"rss_tabs"},waitMsg:GO.lang.waitMsgLoad,waitMsgTarget:"portlet-rss-reader",scope:this,callback:function(e,h,d){if(!h){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strRequestError)}else{var g=Ext.decode(d.responseText);if(g.data.length==0){b.add(new Ext.Panel({title:"<br />",html:"<br />"+GO.summary.lang.noRssFeeds,cls:"go-form-panel"}));b.setActiveTab(0)}else{for(var f=0;f<g.data.length;f++){b.add(new GO.portlets.rssFeedPortlet({feedId:g.data[f].id,feed:g.data[f].url,title:g.data[f].title,showPreview:parseInt(g.data[f].summary),closable:false}));b.setActiveTab(0)}}}this.doLayout()}})});var c=new Ext.form.TextArea({hideLabel:true,name:"text",anchor:"100% 100%"});c.on("change",function(){a.form.submit({url:GO.settings.modules.summary.url+"action.php",params:{task:"save_note"},waitMsg:GO.lang.waitMsgSave})});var a=new Ext.form.FormPanel({items:c,waitMsgTarget:true});a.on("render",function(){a.load({url:GO.settings.modules.summary.url+"json.php",params:{task:"note"},waitMsg:GO.lang.waitMsgLoad})});GO.summary.portlets["portlet-note"]=new GO.summary.Portlet({id:"portlet-note",title:GO.summary.lang.notes,layout:"fit",tools:[{id:"close",handler:function(g,f,d){d.removePortlet()}}],items:a,height:300});GO.summary.announcementsPanel=new GO.summary.AnnouncementsViewGrid();GO.summary.announcementsPanel.store.on("load",function(){if(GO.summary.announcementsPanel.store.getCount()){if(!GO.summary.portlets["portlet-announcements"].isVisible()){GO.summary.portlets["portlet-announcements"].show();GO.summary.portlets["portlet-announcements"].doLayout()}}else{GO.summary.portlets["portlet-announcements"].hide()}},this);GO.summary.portlets["portlet-announcements"]=new GO.summary.Portlet({id:"portlet-announcements",title:GO.summary.lang.announcements,layout:"fit",items:GO.summary.announcementsPanel,autoHeight:true,hideMode:"offsets"});GO.summary.portlets["portlet-announcements"].hide()});GO.summary.WebFeedsGrid=function(c){if(!c){c={}}c.title=GO.summary.lang.webfeeds;c.layout="fit";c.autoScroll=true;c.split=true;var b=new GO.grid.CheckColumn({header:GO.summary.lang.summaryType,dataIndex:"summary",width:55,disabled_field:""});var a={fields:["title","url","summary"],columns:[{header:GO.lang.strTitle,dataIndex:"title",editor:new Ext.form.TextField({allowBlank:false})},{header:GO.lang.url,dataIndex:"url",editor:new Ext.form.TextField({allowBlank:false,vtype:"url"})},b]};c.store=new GO.data.JsonStore({url:GO.settings.modules.summary.url+"json.php",baseParams:{task:"webfeeds"},root:"results",id:"feedId",totalProperty:"total",fields:["feedId","title","url","summary"],remoteSort:true});c.bbar=new Ext.PagingToolbar({cls:"go-paging-tb",store:c.store,pageSize:parseInt(GO.settings.max_rows_list),displayInfo:true,displayMsg:GO.lang.displayingItems,emptyMsg:GO.lang.strNoItems});var e=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:a.columns});c.cm=e;c.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});c.sm=new Ext.grid.RowSelectionModel();c.loadMask=true;c.clicksToEdit=1;c.plugins=[b];var d=Ext.data.Record.create([{name:"feedId",type:"int"},{name:"title",type:"string"},{name:"url",type:"string"},{name:"summary",type:"boolean"}]);c.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){var f=new d({feedId:"0"});this.stopEditing();this.store.insert(0,f);this.startEditing(0,0)},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){var g=this.selModel.getSelections();for(var f=0;f<g.length;f++){g[f].commit();this.store.remove(g[f])}},scope:this}];GO.summary.WebFeedsGrid.superclass.constructor.call(this,c)};Ext.extend(GO.summary.WebFeedsGrid,GO.grid.EditorGridPanel,{getGridData:function(){var d={};for(var b=0;b<this.store.data.items.length;b++){var c=this.store.data.items[b].data;d[b]={};for(var a in c){d[b][a]=c[a]}}return d}});