(function(){var addListener=function(){if(window.addEventListener){return function(el,eventName,fn,capture){el.addEventListener(eventName,fn,!!capture)}}else{if(window.attachEvent){return function(el,eventName,fn,capture){el.attachEvent("on"+eventName,fn)}}else{return function(){}}}}(),removeListener=function(){if(window.removeEventListener){return function(el,eventName,fn,capture){el.removeEventListener(eventName,fn,(capture))}}else{if(window.detachEvent){return function(el,eventName,fn){el.detachEvent("on"+eventName,fn)}}else{return function(){}}}}();var EV=Ext.lib.Event;var MIM;var MASK_TARGET="x-frame-mask-target";Ext.ux.ManagedIFrame=function(){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||Ext.getBody(),Ext.apply({tag:"iframe",frameborder:0,src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:"about:blank"},config.autoCreate))):null;if(el&&this.unsupportedText){Ext.DomHelper.append(el.dom.parentNode,{tag:"noframes",html:this.unsupportedText})}}if(!el||el.dom.tagName!="IFRAME"){return el}el.dom.name||(el.dom.name=el.dom.id);el.dom.ownerEl=el;this.addEvents({focus:true,blur:true,unload:true,domready:true,documentloaded:true,exception:true,message:true});if(config.listeners){this.listeners=config.listeners;Ext.ux.ManagedIFrame.superclass.constructor.call(this)}Ext.apply(el,this);el.addClass("x-managed-iframe");if(config.style){el.applyStyles(config.style)}Ext.apply(el,{disableMessaging:config.disableMessaging===true,loadMask:!!config.loadMask?Ext.apply({msg:"Loading..",maskEl:null,hideOnReady:false,disabled:false},config.loadMask):false,_windowContext:null,eventsFollowFrameLinks:typeof config.eventsFollowFrameLinks=="undefined"?true:config.eventsFollowFrameLinks});if(el.loadMask){el.loadMask.maskEl||(el.loadMask.maskEl=el.parent("."+MASK_TARGET)||el.parent());el.loadMask.maskEl.addClass(MASK_TARGET)}var um=el.updateManager=new Ext.UpdateManager(el,true);um.showLoadIndicator=config.showLoadIndicator||false;Ext.ux.ManagedIFrame.Manager.register(el);if(config.src){el.setSrc(config.src)}else{var content=config.html||config.content||false;if(content){el.reset(null,function(frame){frame.update.apply(el,[].concat(content))})}}return el};Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,CSS:null,manager:null,disableMessaging:true,domReadyRetries:7500,resetUrl:(function(){if(Ext.isIE&&Ext.isSecure){return Ext.SSL_SECURE_URL}else{return"about:blank"}})(),unsupportedText:"Inline frames are NOT enabled/supported by your browser.",setSrc:function(url,discardUrl,callback,scope){if(url&&typeof url=="object"){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false;scope=url.scope||null}var src=url||this.src||this.resetUrl;this._windowContext=null;this._unHook();this._frameAction=this.frameInit=this._domReady=false;this.showMask();var s=this._targetURI=typeof src=="function"?src()||"":src;try{this._frameAction=true;this._callBack=typeof callback=="function"?callback.createDelegate(scope):null;this.dom.src=s;this.frameInit=true;this.checkDOM()}catch(ex){this.fireEvent("exception",this,ex)}if(discardUrl!==true){this.src=src}return this},setLocation:function(url,discardUrl,callback,scope){if(url&&typeof url=="object"){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false;scope=url.scope||null}var src=url||this.src||this.resetUrl;this._windowContext=null;this._unHook();this._frameAction=this.frameInit=this._domReady=false;this.showMask();var s=this._targetURI=typeof src=="function"?src()||"":src;try{this._frameAction=true;this._callBack=typeof callback=="function"?callback.createDelegate(scope):null;this.getWindow().location.replace(s);this.frameInit=true;this.checkDOM()}catch(ex){this.fireEvent("exception",this,ex)}if(discardUrl!==true){this.src=src}return this},reset:function(src,callback,scope){this._unHook();var loadMaskOff=false;if(this.loadMask){loadMaskOff=this.loadMask.disabled;this.loadMask.disabled=false}this._callBack=function(frame){if(frame.loadMask){frame.loadMask.disabled=loadMaskOff}frame._frameAction=false;frame.frameInit=true;this._isReset=false;if(callback){callback.call(scope||window,frame)}};this.hideMask(true);this._frameAction=false;this.frameInit=true;this._isReset=true;var s=src;if(typeof src=="function"){s=src()}s=this._targetURI=Ext.isEmpty(s,true)?this.resetUrl:s;this.getWindow().location.href=s;return this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback,scope){loadScripts=loadScripts||this.getUpdateManager().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if((doc=this.getDocument())&&!!content.length){this._unHook();this._windowContext=this.src=null;this._targetURI=location.href;this.src=null;this.frameInit=true;this.showMask();this._callBack=typeof callback=="function"?callback.createDelegate(scope):null;doc.open();this._frameAction=true;doc.write(content);doc.close();this.checkDOM()}else{this.hideMask(true);if(callback){callback.call(scope,this)}}return this},disableMessaging:true,_XFrameMessaging:function(){var tagStack={"$":[]};var isEmpty=function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)};var apply=function(o,c,defaults){if(defaults){apply(o,defaults)}if(o&&c&&typeof c=="object"){for(var p in c){o[p]=c[p]}}return o};window.sendMessage=function(message,tag,origin){var MIF;if(MIF=arguments.callee.manager){if(message._fromHost){var fn,result;var compTag=message.tag||tag||null;var mstack=!isEmpty(compTag)?tagStack[compTag.toLowerCase()]||[]:tagStack["$"];for(var i=0,l=mstack.length;i<l;i++){if(fn=mstack[i]){result=fn.apply(fn.__scope,arguments)===false?false:result;if(fn.__single){mstack[i]=null}if(result===false){break}}}return result}else{message={type:isEmpty(tag)?"message":"message:"+tag.toLowerCase().replace(/^\s+|\s+$/g,""),data:message,domain:origin||document.domain,uri:document.documentURI,source:window,tag:isEmpty(tag)?null:tag.toLowerCase()};try{return MIF.disableMessaging!==true?MIF.fireEvent.call(MIF,message.type,MIF,message):null}catch(ex){}return null}}};window.onhostmessage=function(fn,scope,single,tag){if(typeof fn=="function"){if(!isEmpty(fn.__index)){throw"onhostmessage: duplicate handler definition"+(tag?" for tag:"+tag:"")}var k=isEmpty(tag)?"$":tag.toLowerCase();tagStack[k]||(tagStack[k]=[]);apply(fn,{__tag:k,__single:single||false,__scope:scope||window,__index:tagStack[k].length});tagStack[k].push(fn)}else{throw"onhostmessage: function required"}};window.unhostmessage=function(fn){if(typeof fn=="function"&&typeof fn.__index!="undefined"){var k=fn.__tag||"$";tagStack[k][fn.__index]=null}}},getHistory:function(){var h=null;try{h=this.getWindow().history}catch(eh){}return h},get:function(el){return MIM.El.get(this,el)},fly:function(el,named){named=named||"_global";el=this.getDom(el);if(!el){return null}if(!MIM._flyweights[named]){MIM._flyweights[named]=new Ext.Element.Flyweight()}MIM._flyweights[named].dom=el;return MIM._flyweights[named]},getDom:function(el){var d;if(!el||!(d=this.getDocument())){return null}return el.dom?el.dom:(typeof el=="string"?d.getElementById(el):el)},select:function(selector,unique){var d;return(d=this.getDocument())?Ext.Element.select(selector,unique,d):null},query:function(selector){var d;return(d=this.getDocument())?Ext.DomQuery.select(selector,d):null},getDoc:function(){return this.get(this.getDocument())},removeNode:function(node){MIM.removeNode(this,this.getDom(node))},_unHook:function(){var elcache,h=MIM.getFrameHash(this)||{};if(this._hooked){if(h&&(elcache=h.elCache)){for(var id in elcache){var el=elcache[id];if(el.removeAllListeners){el.removeAllListeners()}delete elcache[id]}if(h.docEl){h.docEl.removeAllListeners();h.docEl=null;delete h.docEl}}var w;if(this._frameProxy&&(w=this.getWindow())){removeListener(w,"focus",this._frameProxy);removeListener(w,"blur",this._frameProxy);removeListener(w,"resize",this._frameProxy);removeListener(w,"unload",this._frameProxy)}}this._hooked=this._domReady=this._domFired=this._frameAction=false;MIM._flyweights={};this.CSS=this.CSS?this.CSS.destroy():null},_renderHook:function(){this._windowContext=null;this.CSS=this.CSS?this.CSS.destroy():null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+this.dom.id+'"))._windowContext='+(Ext.isIE?"window":"{eval:function(s){return eval(s);}}")+";})();")){this._frameProxy||(this._frameProxy=MIM.eventProxy.createDelegate(this));var w;if(w=this.getWindow()){addListener(w,"focus",this._frameProxy);addListener(w,"blur",this._frameProxy);addListener(w,"resize",this._frameProxy);addListener(w,"unload",this._frameProxy)}if(this.disableMessaging!==true){this.loadFunction({name:"XMessage",fn:this._XFrameMessaging},false,true);var sm;if(sm=w.sendMessage){sm.manager=this}}this.CSS=new CSSInterface(this.getDocument())}}catch(ex){console.warn(ex)}return(this._hooked=this.domWritable())},sendMessage:function(message,tag,origin){var win;if(this.disableMessaging!==true&&(win=this.getWindow())){tag||(tag=message.tag||"");tag=tag.toLowerCase();message=Ext.applyIf(message.data?message:{data:message},{type:Ext.isEmpty(tag)?"message":"message:"+tag,domain:origin||document.domain,uri:document.documentURI,source:window,tag:tag||null,_fromHost:this});return win.sendMessage?win.sendMessage.call(null,message,tag,origin):null}return null},_windowContext:null,getDocument:function(){var win=this.getWindow(),doc=null;try{doc=(Ext.isIE&&win?win.document:null)||this.dom.contentDocument||window.frames[this.id].document||null}catch(gdEx){return false}return doc},getBody:function(){var d;return(d=this.getDocument())?d.body:null},getDocumentURI:function(){var URI,d;try{URI=this.src&&(d=this.getDocument())?d.location.href:null}catch(ex){}return URI||(typeof this.src=="function"?this.src():this.src)},getWindowURI:function(){var URI,w;try{URI=(w=this.getWindow())?w.location.href:null}catch(ex){}return URI||(typeof this.src=="function"?this.src():this.src)},getWindow:function(){var dom=this.dom,win=null;try{win=dom.contentWindow||window.frames[dom.name]||null}catch(gwEx){}return win},print:function(){var win;try{if(win=this.getWindow()){if(Ext.isIE){win.focus()}win.print()}}catch(ex){throw"print exception: "+(ex.description||ex.message||ex)}},destroy:function(){this.removeAllListeners();if(this.loadMask){this.hideMask(true);Ext.apply(this.loadMask,{masker:null,maskEl:null})}if(this.dom){Ext.ux.ManagedIFrame.Manager.deRegister(this);this.dom.ownerEl=this._windowContext=null;if(Ext.isIE&&this.dom.src){this.dom.src="javascript:false"}this._maskEl=null;this.remove()}},domWritable:function(){return !!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw"execScript:non-secure context"}}catch(ex){this.fireEvent("exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getDocument();if(doc&&typeof doc.getElementsByTagName!="undefined"){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this.fireEvent("exception",this,ex)}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fn=fn.fn||window[fn];this.execScript(name+"="+fn,useDOM);if(invokeIt){this.execScript(name+"()")}},mask:function(msg,msgCls,maskCls){this._mask&&this.unmask();var p=this.parent("."+MASK_TARGET)||this.parent();if(p.getStyle("position")=="static"&&!p.select("iframe,frame,object,embed").elements.length){p.addClass("x-masked-relative")}p.addClass("x-masked");this._mask=Ext.DomHelper.append(p,{cls:maskCls||"ext-el-mask"},true);this._mask.setDisplayed(true);this._mask._agent=p;var delay=(this.loadMask?this.loadMask.delay:0)||10;if(typeof msg=="string"){this._maskMsg=Ext.DomHelper.append(p,{cls:msgCls||"ext-el-mask-msg x-mask-loading",style:{visibility:"hidden"},cn:{tag:"div",html:msg}},true);this._maskMsg.setVisibilityMode(Ext.Element.VISIBILITY);(function(){this._mask&&this._maskMsg&&this._maskMsg.center(p).setVisible(true)}).defer(delay,this)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(undefined,this._mask.getHeight())}return this._mask},unmask:function(){var a;if(this._mask){(a=this._mask._agent)&&a.removeClass(["x-masked-relative","x-masked"]);if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg}this._mask.remove();delete this._mask}},showMask:function(msg,msgCls,maskCls){var lmask=this.loadMask;if(lmask&&!lmask.disabled&&!this._mask){this.mask(msg||lmask.msg,msgCls||lmask.msgCls,maskCls||lmask.maskCls)}},hideMask:function(forced){var tlm=this.loadMask;if(tlm&&!!this._mask){if(forced||(tlm.hideOnReady&&this._domReady)){this.unmask()}}},submitAsTarget:function(submitCfg){var opt=submitCfg||{},D=document;var form=opt.form||Ext.DomHelper.append(D.body,{tag:"form",cls:"x-hidden"});form=Ext.getDom(form.form||form);form.target=this.dom.name;form.method=opt.method||"POST";opt.encoding&&(form.enctype=form.encoding=String(opt.encoding));opt.url&&(form.action=opt.url);var hiddens,hd;if(opt.params){hiddens=[];var ps=typeof opt.params=="string"?Ext.urlDecode(params,false):opt.params;for(var k in ps){if(ps.hasOwnProperty(k)){hd=D.createElement("input");hd.type="hidden";hd.name=k;hd.value=ps[k];form.appendChild(hd);hiddens.push(hd)}}}this._callBack=typeof opt.callback=="function"?opt.callback.createDelegate(opt.scope):null;this._frameAction=this.frameInit=true;this._targetURI=location.href;this.showMask();(function(){form.submit();hiddens&&Ext.each(hiddens,Ext.removeNode,Ext);Ext.fly(form,"_dynaForm").hasClass("x-hidden")&&Ext.removeNode(form);this.hideMask(true)}).defer(100,this)},loadHandler:function(e,target){target||(target={});var rstatus=(e&&typeof e.type!=="undefined"?e.type:this.dom.readyState);if(!this.frameInit||(!this._frameAction&&!this.eventsFollowFrameLinks)){return}switch(rstatus){case"domready":var M;try{M=this.getWindow()?this.getWindow().hostMIF:null}catch(access){}if(this._frameAction&&!M){this.frameInit&&this._renderHook()&&this.fireEvent.defer(1,this,["domready",this]);this._domFired=this._hooked}case"domfail":this._domReady=true;this.hideMask();break;case"load":case"complete":if(!this._domFired){this.loadHandler({type:"domready",id:this.id},this.dom)}Ext.isIE&&this.getWindow()&&this.getWindow().focus();if(this._frameAction||this.eventsFollowFrameLinks){this.fireEvent.defer(1,this,["documentloaded",this]);if(this._callBack){this._callBack.defer(1,null,[this])}}this._frameAction=this.frameInit=false;if(this.eventsFollowFrameLinks){this._domFired=this._domReady=false}this.hideMask(true);break;default:}this.frameState=rstatus},checkDOM:function(win){if(Ext.isOpera||Ext.isGecko||!this._frameAction){return}var n=0,manager=this,domReady=false,b,l,d,max=this.domReadyRetries,polling=false,startLocation=(this.getDocument()||{location:{}}).location.href;(function(){d=manager.getDocument()||{location:{}};polling=(d.location.href!==startLocation||d.location.href===manager._targetURI);if(!manager._frameAction||manager._domReady){return}domReady=polling&&((b=manager.getBody())&&!!(b.innerHTML||"").length)||false;if(d.location.href&&!domReady&&(++n<max)){setTimeout(arguments.callee,2);return}manager.loadHandler({type:domReady?"domready":"domfail"})})()}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};var CSSInterface=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,destroy:function(){return doc=null},createStyleSheet:function(cssText,id){var ss;if(!doc){return}var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");if(id){rules.setAttribute("id",id)}if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc){return}var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){this.removeStyleSheet(id);if(!doc){return}var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss){if(this.rules){this.rules={}}try{var ssRules=ss.cssRules||ss.rules;for(var j=ssRules.length-1;j>=0;--j){this.rules[ssRules[j].selectorText]=ssRules[j]}}catch(e){}},getRules:function(refreshCache){if(this.rules==null||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector]}for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i]]}}return null},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(styleCamelRe,styleCamelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true}}}return false}}}};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{position:"relative"},frameStyle:{overflow:"auto"},frameConfig:null,hideMode:!Ext.isIE?"nosize":"display",shimCls:"x-frame-shim",shimUrl:null,loadMask:false,stateful:false,animCollapse:Ext.isIE&&Ext.enableFx,autoScroll:false,closable:true,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:false,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",initComponent:function(){var f=this.frameConfig?this.frameConfig.autoCreate||this.frameConfig:{};var frCfg=Ext.apply(f,{id:f.id||Ext.id()});frCfg.name=f.name||frCfg.id;if(Ext.isIE&&Ext.isSecure){frCfg.src=Ext.SSL_SECURE_URL}var frameTag=Ext.apply({tag:"iframe",frameborder:0,cls:"x-managed-iframe",style:this.frameStyle||f.style||{}},frCfg);var unsup=this.unsupportedText?{tag:"noframes",html:this.unsupportedText}:[];this.bodyCfg||(this.bodyCfg={cls:this.baseCls+"-body",children:this.contentEl?[]:[frameTag].concat(unsup)});this.autoScroll=false;this.items=null;if(this.stateful!==false){this.stateEvents||(this.stateEvents=["documentloaded"])}Ext.ux.ManagedIframePanel.superclass.initComponent.call(this);this.monitorResize||(this.monitorResize=!!this.fitToParent);this.addEvents({documentloaded:true,domready:true,message:true,exception:true,blur:true,focus:true});this.addListener=this.on},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments)},beforeDestroy:function(){if(this.rendered){if(this.tools){for(var k in this.tools){Ext.destroy(this.tools[k])}}if(this.header&&this.headerAsText){var s;if(s=this.header.child("span")){s.remove(true,true)}this.header.update("")}Ext.each(["iframe","shim","header","topToolbar","bottomToolbar","footer","loadMask","body","bwrap"],function(elName){if(this[elName]){if(typeof this[elName].destroy=="function"){this[elName].destroy()}else{Ext.destroy(this[elName])}this[elName]=null;delete this[elName]}},this)}Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this)},afterRender:function(container){var html=this.html;delete this.html;Ext.ux.ManagedIframePanel.superclass.afterRender.apply(this,arguments);if(this.iframe=this.body.child("iframe")){this.iframe.ownerCt=this;if(this.loadMask){var mEl;if(mEl=this.loadMask.maskEl){(this[mEl]||mEl||this.body).addClass(MASK_TARGET)}this.loadMask=Ext.apply({disabled:false,hideOnReady:false},this.loadMask)}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){var MIM=Ext.ux.ManagedIFrame.Manager,st=false;Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.splitEl){st=true;if(!reg.split._splitTrapped){reg.split.on("beforeresize",MIM.showShims,MIM);reg.split._splitTrapped=true}}},this);if(st&&!this._splitTrapped){this.on("resize",MIM.hideShims,MIM);this._splitTrapped=true}},this,{single:true});ownerCt=ownerCt.ownerCt}this.shim=Ext.get(this.body.child("."+this.shimCls))||Ext.DomHelper.append(this.body,{tag:"img",src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"},true);var El=Ext.Element;var mode=El[this.hideMode.toUpperCase()]||"x-hide-nosize";Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(el){if(el){el.setVisibilityMode(mode)}},this);if(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle,src:this.defaultSrc,html:html})){this.loadMask=this.iframe.loadMask;this.iframe.ownerCt=this;this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[]));delete this._msgTagHandlers}}},sendMessage:function(){if(this.iframe){this.iframe.sendMessage.apply(this.iframe,arguments)}},filterOptRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,on:function(name){var tagRE=/^message\:/i,n=null;if(typeof name=="object"){for(var na in name){if(!this.filterOptRe.test(na)&&tagRE.test(na)){n||(n=[]);n.push(na.toLowerCase())}}}else{if(tagRE.test(name)){n=[name.toLowerCase()]}}if(this.getFrame()&&n){this.relayEvents(this.iframe,n)}else{this._msgTagHandlers||(this._msgTagHandlers=[]);if(n){this._msgTagHandlers=this._msgTagHandlers.concat(n)}}Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments)},setSrc:function(url,discardUrl,callback,scope){url=url||this.defaultSrc||false;if(url&&this.rendered&&this.iframe){this.iframe.setSrc.call(this.iframe,url,discardUrl,callback,scope)}return this},setLocation:function(url,discardUrl,callback,scope){url=url||this.defaultSrc||false;if(url&&this.rendered&&this.iframe){this.iframe.setLocation.call(this.iframe,url,discardUrl,callback,scope)}return this},getState:function(){var URI=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},URI?{defaultSrc:typeof URI=="function"?URI():URI}:null)},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},doAutoLoad:function(){this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.ux.ManagedIFrame.Manager=MIM=function(){var frames={};var implementation={readyHandler:function(e){try{var $frame=e.target.ownerEl;if($frame&&$frame._frameAction){$frame.loadHandler.call($frame,{type:"domready"})}}catch(rhEx){return}},shimCls:"x-frame-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.dom.name]={ref:frame,elCache:{}};frame.dom[Ext.isIE?"onreadystatechange":"onload"]=frame.loadHandler.createDelegate(frame);return frame},deRegister:function(frame){frame._unHook();frame.dom.onload=frame.dom.onreadystatechange=null;delete frames[frame.id];delete frames[frame.dom.name]},hideShims:function(){if(!this.shimApplied){return}Ext.select("."+this.shimCls,true).removeClass(this.shimCls+"-on");this.shimApplied=false},showShims:function(){if(!this.shimApplied){this.shimApplied=true;Ext.select("."+this.shimCls,true).addClass(this.shimCls+"-on")}},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frame.id?frames[frame.id]:null},eventProxy:function(e){if(!e){return}e=Ext.EventObject.setEvent(e);var be=e.browserEvent||e;(e.type=="unload")&&this._unHook();if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){return this.fireEvent(e.type,e)}},_flyweights:{},destroy:function(){if(document.addEventListener){window.removeEventListener("DOMFrameContentLoaded",this.readyHandler,true)}delete this._flyweights},removeNode:Ext.isIE?function(frame,n){frame=MIM.getFrameHash(frame);if(frame&&n&&n.tagName!="BODY"){d=frame.scratchDiv||(frame.scratchDiv=frame.getDocument().createElement("div"));d.appendChild(n);d.innerHTML=""}}:function(frame,n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}}};if(document.addEventListener){window.addEventListener("DOMFrameContentLoaded",implementation.readyHandler,true)}Ext.EventManager.on(window,"beforeunload",implementation.destroy,implementation);return implementation}();MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;MIM.El=function(frame,el,forceNew){var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});var dom=frame.getDom(el);if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&elCache[id]){return elCache[id]}this.dom=dom;this.id=id||Ext.id(dom)};MIM.El.get=function(frame,el){var ex,elm,id,doc;if(!frame||!el){return null}var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});if(!(doc=frame.getDocument())){return null}if(typeof el=="string"){if(!(elm=frame.getDom(el))){return null}if(ex=elCache[el]){ex.dom=elm}else{ex=elCache[el]=new MIM.El(frame,elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=elCache[id]){ex.dom=el}else{ex=elCache[id]=new MIM.El(frame,el)}return ex}else{if(el instanceof MIM.El){if(el!=frameObj.docEl){el.dom=frame.getDom(el.id)||el.dom;elCache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return frame.select(el)}else{if(el==doc){if(!frameObj.docEl){var f=function(){};f.prototype=MIM.El.prototype;frameObj.docEl=new f();frameObj.docEl.dom=doc}return frameObj.docEl}}}}}}return null};Ext.apply(MIM.El.prototype,Ext.Element.prototype);Ext.ns("Ext.ux.panel","Ext.ux.portlet");Ext.reg("iframepanel",Ext.ux.panel.ManagedIframe=Ext.ux.ManagedIframePanel);Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",Ext.ux.portlet.ManagedIframe=Ext.ux.ManagedIframePortlet);Ext.apply(Ext.Element.prototype,{setVisible:function(visible,animate){if(!animate||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(visible)}else{if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}else{this[visible?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==Ext.Element.DISPLAY){dom.style.display="none"}else{if(visMode==Ext.Element.VISIBILITY){dom.style.visibility="hidden"}else{Ext.get(dom).addClass(String(visMode))}}Ext.get(dom).setOpacity(1)}})}return this},isVisible:function(deep){var vis=!(this.hasClass(this.visibilityMode)||this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none");if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true}});Ext.onReady(function(){var CSS=Ext.util.CSS,rules=[];CSS.getRule(".x-managed-iframe")||(rules.push(".x-managed-iframe {height:100%;width:100%;overflow:auto;position:relative;}"));CSS.getRule("."+MASK_TARGET)||(rules.push("."+MASK_TARGET+"{position:relative;zoom:1;}","."+MASK_TARGET+" .ext-el-mask-msg{z-index:101!important;} "));if(!CSS.getRule(".x-frame-shim")){rules.push(".x-frame-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}")}CSS.getRule(".x-hide-nosize")||(rules.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none;}"));if(!!rules.length){CSS.createStyleSheet(rules.join(" "))}})})();if(Ext.provide){Ext.provide("miframe")}var tinymce={majorVersion:"3",minorVersion:"2.5",releaseDate:"2009-06-29",_init:function(){var q=this,k=document,l=window,j=navigator,b=j.userAgent,h,a,g,f,e,m;q.isOpera=l.opera&&opera.buildNumber;q.isWebKit=/WebKit/.test(b);q.isIE=!q.isWebKit&&!q.isOpera&&(/MSIE/gi).test(b)&&(/Explorer/gi).test(j.appName);q.isIE6=q.isIE&&/MSIE [56]/.test(b);q.isGecko=!q.isWebKit&&/Gecko/.test(b);q.isMac=b.indexOf("Mac")!=-1;q.isAir=/adobeair/i.test(b);if(l.tinyMCEPreInit){q.suffix=tinyMCEPreInit.suffix;q.baseURL=tinyMCEPreInit.base;q.query=tinyMCEPreInit.query;return}q.suffix="";a=k.getElementsByTagName("base");for(h=0;h<a.length;h++){if(m=a[h].href){if(/^https?:\/\/[^\/]+$/.test(m)){m+="/"}f=m?m.match(/.*\//)[0]:""}}function c(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){q.suffix="_src"}if((e=i.src.indexOf("?"))!=-1){q.query=i.src.substring(e+1)}q.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(f&&q.baseURL.indexOf("://")==-1){q.baseURL=f+q.baseURL}return q.baseURL}return null}a=k.getElementsByTagName("script");for(h=0;h<a.length;h++){if(c(a[h])){return}}g=k.getElementsByTagName("head")[0];if(g){a=g.getElementsByTagName("script");for(h=0;h<a.length;h++){if(c(a[h])){return}}}return},is:function(b,a){var c=typeof(b);if(!a){return c!="undefined"}if(a=="array"&&(b.hasOwnProperty&&b instanceof Array)){return true}return c==a},each:function(e,a,c){var f,b;if(!e){return 0}c=c||e;if(typeof(e.length)!="undefined"){for(f=0,b=e.length;f<b;f++){if(a.call(c,e[f],f,e)===false){return 0}}}else{for(f in e){if(e.hasOwnProperty(f)){if(a.call(c,e[f],f,e)===false){return 0}}}}return 1},map:function(b,c){var e=[];tinymce.each(b,function(a){e.push(c(a))});return e},grep:function(b,c){var e=[];tinymce.each(b,function(a){if(!c||c(a)){e.push(a)}});return e},inArray:function(c,e){var f,b;if(c){for(f=0,b=c.length;f<b;f++){if(c[f]===e){return f}}}return -1},extend:function(g,f){var c,b=arguments;for(c=1;c<b.length;c++){f=b[c];tinymce.each(f,function(a,e){if(typeof(a)!=="undefined"){g[e]=a}})}return g},trim:function(a){return(a?""+a:"").replace(/^\s*|\s*$/g,"")},create:function(k,a){var j=this,b,f,g,h,e,i=0;k=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(k);g=k[3].match(/(^|\.)(\w+)$/i)[2];f=j.createNS(k[3].replace(/\.\w+$/,""));if(f[g]){return}if(k[2]=="static"){f[g]=a;if(this.onCreate){this.onCreate(k[2],k[3],f[g])}return}if(!a[g]){a[g]=function(){};i=1}f[g]=a[g];j.extend(f[g].prototype,a);if(k[5]){b=j.resolve(k[5]).prototype;h=k[5].match(/\.(\w+)$/i)[1];e=f[g];if(i){f[g]=function(){return b[h].apply(this,arguments)}}else{f[g]=function(){this.parent=b[h];return e.apply(this,arguments)}}f[g].prototype[g]=f[g];j.each(b,function(c,l){f[g].prototype[l]=b[l]});j.each(a,function(c,l){if(b[l]){f[g].prototype[l]=function(){this.parent=b[l];return c.apply(this,arguments)}}else{if(l!=g){f[g].prototype[l]=c}}})}j.each(a["static"],function(c,l){f[g][l]=c});if(this.onCreate){this.onCreate(k[2],k[3],f[g].prototype)}},walk:function(c,b,e,a){a=a||this;if(c){if(e){c=c[e]}tinymce.each(c,function(g,f){if(b.call(a,g,f,e)===false){return false}tinymce.walk(g,b,e,a)})}},createNS:function(e,c){var b,a;c=c||window;e=e.split(".");for(b=0;b<e.length;b++){a=e[b];if(!c[a]){c[a]={}}c=c[a]}return c},resolve:function(e,c){var b,a;c=c||window;e=e.split(".");for(b=0,a=e.length;b<a;b++){c=c[e[b]];if(!c){break}}return c},addUnload:function(g,e){var c=this,a=window;g={func:g,scope:e||this};if(!c.unloads){function b(){var f=c.unloads,i,j;if(f){for(j in f){i=f[j];if(i&&i.func){i.func.call(i.scope,1)}}if(a.detachEvent){a.detachEvent("onbeforeunload",h);a.detachEvent("onunload",b)}else{if(a.removeEventListener){a.removeEventListener("unload",b,false)}}c.unloads=i=f=a=b=0;if(window.CollectGarbage){window.CollectGarbage()}}}function h(){var i=document;if(i.readyState=="interactive"){function f(){i.detachEvent("onstop",f);if(b){b()}i=0}if(i){i.attachEvent("onstop",f)}window.setTimeout(function(){if(i){i.detachEvent("onstop",f)}},0)}}if(a.attachEvent){a.attachEvent("onunload",b);a.attachEvent("onbeforeunload",h)}else{if(a.addEventListener){a.addEventListener("unload",b,false)}}c.unloads=[g]}else{c.unloads.push(g)}return g},removeUnload:function(c){var a=this.unloads,b=null;tinymce.each(a,function(f,e){if(f&&f.func==c){a.splice(e,1);b=c;return false}});return b},explode:function(a,b){return a?tinymce.map(a.split(b||","),tinymce.trim):a},_addVer:function(b){var a;if(!this.query){return b}a=(b.indexOf("?")==-1?"?":"&")+this.query;if(b.indexOf("#")==-1){return b+a}return b.replace("#",a+"#")}};window.tinymce=tinymce;tinymce._init();tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(f,e){if(a==f.cb){c=a;b.splice(e,1);return false}});return c},dispatch:function(){var g,e=arguments,f,b=this.listeners,h;for(f=0;f<b.length;f++){h=b[f];g=h.cb.apply(h.scope,e);if(g===false){break}}return g}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(f,h){var g=this,i,e,c;f=tinymce.trim(f);h=g.settings=h||{};if(/^(mailto|tel|news|javascript|about):/i.test(f)||/^\s*#/.test(f)){g.source=f;return}if(f.indexOf("/")===0&&f.indexOf("//")!==0){f=(h.base_uri?h.base_uri.protocol||"http":"http")+"://mce_host"+f}if(!/^\w*:?\/\//.test(f)){f=(h.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(h.base_uri.path,f)}f=f.replace(/@@/g,"(mce_at)");f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(f);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=f[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}g[b]=k});if(c=h.base_uri){if(!g.protocol){g.protocol=c.protocol}if(!g.userInfo){g.userInfo=c.userInfo}if(!g.port&&g.host=="mce_host"){g.port=c.port}if(!g.host||g.host=="mce_host"){g.host=c.host}g.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,e;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}e=c.toRelPath(c.path,b.path);if(b.query){e+="?"+b.query}if(b.anchor){e+="#"+b.anchor}return e},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host?c:0)},toRelPath:function(h,j){var c,g=0,e="",f,b;h=h.substring(0,h.lastIndexOf("/"));h=h.split("/");c=j.split("/");if(h.length>=c.length){for(f=0,b=h.length;f<b;f++){if(f>=c.length||h[f]!=c[f]){g=f+1;break}}}if(h.length<c.length){for(f=0,b=c.length;f<b;f++){if(f>=h.length||h[f]!=c[f]){g=f+1;break}}}if(g==1){return j}for(f=0,b=h.length-(g-1);f<b;f++){e+="../"}for(f=g-1,b=c.length;f<b;f++){if(f!=g-1){e+="/"+c[f]}else{e+=c[f]}}return e},toAbsPath:function(f,g){var c,b=0,h=[],e;e=/\/$/.test(g)?"/":"";f=f.split("/");g=g.split("/");a(f,function(i){if(i){h.push(i)}});f=h;for(c=g.length-1,h=[];c>=0;c--){if(g[c].length==0||g[c]=="."){continue}if(g[c]==".."){b++;continue}if(b>0){b--;continue}h.push(g[c])}c=f.length-b;if(c<=0){return"/"+h.reverse().join("/")+e}return"/"+f.slice(0,c).join("/")+"/"+h.reverse().join("/")+e},getURI:function(e){var c,b=this;if(!b.source||e){c="";if(!e){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var b=this.get(e),c;if(b){a(b.split("&"),function(f){f=f.split("=");c=c||{};c[unescape(f[0])]=unescape(f[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(l,e){h+=(!h?"":"&")+escape(e)+"="+escape(l)});this.set(j,h,g,f,i,c)},get:function(j){var i=document.cookie,h,g=j+"=",f;if(!i){return}f=i.indexOf("; "+g);if(f==-1){f=i.indexOf(g);if(f!=0){return null}}else{f+=2}h=i.indexOf(";",f);if(h==-1){h=i.length}return unescape(i.substring(f+g.length,h))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();tinymce.create("static tinymce.util.JSON",{serialize:function(f){var c,a,e=tinymce.util.JSON.serialize,b;if(f==null){return"null"}b=typeof f;if(b=="string"){a="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+f.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(h,g){c=a.indexOf(g);if(c+1){return"\\"+a.charAt(c+1)}h=g.charCodeAt().toString(16);return"\\u"+"0000".substring(h.length)+h})+'"'}if(b=="object"){if(f.hasOwnProperty&&f instanceof Array){for(c=0,a="[";c<f.length;c++){a+=(c>0?",":"")+e(f[c])}return a+"]"}a="{";for(c in f){a+=typeof f[c]!="function"?(a.length>1?',"':'"')+c+'":'+e(f[c]):""}return a+"}"}return""+f},parse:function(s){try{return eval("("+s+")")}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(h){var a,f,b=window,i=0;h.scope=h.scope||this;h.success_scope=h.success_scope||h.scope;h.error_scope=h.error_scope||h.scope;h.async=h.async===false?false:true;h.data=h.data||"";function e(j){a=0;try{a=new ActiveXObject(j)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():e("Microsoft.XMLHTTP")||e("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(h.content_type)}a.open(h.type||(h.data?"POST":"GET"),h.url,h.async);if(h.content_type){a.setRequestHeader("Content-Type",h.content_type)}a.send(h.data);function g(){if(!h.async||a.readyState==4||i++>10000){if(h.success&&i<10000&&a.status==200){h.success.call(h.success_scope,""+a.responseText,a,h)}else{if(h.error){h.error.call(h.error_scope,i>10000?"TIMED_OUT":"GENERAL",a,h)}}a=null}else{b.setTimeout(g,10)}}if(!h.async){return g()}f=b.setTimeout(g,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=c({},e);this.count=0},send:function(g){var f=g.error,e=g.success;g=c(this.settings,g);g.success=function(i,h){i=b.parse(i);if(typeof(i)=="undefined"){i={error:"JSON Parse error."}}if(i.error){f.call(g.error_scope||g.scope,i.error,h)}else{e.call(g.success_scope||g.scope,i.result)}};g.error=function(i,h){f.call(g.error_scope||g.scope,i,h)};g.data=b.serialize({id:g.id||"c"+(this.count++),method:g.method,params:g.params});g.content_type="application/json";a.send(g)},"static":{sendRPC:function(e){return new tinymce.util.JSONRequest().send(e)}}})}());(function(c){var f=c.each,b=c.is;var e=c.isWebKit,a=c.isIE;c.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(j,h){var g=this;g.doc=j;g.win=window;g.files={};g.cssFlicker=false;g.counter=0;g.boxModel=!c.isIE||j.compatMode=="CSS1Compat";g.stdMode=j.documentMode===8;g.settings=h=c.extend({keep_values:false,hex_colors:1,process_html:1},h);if(c.isIE6){try{j.execCommand("BackgroundImageCache",false,true)}catch(i){g.cssFlicker=true}}c.addUnload(g.destroy,g)},getRoot:function(){var g=this,h=g.settings;return(h&&g.get(h.root_element))||g.doc.body},getViewPort:function(h){var i,g;h=!h?this.win:h;i=h.document;g=this.boxModel?i.documentElement:i.body;return{x:h.pageXOffset||g.scrollLeft,y:h.pageYOffset||g.scrollTop,w:h.innerWidth||g.clientWidth,h:h.innerHeight||g.clientHeight}},getRect:function(j){var i,g=this,h;j=g.get(j);i=g.getPos(j);h=g.getSize(j);return{x:i.x,y:i.y,w:h.w,h:h.h}},getSize:function(k){var i=this,g,j;k=i.get(k);g=i.getStyle(k,"width");j=i.getStyle(k,"height");if(g.indexOf("px")===-1){g=0}if(j.indexOf("px")===-1){j=0}return{w:parseInt(g)||k.offsetWidth||k.clientWidth,h:parseInt(j)||k.offsetHeight||k.clientHeight}},getParent:function(i,h,g){return this.getParents(i,h,g,false)},getParents:function(p,k,i,m){var h=this,g,j=h.settings,l=[];p=h.get(p);m=m===undefined;if(j.strict_root){i=i||h.getRoot()}if(b(k,"string")){g=k;if(k==="*"){k=function(q){return q.nodeType==1}}else{k=function(q){return h.is(q,g)}}}while(p){if(p==i||!p.nodeType||p.nodeType===9){break}if(!k||k(p)){if(m){l.push(p)}else{return p}}p=p.parentNode}return m?l:null},get:function(g){var h;if(g&&this.doc&&typeof(g)=="string"){h=g;g=this.doc.getElementById(g);if(g&&g.id!==h){return this.doc.getElementsByName(h)[1]}}return g},select:function(i,h){var g=this;return c.dom.Sizzle(i,g.get(h)||g.get(g.settings.root_element)||g.doc,[])},is:function(h,g){return c.dom.Sizzle.matches(g,h.nodeType?[h]:h).length>0},add:function(k,m,g,j,l){var i=this;return this.run(k,function(q){var n,h;n=b(m,"string")?i.doc.createElement(m):m;i.setAttribs(n,g);if(j){if(j.nodeType){n.appendChild(j)}else{i.setHTML(n,j)}}return !l?q.appendChild(n):n})},create:function(j,g,i){return this.add(this.doc.createElement(j),j,g,i,1)},createHTML:function(p,g,l){var m="",j=this,i;m+="<"+p;for(i in g){if(g.hasOwnProperty(i)){m+=" "+i+'="'+j.encode(g[i])+'"'}}if(c.is(l)){return m+">"+l+"</"+p+">"}return m+" />"},remove:function(i,g){var h=this;return this.run(i,function(m){var l,k,j;l=m.parentNode;if(!l){return null}if(g){for(j=m.childNodes.length-1;j>=0;j--){h.insertAfter(m.childNodes[j],m)}}if(h.fixPsuedoLeaks){l=m.cloneNode(true);g="IELeakGarbageBin";k=h.get(g)||h.add(h.doc.body,"div",{id:g,style:"display:none"});k.appendChild(m);k.innerHTML="";return l}return l.removeChild(m)})},setStyle:function(j,g,h){var i=this;return i.run(j,function(m){var l,k;l=m.style;g=g.replace(/-(\D)/g,function(p,n){return n.toUpperCase()});if(i.pixelStyles.test(g)&&(c.is(h,"number")||/^[\-0-9\.]+$/.test(h))){h+="px"}switch(g){case"opacity":if(a){l.filter=h===""?"":"alpha(opacity="+(h*100)+")";if(!j.currentStyle||!j.currentStyle.hasLayout){l.display="inline-block"}}l[g]=l["-moz-opacity"]=l["-khtml-opacity"]=h||"";break;case"float":a?l.styleFloat=h:l.cssFloat=h;break;default:l[g]=h||""}if(i.settings.update_styles){i.setAttrib(m,"mce_style")}})},getStyle:function(j,g,i){j=this.get(j);if(!j){return false}if(this.doc.defaultView&&i){g=g.replace(/[A-Z]/g,function(k){return"-"+k});try{return this.doc.defaultView.getComputedStyle(j,null).getPropertyValue(g)}catch(h){return null}}g=g.replace(/-(\D)/g,function(l,k){return k.toUpperCase()});if(g=="float"){g=a?"styleFloat":"cssFloat"}if(j.currentStyle&&i){return j.currentStyle[g]}return j.style[g]},setStyles:function(j,k){var h=this,i=h.settings,g;g=i.update_styles;i.update_styles=0;f(k,function(l,m){h.setStyle(j,m,l)});i.update_styles=g;if(i.update_styles){h.setAttrib(j,i.cssText)}},setAttrib:function(i,j,g){var h=this;if(!i||!j){return}if(h.settings.strict){j=j.toLowerCase()}return this.run(i,function(l){var k=h.settings;switch(j){case"style":if(!b(g,"string")){f(g,function(m,p){h.setStyle(l,p,m)});return}if(k.keep_values){if(g&&!h._isRes(g)){l.setAttribute("mce_style",g,2)}else{l.removeAttribute("mce_style",2)}}l.style.cssText=g;break;case"class":l.className=g||"";break;case"src":case"href":if(k.keep_values){if(k.url_converter){g=k.url_converter.call(k.url_converter_scope||h,g,j,l)}h.setAttrib(l,"mce_"+j,g,2)}break;case"shape":l.setAttribute("mce_style",g);break}if(b(g)&&g!==null&&g.length!==0){l.setAttribute(j,""+g,2)}else{l.removeAttribute(j,2)}})},setAttribs:function(h,i){var g=this;return this.run(h,function(j){f(i,function(k,l){g.setAttrib(j,l,k)})})},getAttrib:function(j,k,i){var g,h=this;j=h.get(j);if(!j||j.nodeType!==1){return false}if(!b(i)){i=""}if(/^(src|href|style|coords|shape)$/.test(k)){g=j.getAttribute("mce_"+k);if(g){return g}}if(a&&h.props[k]){g=j[h.props[k]];g=g&&g.nodeValue?g.nodeValue:g}if(!g){g=j.getAttribute(k,2)}if(k==="style"){g=g||j.style.cssText;if(g){g=h.serializeStyle(h.parseStyle(g));if(h.settings.keep_values&&!h._isRes(g)){j.setAttribute("mce_style",g)}}}if(e&&k==="class"&&g){g=g.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(a){switch(k){case"rowspan":case"colspan":if(g===1){g=""}break;case"size":if(g==="+0"||g===20||g===0){g=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(g===0){g=""}break;case"hspace":if(g===-1){g=""}break;case"maxlength":case"tabindex":if(g===32768||g===2147483647||g==="32768"){g=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(g===65535){return k}return i;case"shape":g=g.toLowerCase();break;default:if(k.indexOf("on")===0&&g){g=(""+g).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}}}return(g!==undefined&&g!==null&&g!=="")?""+g:i},getPos:function(p,j){var h=this,g=0,m=0,k,l=h.doc,i;p=h.get(p);j=j||l.body;if(p){if(a&&!h.stdMode){p=p.getBoundingClientRect();k=h.boxModel?l.documentElement:l.body;g=h.getStyle(h.select("html")[0],"borderWidth");g=(g=="medium"||h.boxModel&&!h.isIE6)&&2||g;p.top+=h.win.self!=h.win.top?2:0;return{x:p.left+k.scrollLeft-g,y:p.top+k.scrollTop-g}}i=p;while(i&&i!=j&&i.nodeType){g+=i.offsetLeft||0;m+=i.offsetTop||0;i=i.offsetParent}i=p.parentNode;while(i&&i!=j&&i.nodeType){g-=i.scrollLeft||0;m-=i.scrollTop||0;i=i.parentNode}}return{x:g,y:m}},parseStyle:function(i){var j=this,k=j.settings,l={};if(!i){return l}function g(x,u,w){var q,v,m,n;q=l[x+"-top"+u];if(!q){return}v=l[x+"-right"+u];if(q!=v){return}m=l[x+"-bottom"+u];if(v!=m){return}n=l[x+"-left"+u];if(m!=n){return}l[w]=n;delete l[x+"-top"+u];delete l[x+"-right"+u];delete l[x+"-bottom"+u];delete l[x+"-left"+u]}function h(p,n,m,r){var q;q=l[n];if(!q){return}q=l[m];if(!q){return}q=l[r];if(!q){return}l[p]=l[n]+" "+l[m]+" "+l[r];delete l[n];delete l[m];delete l[r]}i=i.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");f(i.split(";"),function(n){var m,p=[];if(n){n=n.replace(/_MCE_SEMI_/g,";");n=n.replace(/url\([^\)]+\)/g,function(q){p.push(q);return"url("+p.length+")"});n=n.split(":");m=c.trim(n[1]);m=m.replace(/url\(([^\)]+)\)/g,function(r,q){return p[parseInt(q)-1]});m=m.replace(/rgb\([^\)]+\)/g,function(q){return j.toHex(q)});if(k.url_converter){m=m.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(q,r){return"url("+k.url_converter.call(k.url_converter_scope||j,j.decode(r),"style",null)+")"})}l[c.trim(n[0]).toLowerCase()]=m}});g("border","","border");g("border","-width","border-width");g("border","-color","border-color");g("border","-style","border-style");g("padding","","padding");g("margin","","margin");h("border","border-width","border-style","border-color");if(a){if(l.border=="medium none"){l.border=""}}return l},serializeStyle:function(h){var g="";f(h,function(j,i){if(i&&j){if(c.isGecko&&i.indexOf("-moz-")===0){return}switch(i){case"color":case"background-color":j=j.toLowerCase();break}g+=(g?" ":"")+i+": "+j+";"}});return g},loadCSS:function(g){var i=this,j=i.doc,h;if(!g){g=""}h=i.select("head")[0];f(g.split(","),function(k){var l;if(i.files[k]){return}i.files[k]=true;l=i.create("link",{rel:"stylesheet",href:c._addVer(k)});if(a&&j.documentMode){l.onload=function(){j.recalc();l.onload=null}}h.appendChild(l)})},addClass:function(g,h){return this.run(g,function(i){var j;if(!h){return 0}if(this.hasClass(i,h)){return i.className}j=this.removeClass(i,h);return i.className=(j!=""?(j+" "):"")+h})},removeClass:function(i,j){var g=this,h;return g.run(i,function(l){var k;if(g.hasClass(l,j)){if(!h){h=new RegExp("(^|\\s+)"+j+"(\\s+|$)","g")}k=l.className.replace(h," ");return l.className=c.trim(k!=" "?k:"")}return l.className})},hasClass:function(h,g){h=this.get(h);if(!h||!g){return false}return(" "+h.className+" ").indexOf(" "+g+" ")!==-1},show:function(g){return this.setStyle(g,"display","block")},hide:function(g){return this.setStyle(g,"display","none")},isHidden:function(g){g=this.get(g);return !g||g.style.display=="none"||this.getStyle(g,"display")=="none"},uniqueId:function(g){return(!g?"mce_":g)+(this.counter++)},setHTML:function(j,i){var g=this;return this.run(j,function(q){var h,l,k,s,m,h;i=g.processHTML(i);if(a){function r(){try{q.innerHTML="<br />"+i;q.removeChild(q.firstChild)}catch(n){while(q.firstChild){q.firstChild.removeNode()}h=g.create("div");h.innerHTML="<br />"+i;f(h.childNodes,function(t,p){if(p){q.appendChild(t)}})}}if(g.settings.fix_ie_paragraphs){i=i.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')}r();if(g.settings.fix_ie_paragraphs){k=q.getElementsByTagName("p");for(l=k.length-1,h=0;l>=0;l--){s=k[l];if(!s.hasChildNodes()){if(!s.mce_keep){h=1;break}s.removeAttribute("mce_keep")}}}if(h){i=i.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">');i=i.replace(/<\/p>/g,"</div>");r();if(g.settings.fix_ie_paragraphs){k=q.getElementsByTagName("DIV");for(l=k.length-1;l>=0;l--){s=k[l];if(s.mce_tmp){m=g.doc.createElement("p");s.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(p,n){var t;if(n!=="mce_tmp"){t=s.getAttribute(n);if(!t&&n==="class"){t=s.className}m.setAttribute(n,t)}});for(h=0;h<s.childNodes.length;h++){m.appendChild(s.childNodes[h].cloneNode(true))}s.swapNode(m)}}}}}else{q.innerHTML=i}return i})},processHTML:function(k){var i=this,j=i.settings;if(!j.process_html){return k}if(c.isGecko){k=k.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>");k=k.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")}else{if(a){k=k.replace(/&apos;/g,"&#39;");k=k.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}}k=k.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(j.keep_values){if(/<script|noscript|style/.test(k)){function g(h){h=h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");h=h.replace(/^[\r\n]*|[\r\n]*$/g,"");h=h.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");h=h.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return h}k=k.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(h,m,l){if(!m){m=' type="text/javascript"'}m=m.replace(/(type|language)=\"?/,"$&mce-");m=m.replace(/src=\"([^\"]+)\"?/,function(n,p){if(j.url_converter){p=i.encode(j.url_converter.call(j.url_converter_scope||i,i.decode(p),"src","script"))}return'mce_src="'+p+'"'});if(c.trim(l)){l="<!--\n"+g(l)+"\n// -->"}return"<mce:script"+m+">"+l+"</mce:script>"});k=k.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(h,m,l){if(l){l="<!--\n"+g(l)+"\n-->"}return"<mce:style"+m+">"+l+"</mce:style><style "+m+' mce_bogus="1">'+l+"</style>"});k=k.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(h,m,l){return"<mce:noscript"+m+"><!--"+i.encode(l).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})}k=k.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->");k=k.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(h,m){function l(p,n,r){var q=r;if(h.indexOf("mce_"+n)!=-1){return p}if(n=="style"){if(i._isRes(r)){return p}if(j.hex_colors){q=q.replace(/rgb\([^\)]+\)/g,function(s){return i.toHex(s)})}if(j.url_converter){q=q.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(s,t){return"url("+i.encode(j.url_converter.call(j.url_converter_scope||i,i.decode(t),n,m))+")"})}}else{if(n!="coords"&&n!="shape"){if(j.url_converter){q=i.encode(j.url_converter.call(j.url_converter_scope||i,i.decode(r),n,m))}}}return" "+n+'="'+r+'" mce_'+n+'="'+q+'"'}h=h.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,l);h=h.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,l);return h.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,l)})}return k},getOuterHTML:function(g){var h;g=this.get(g);if(!g){return null}if(g.outerHTML!==undefined){return g.outerHTML}h=(g.ownerDocument||this.doc).createElement("body");h.appendChild(g.cloneNode(true));return h.innerHTML},setOuterHTML:function(j,i,k){var g=this;return this.run(j,function(h){var m,l;h=g.get(h);k=k||h.ownerDocument||g.doc;if(a&&h.nodeType==1){h.outerHTML=i}else{l=k.createElement("body");l.innerHTML=i;m=l.lastChild;while(m){g.insertAfter(m.cloneNode(true),h);m=m.previousSibling}g.remove(h)}})},decode:function(h){var i,j,g;if(/&[^;]+;/.test(h)){i=this.doc.createElement("div");i.innerHTML=h;j=i.firstChild;g="";if(j){do{g+=j.nodeValue}while(j.nextSibling)}return g||h}return h},encode:function(g){return g?(""+g).replace(/[<>&\"]/g,function(i,h){switch(i){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return i}):g},insertAfter:function(i,h){var g=this;h=g.get(h);return this.run(i,function(l){var k,j;k=h.parentNode;j=h.nextSibling;if(j){k.insertBefore(l,j)}else{k.appendChild(l)}return l})},isBlock:function(g){if(g.nodeType&&g.nodeType!==1){return false}g=g.nodeName||g;return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TR|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(g)},replace:function(j,i,g){var h=this;if(b(i,"array")){j=j.cloneNode(true)}return h.run(i,function(k){if(g){f(k.childNodes,function(l){j.appendChild(l.cloneNode(true))})}if(h.fixPsuedoLeaks&&k.nodeType===1){k.parentNode.insertBefore(j,k);h.remove(k);return j}return k.parentNode.replaceChild(j,k)})},findCommonAncestor:function(i,g){var j=i,h;while(j){h=g;while(h&&j!=h){h=h.parentNode}if(j==h){break}j=j.parentNode}if(!j&&i.ownerDocument){return i.ownerDocument.documentElement}return j},toHex:function(g){var i=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(g);function h(j){j=parseInt(j).toString(16);return j.length>1?j:"0"+j}if(i){g="#"+h(i[1])+h(i[2])+h(i[3]);return g}return g},getClasses:function(){var l=this,g=[],k,m={},n=l.settings.class_filter,j;if(l.classes){return l.classes}function p(i){f(i.imports,function(q){p(q)});f(i.cssRules||i.rules,function(q){switch(q.type||1){case 1:if(q.selectorText){f(q.selectorText.split(","),function(r){r=r.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(r)||!/\.[\w\-]+$/.test(r)){return}j=r;r=r.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(n&&!(r=n(r,j))){return}if(!m[r]){g.push({"class":r});m[r]=1}})}break;case 3:p(q.styleSheet);break}})}try{f(l.doc.styleSheets,p)}catch(h){}if(g.length>0){l.classes=g}return g},run:function(j,i,h){var g=this,k;if(g.doc&&typeof(j)==="string"){j=g.get(j)}if(!j){return false}h=h||this;if(!j.nodeType&&(j.length||j.length===0)){k=[];f(j,function(m,l){if(m){if(typeof(m)=="string"){m=g.doc.getElementById(m)}k.push(i.call(h,m,l))}});return k}return i.call(h,j)},getAttribs:function(h){var g;h=this.get(h);if(!h){return[]}if(a){g=[];if(h.nodeName=="OBJECT"){return h.attributes}h.cloneNode(false).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(j,i){g.push({specified:1,nodeName:i})});return g}return h.attributes},destroy:function(h){var g=this;if(g.events){g.events.destroy()}g.win=g.doc=g.root=g.events=null;if(!h){c.removeUnload(g.destroy)}},createRng:function(){var g=this.doc;return g.createRange?g.createRange():new c.dom.Range(this)},split:function(l,k,p){var q=this,g=q.createRng(),m,j,n;function h(s,r){s=s[r];if(s&&s[r]&&s[r].nodeType==1&&i(s[r])){q.remove(s[r])}}function i(r){r=q.getOuterHTML(r);r=r.replace(/<(img|hr|table)/gi,"-");r=r.replace(/<[^>]+>/g,"");return r.replace(/[ \t\r\n]+|&nbsp;|&#160;/g,"")==""}if(l&&k){g.setStartBefore(l);g.setEndBefore(k);m=g.extractContents();g=q.createRng();g.setStartAfter(k);g.setEndAfter(l);j=g.extractContents();n=l.parentNode;h(m,"lastChild");if(!i(m)){n.insertBefore(m,l)}if(p){n.replaceChild(p,k)}else{n.insertBefore(k,l)}h(j,"firstChild");if(!i(j)){n.insertBefore(j,l)}q.remove(l);return p||k}},bind:function(k,g,j,i){var h=this;if(!h.events){h.events=new c.dom.EventUtils()}return h.events.add(k,g,j,i||this)},unbind:function(j,g,i){var h=this;if(!h.events){h.events=new c.dom.EventUtils()}return h.events.remove(j,g,i)},_isRes:function(g){return/^(top|left|bottom|right|width|height)/i.test(g)||/;\s*(top|left|bottom|right|width|height)/i.test(g)}});c.DOM=new c.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(g){var i=0,c=1,f=2,e=tinymce.extend;function h(n,l){var k,m;if(n.parentNode!=l){return -1}for(m=l.firstChild,k=0;m!=n;m=m.nextSibling){k++}return k}function b(l){var k=0;while(l.previousSibling){k++;l=l.previousSibling}return k}function j(k,l){var m;if(k.nodeType==3){return k}if(l<0){return k}m=k.firstChild;while(m!=null&&l>0){--l;m=m.nextSibling}if(m!=null){return m}return k}function a(l){var k=l.doc;e(this,{dom:l,startContainer:k,startOffset:0,endContainer:k,endOffset:0,collapsed:true,commonAncestorContainer:k,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3})}e(a.prototype,{setStart:function(l,k){this._setEndPoint(true,l,k)},setEnd:function(l,k){this._setEndPoint(false,l,k)},setStartBefore:function(k){this.setStart(k.parentNode,b(k))},setStartAfter:function(k){this.setStart(k.parentNode,b(k)+1)},setEndBefore:function(k){this.setEnd(k.parentNode,b(k))},setEndAfter:function(k){this.setEnd(k.parentNode,b(k)+1)},collapse:function(l){var k=this;if(l){k.endContainer=k.startContainer;k.endOffset=k.startOffset}else{k.startContainer=k.endContainer;k.startOffset=k.endOffset}k.collapsed=true},selectNode:function(k){this.setStartBefore(k);this.setEndAfter(k)},selectNodeContents:function(k){this.setStart(k,0);this.setEnd(k,k.nodeType===1?k.childNodes.length:k.nodeValue.length)},compareBoundaryPoints:function(n,p){var m=this,s=m.startContainer,q=m.startOffset,l=m.endContainer,k=m.endOffset;if(n===0){return m._compareBoundaryPoints(s,q,s,q)}if(n===1){return m._compareBoundaryPoints(s,q,l,k)}if(n===2){return m._compareBoundaryPoints(l,k,l,k)}if(n===3){return m._compareBoundaryPoints(l,k,s,q)}},deleteContents:function(){this._traverse(f)},extractContents:function(){return this._traverse(i)},cloneContents:function(){return this._traverse(c)},insertNode:function(p){var k=this,m,l;if(p.nodeType===3||p.nodeType===4){m=k.startContainer.splitText(k.startOffset);k.startContainer.parentNode.insertBefore(p,m)}else{if(k.startContainer.childNodes.length>0){l=k.startContainer.childNodes[k.startOffset]}k.startContainer.insertBefore(p,l)}},surroundContents:function(m){var k=this,l=k.extractContents();k.insertNode(m);m.appendChild(l);k.selectNode(m)},cloneRange:function(){var k=this;return e(new a(k.dom),{startContainer:k.startContainer,startOffset:k.startOffset,endContainer:k.endContainer,endOffset:k.endOffset,collapsed:k.collapsed,commonAncestorContainer:k.commonAncestorContainer})},_isCollapsed:function(){return(this.startContainer==this.endContainer&&this.startOffset==this.endOffset)},_compareBoundaryPoints:function(p,r,l,q){var s,m,k,t,v,u;if(p==l){if(r==q){return 0}else{if(r<q){return -1}else{return 1}}}s=l;while(s&&s.parentNode!=p){s=s.parentNode}if(s){m=0;k=p.firstChild;while(k!=s&&m<r){m++;k=k.nextSibling}if(r<=m){return -1}else{return 1}}s=p;while(s&&s.parentNode!=l){s=s.parentNode}if(s){m=0;k=l.firstChild;while(k!=s&&m<q){m++;k=k.nextSibling}if(m<q){return -1}else{return 1}}t=this.dom.findCommonAncestor(p,l);v=p;while(v&&v.parentNode!=t){v=v.parentNode}if(!v){v=t}u=l;while(u&&u.parentNode!=t){u=u.parentNode}if(!u){u=t}if(v==u){return 0}k=t.firstChild;while(k){if(k==v){return -1}if(k==u){return 1}k=k.nextSibling}},_setEndPoint:function(l,r,q){var m=this,k,p;if(l){m.startContainer=r;m.startOffset=q}else{m.endContainer=r;m.endOffset=q}k=m.endContainer;while(k.parentNode){k=k.parentNode}p=m.startContainer;while(p.parentNode){p=p.parentNode}if(p!=k){m.collapse(l)}else{if(m._compareBoundaryPoints(m.startContainer,m.startOffset,m.endContainer,m.endOffset)>0){m.collapse(l)}}m.collapsed=m._isCollapsed();m.commonAncestorContainer=m.dom.findCommonAncestor(m.startContainer,m.endContainer)},_traverse:function(u){var v=this,s,n=0,x=0,l,r,m,q,k,w;if(v.startContainer==v.endContainer){return v._traverseSameContainer(u)}for(s=v.endContainer,l=s.parentNode;l!=null;s=l,l=l.parentNode){if(l==v.startContainer){return v._traverseCommonStartContainer(s,u)}++n}for(s=v.startContainer,l=s.parentNode;l!=null;s=l,l=l.parentNode){if(l==v.endContainer){return v._traverseCommonEndContainer(s,u)}++x}r=x-n;m=v.startContainer;while(r>0){m=m.parentNode;r--}q=v.endContainer;while(r<0){q=q.parentNode;r++}for(k=m.parentNode,w=q.parentNode;k!=w;k=k.parentNode,w=w.parentNode){m=k;q=w}return v._traverseCommonAncestors(m,q,u)},_traverseSameContainer:function(q){var v=this,u,w,k,l,m,r,p;if(q!=f){u=v.dom.doc.createDocumentFragment()}if(v.startOffset==v.endOffset){return u}if(v.startContainer.nodeType==3){w=v.startContainer.nodeValue;k=w.substring(v.startOffset,v.endOffset);if(q!=c){v.startContainer.deleteData(v.startOffset,v.endOffset-v.startOffset);v.collapse(true)}if(q==f){return null}u.appendChild(v.dom.doc.createTextNode(k));return u}l=j(v.startContainer,v.startOffset);m=v.endOffset-v.startOffset;while(m>0){r=l.nextSibling;p=v._traverseFullySelected(l,q);if(u){u.appendChild(p)}--m;l=r}if(q!=c){v.collapse(true)}return u},_traverseCommonStartContainer:function(k,r){var v=this,u,l,m,p,s,q;if(r!=f){u=v.dom.doc.createDocumentFragment()}l=v._traverseRightBoundary(k,r);if(u){u.appendChild(l)}m=h(k,v.startContainer);p=m-v.startOffset;if(p<=0){if(r!=c){v.setEndBefore(k);v.collapse(false)}return u}l=k.previousSibling;while(p>0){s=l.previousSibling;q=v._traverseFullySelected(l,r);if(u){u.insertBefore(q,u.firstChild)}--p;l=s}if(r!=c){v.setEndBefore(k);v.collapse(false)}return u},_traverseCommonEndContainer:function(p,r){var v=this,u,q,k,l,s,m;if(r!=f){u=v.dom.doc.createDocumentFragment()}k=v._traverseLeftBoundary(p,r);if(u){u.appendChild(k)}q=h(p,v.endContainer);++q;l=v.endOffset-q;k=p.nextSibling;while(l>0){s=k.nextSibling;m=v._traverseFullySelected(k,r);if(u){u.appendChild(m)}--l;k=s}if(r!=c){v.setStartAfter(p);v.collapse(true)}return u},_traverseCommonAncestors:function(r,k,v){var y=this,m,x,q,s,u,l,w,p;if(v!=f){x=y.dom.doc.createDocumentFragment()}m=y._traverseLeftBoundary(r,v);if(x){x.appendChild(m)}q=r.parentNode;s=h(r,q);u=h(k,q);++s;l=u-s;w=r.nextSibling;while(l>0){p=w.nextSibling;m=y._traverseFullySelected(w,v);if(x){x.appendChild(m)}w=p;--l}m=y._traverseRightBoundary(k,v);if(x){x.appendChild(m)}if(v!=c){y.setStartAfter(r);y.collapse(true)}return x},_traverseRightBoundary:function(r,s){var v=this,m=j(v.endContainer,v.endOffset-1),u,q,p,k,l;var n=m!=v.endContainer;if(m==r){return v._traverseNode(m,n,false,s)}u=m.parentNode;q=v._traverseNode(u,false,false,s);while(u!=null){while(m!=null){p=m.previousSibling;k=v._traverseNode(m,n,false,s);if(s!=f){q.insertBefore(k,q.firstChild)}n=true;m=p}if(u==r){return q}m=u.previousSibling;u=u.parentNode;l=v._traverseNode(u,false,false,s);if(s!=f){l.appendChild(q)}q=l}return null},_traverseLeftBoundary:function(r,s){var v=this,n=j(v.startContainer,v.startOffset);var p=n!=v.startContainer,u,q,m,k,l;if(n==r){return v._traverseNode(n,p,true,s)}u=n.parentNode;q=v._traverseNode(u,false,true,s);while(u!=null){while(n!=null){m=n.nextSibling;k=v._traverseNode(n,p,true,s);if(s!=f){q.appendChild(k)}p=true;n=m}if(u==r){return q}n=u.nextSibling;u=u.parentNode;l=v._traverseNode(u,false,true,s);if(s!=f){l.appendChild(q)}q=l}return null},_traverseNode:function(k,q,u,v){var w=this,p,m,r,l,s;if(q){return w._traverseFullySelected(k,v)}if(k.nodeType==3){p=k.nodeValue;if(u){l=w.startOffset;m=p.substring(l);r=p.substring(0,l)}else{l=w.endOffset;m=p.substring(0,l);r=p.substring(l)}if(v!=c){k.nodeValue=r}if(v==f){return null}s=k.cloneNode(false);s.nodeValue=m;return s}if(v==f){return null}return k.cloneNode(false)},_traverseFullySelected:function(m,l){var k=this;if(l!=f){return l==c?m.cloneNode(true):m}m.parentNode.removeChild(m);return null}});g.Range=a})(tinymce.dom);(function(){function a(f){var e=this,i="\uFEFF",b,h;function c(k,j){if(k&&j){if(k.item&&j.item&&k.item(0)===j.item(0)){return 1}if(k.isEqual&&j.isEqual&&j.isEqual(k)){return 1}}return 0}function g(){var n=f.dom,k=f.getRng(),u=n.createRng(),r,l,p,s,q,m;function j(x){var v=x.parentNode.childNodes,w;for(w=v.length-1;w>=0;w--){if(v[w]==x){return w}}return -1}function t(x){var v=k.duplicate(),D,A,w,y,z=0,B=0,C,E;v.collapse(x);D=v.parentElement();v.pasteHTML(i);w=D.childNodes;for(A=0;A<w.length;A++){y=w[A];if(A>0&&(y.nodeType!==3||w[A-1].nodeType!==3)){B++}if(y.nodeType===3){C=y.nodeValue.indexOf(i);if(C!==-1){z+=C;break}z+=y.nodeValue.length}else{z=0}}v.moveStart("character",-1);v.text="";return{index:B,offset:z,parent:D}}p=k.item?k.item(0):k.parentElement();if(p.ownerDocument!=n.doc){return u}if(k.item||!p.hasChildNodes()){u.setStart(p.parentNode,j(p));u.setEnd(u.startContainer,u.startOffset+1);return u}m=f.isCollapsed();r=t(true);l=t(false);r.parent.normalize();l.parent.normalize();s=r.parent.childNodes[Math.min(r.index,r.parent.childNodes.length-1)];if(s.nodeType!=3){u.setStart(r.parent,r.index)}else{u.setStart(r.parent.childNodes[r.index],r.offset)}q=l.parent.childNodes[Math.min(l.index,l.parent.childNodes.length-1)];if(q.nodeType!=3){if(!m){l.index++}u.setEnd(l.parent,l.index)}else{u.setEnd(l.parent.childNodes[l.index],l.offset)}if(!m){s=u.startContainer;if(s.nodeType==1){u.setStart(s,Math.min(u.startOffset,s.childNodes.length))}q=u.endContainer;if(q.nodeType==1){u.setEnd(q,Math.min(u.endOffset,q.childNodes.length))}}e.addRange(u);return u}this.addRange=function(k){var q,n=f.dom.doc.body,r,l,s,m,p,j;s=k.startContainer;m=k.startOffset;p=k.endContainer;j=k.endOffset;q=n.createTextRange();s=s.nodeType==1?s.childNodes[Math.min(m,s.childNodes.length-1)]:s;p=p.nodeType==1?p.childNodes[Math.min(m==j?j:j-1,p.childNodes.length-1)]:p;if(s==p&&s.nodeType==1){if(/^(IMG|TABLE)$/.test(s.nodeName)&&m!=j){q=n.createControlRange();q.addElement(s)}else{q=n.createTextRange();if(!s.hasChildNodes()&&s.canHaveHTML){s.innerHTML=i}q.moveToElementText(s);if(s.innerHTML==i){q.collapse(true);s.removeChild(s.firstChild)}}if(m==j){q.collapse(j<=k.endContainer.childNodes.length-1)}q.select();return}function t(v,x){var w,u,y;if(v.nodeType!=3){return -1}w=v.nodeValue;u=n.createTextRange();v.nodeValue=w.substring(0,x)+i+w.substring(x);u.moveToElementText(v.parentNode);u.findText(i);y=Math.abs(u.moveStart("character",-1048575));v.nodeValue=w;return y}if(k.collapsed){pos=t(s,m);q=n.createTextRange();q.move("character",pos);q.select();return}else{if(s==p&&s.nodeType==3){r=t(s,m);q.move("character",r);q.moveEnd("character",j-m);q.select();return}r=t(s,m);l=t(p,j);q=n.createTextRange();if(r==-1){q.moveToElementText(s);r=0}else{q.move("character",r)}tmpRng=n.createTextRange();if(l==-1){tmpRng.moveToElementText(p)}else{tmpRng.move("character",l)}q.setEndPoint("EndToEnd",tmpRng);q.select();return}};this.getRangeAt=function(){if(!b||!c(h,f.getRng())){b=g();h=f.getRng()}return b};this.destroy=function(){h=b=null}}tinymce.dom.TridentSelection=a})();(function(){var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,j=0,f=Object.prototype.toString,p=false;var b=function(F,v,C,x){C=C||[];var e=v=v||document;if(v.nodeType!==1&&v.nodeType!==9){return[]}if(!F||typeof F!=="string"){return C}var D=[],E,A,I,H,B,u,t=true,y=q(v);r.lastIndex=0;while((E=r.exec(F))!==null){D.push(E[1]);if(E[2]){u=RegExp.rightContext;break}}if(D.length>1&&k.exec(F)){if(D.length===2&&g.relative[D[0]]){A=h(D[0]+D[1],v)}else{A=g.relative[D[0]]?[v]:b(D.shift(),v);while(D.length){F=D.shift();if(g.relative[F]){F+=D.shift()}A=h(F,A)}}}else{if(!x&&D.length>1&&v.nodeType===9&&!y&&g.match.ID.test(D[0])&&!g.match.ID.test(D[D.length-1])){var J=b.find(D.shift(),v,y);v=J.expr?b.filter(J.expr,J.set)[0]:J.set[0]}if(v){var J=x?{expr:D.pop(),set:a(x)}:b.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&v.parentNode?v.parentNode:v,y);A=J.expr?b.filter(J.expr,J.set):J.set;if(D.length>0){I=a(A)}else{t=false}while(D.length){var w=D.pop(),z=w;if(!g.relative[w]){w=""}else{z=D.pop()}if(z==null){z=v}g.relative[w](I,z,y)}}else{I=D=[]}}if(!I){I=A}if(!I){throw"Syntax error, unrecognized expression: "+(w||F)}if(f.call(I)==="[object Array]"){if(!t){C.push.apply(C,I)}else{if(v&&v.nodeType===1){for(var G=0;I[G]!=null;G++){if(I[G]&&(I[G]===true||I[G].nodeType===1&&i(v,I[G]))){C.push(A[G])}}}else{for(var G=0;I[G]!=null;G++){if(I[G]&&I[G].nodeType===1){C.push(A[G])}}}}}else{a(I,C)}if(u){b(u,e,C,x);b.uniqueSort(C)}return C};b.uniqueSort=function(t){if(c){p=false;t.sort(c);if(p){for(var e=1;e<t.length;e++){if(t[e]===t[e-1]){t.splice(e--,1)}}}}};b.matches=function(e,t){return b(e,null,null,t)};b.find=function(z,e,A){var y,w;if(!z){return[]}for(var v=0,u=g.order.length;v<u;v++){var x=g.order[v],w;if((w=g.match[x].exec(z))){var t=RegExp.leftContext;if(t.substr(t.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");y=g.find[x](w,e,A);if(y!=null){z=z.replace(g.match[x],"");break}}}}if(!y){y=e.getElementsByTagName("*")}return{set:y,expr:z}};b.filter=function(C,B,F,v){var u=C,H=[],z=B,x,e,y=B&&B[0]&&q(B[0]);while(C&&B.length){for(var A in g.filter){if((x=g.match[A].exec(C))!=null){var t=g.filter[A],G,E;e=false;if(z==H){H=[]}if(g.preFilter[A]){x=g.preFilter[A](x,z,F,H,v,y);if(!x){e=G=true}else{if(x===true){continue}}}if(x){for(var w=0;(E=z[w])!=null;w++){if(E){G=t(E,x,w,z);var D=v^!!G;if(F&&G!=null){if(D){e=true}else{z[w]=false}}else{if(D){H.push(E);e=true}}}}}if(G!==undefined){if(!F){z=H}C=C.replace(g.match[A],"");if(!e){return[]}break}}}if(C==u){if(e==null){throw"Syntax error, unrecognized expression: "+C}else{break}}u=C}return z};var g=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(z,e,y){var w=typeof e==="string",A=w&&!/\W/.test(e),x=w&&!A;if(A&&!y){e=e.toUpperCase()}for(var v=0,u=z.length,t;v<u;v++){if((t=z[v])){while((t=t.previousSibling)&&t.nodeType!==1){}z[v]=x||t&&t.nodeName===e?t||false:t===e}}if(x){b.filter(e,z,true)}},">":function(y,t,z){var w=typeof t==="string";if(w&&!/\W/.test(t)){t=z?t:t.toUpperCase();for(var u=0,e=y.length;u<e;u++){var x=y[u];if(x){var v=x.parentNode;y[u]=v.nodeName===t?v:false}}}else{for(var u=0,e=y.length;u<e;u++){var x=y[u];if(x){y[u]=w?x.parentNode:x.parentNode===t}}if(w){b.filter(t,y,true)}}},"":function(v,t,x){var u=j++,e=s;if(!t.match(/\W/)){var w=t=x?t:t.toUpperCase();e=n}e("parentNode",t,u,v,w,x)},"~":function(v,t,x){var u=j++,e=s;if(typeof t==="string"&&!t.match(/\W/)){var w=t=x?t:t.toUpperCase();e=n}e("previousSibling",t,u,v,w,x)}},find:{ID:function(t,u,v){if(typeof u.getElementById!=="undefined"&&!v){var e=u.getElementById(t[1]);return e?[e]:[]}},NAME:function(u,x,y){if(typeof x.getElementsByName!=="undefined"){var t=[],w=x.getElementsByName(u[1]);for(var v=0,e=w.length;v<e;v++){if(w[v].getAttribute("name")===u[1]){t.push(w[v])}}return t.length===0?null:t}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(v,t,u,e,y,z){v=" "+v[1].replace(/\\/g,"")+" ";if(z){return v}for(var w=0,x;(x=t[w])!=null;w++){if(x){if(y^(x.className&&(" "+x.className+" ").indexOf(v)>=0)){if(!u){e.push(x)}}else{if(u){t[w]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(t,e){for(var u=0;e[u]===false;u++){}return e[u]&&q(e[u])?t[1]:t[1].toUpperCase()},CHILD:function(e){if(e[1]=="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]=="even"&&"2n"||e[2]=="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(t[1]+(t[2]||1))-0;e[3]=t[3]-0}e[0]=j++;return e},ATTR:function(w,t,u,e,x,y){var v=w[1].replace(/\\/g,"");if(!y&&g.attrMap[v]){w[1]=g.attrMap[v]}if(w[2]==="~="){w[4]=" "+w[4]+" "}return w},PSEUDO:function(w,t,u,e,x){if(w[1]==="not"){if(w[3].match(r).length>1||/^\w/.test(w[3])){w[3]=b(w[3],null,null,t)}else{var v=b.filter(w[3],t,u,true^x);if(!u){e.push.apply(e,v)}return false}}else{if(g.match.POS.test(w[0])||g.match.CHILD.test(w[0])){return true}}return w},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(u,t,e){return !!b(e[3],u).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toUpperCase()==="BUTTON"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(t,e){return e===0},last:function(u,t,e,v){return t===v.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(u,t,e){return t<e[3]-0},gt:function(u,t,e){return t>e[3]-0},nth:function(u,t,e){return e[3]-0==t},eq:function(u,t,e){return e[3]-0==t}},filter:{PSEUDO:function(y,u,v,z){var t=u[1],w=g.filters[t];if(w){return w(y,v,u,z)}else{if(t==="contains"){return(y.textContent||y.innerText||"").indexOf(u[3])>=0}else{if(t==="not"){var x=u[3];for(var v=0,e=x.length;v<e;v++){if(x[v]===y){return false}}return true}}}},CHILD:function(e,v){var y=v[1],t=e;switch(y){case"only":case"first":while(t=t.previousSibling){if(t.nodeType===1){return false}}if(y=="first"){return true}t=e;case"last":while(t=t.nextSibling){if(t.nodeType===1){return false}}return true;case"nth":var u=v[2],B=v[3];if(u==1&&B==0){return true}var x=v[0],A=e.parentNode;if(A&&(A.sizcache!==x||!e.nodeIndex)){var w=0;for(t=A.firstChild;t;t=t.nextSibling){if(t.nodeType===1){t.nodeIndex=++w}}A.sizcache=x}var z=e.nodeIndex-B;if(u==0){return z==0}else{return(z%u==0&&z/u>=0)}}},ID:function(t,e){return t.nodeType===1&&t.getAttribute("id")===e},TAG:function(t,e){return(e==="*"&&t.nodeType===1)||t.nodeName===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(x,v){var u=v[1],e=g.attrHandle[u]?g.attrHandle[u](x):x[u]!=null?x[u]:x.getAttribute(u),y=e+"",w=v[2],t=v[4];return e==null?w==="!=":w==="="?y===t:w==="*="?y.indexOf(t)>=0:w==="~="?(" "+y+" ").indexOf(t)>=0:!t?y&&e!==false:w==="!="?y!=t:w==="^="?y.indexOf(t)===0:w==="$="?y.substr(y.length-t.length)===t:w==="|="?y===t||y.substr(0,t.length+1)===t+"-":false},POS:function(w,t,u,x){var e=t[2],v=g.setFilters[e];if(v){return v(w,u,t,x)}}}};var k=g.match.POS;for(var m in g.match){g.match[m]=new RegExp(g.match[m].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var a=function(t,e){t=Array.prototype.slice.call(t);if(e){e.push.apply(e,t);return e}return t};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(l){a=function(w,v){var t=v||[];if(f.call(w)==="[object Array]"){Array.prototype.push.apply(t,w)}else{if(typeof w.length==="number"){for(var u=0,e=w.length;u<e;u++){t.push(w[u])}}else{for(var u=0;w[u];u++){t.push(w[u])}}}return t}}var c;if(document.documentElement.compareDocumentPosition){c=function(t,e){var u=t.compareDocumentPosition(e)&4?-1:t===e?0:1;if(u===0){p=true}return u}}else{if("sourceIndex" in document.documentElement){c=function(t,e){var u=t.sourceIndex-e.sourceIndex;if(u===0){p=true}return u}}else{if(document.createRange){c=function(v,t){var u=v.ownerDocument.createRange(),e=t.ownerDocument.createRange();u.setStart(v,0);u.setEnd(v,0);e.setStart(t,0);e.setEnd(t,0);var w=u.compareBoundaryPoints(Range.START_TO_END,e);if(w===0){p=true}return w}}}}(function(){var t=document.createElement("div"),u="script"+(new Date).getTime();t.innerHTML="<a name='"+u+"'/>";var e=document.documentElement;e.insertBefore(t,e.firstChild);if(!!document.getElementById(u)){g.find.ID=function(w,x,y){if(typeof x.getElementById!=="undefined"&&!y){var v=x.getElementById(w[1]);return v?v.id===w[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===w[1]?[v]:undefined:[]}};g.filter.ID=function(x,v){var w=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&w&&w.nodeValue===v}}e.removeChild(t)})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){g.find.TAG=function(t,x){var w=x.getElementsByTagName(t[1]);if(t[1]==="*"){var v=[];for(var u=0;w[u];u++){if(w[u].nodeType===1){v.push(w[u])}}w=v}return w}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){g.attrHandle.href=function(t){return t.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var e=b,u=document.createElement("div");u.innerHTML="<p class='TEST'></p>";if(u.querySelectorAll&&u.querySelectorAll(".TEST").length===0){return}b=function(y,x,v,w){x=x||document;if(!w&&x.nodeType===9&&!q(x)){try{return a(x.querySelectorAll(y),v)}catch(z){}}return e(y,x,v,w)};for(var t in e){b[t]=e[t]}})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}g.order.splice(1,0,"CLASS");g.find.CLASS=function(t,u,v){if(typeof u.getElementsByClassName!=="undefined"&&!v){return u.getElementsByClassName(t[1])}}})()}function n(t,y,x,C,z,B){var A=t=="previousSibling"&&!B;for(var v=0,u=C.length;v<u;v++){var e=C[v];if(e){if(A&&e.nodeType===1){e.sizcache=x;e.sizset=v}e=e[t];var w=false;while(e){if(e.sizcache===x){w=C[e.sizset];break}if(e.nodeType===1&&!B){e.sizcache=x;e.sizset=v}if(e.nodeName===y){w=e;break}e=e[t]}C[v]=w}}}function s(t,y,x,C,z,B){var A=t=="previousSibling"&&!B;for(var v=0,u=C.length;v<u;v++){var e=C[v];if(e){if(A&&e.nodeType===1){e.sizcache=x;e.sizset=v}e=e[t];var w=false;while(e){if(e.sizcache===x){w=C[e.sizset];break}if(e.nodeType===1){if(!B){e.sizcache=x;e.sizset=v}if(typeof y!=="string"){if(e===y){w=true;break}}else{if(b.filter(y,[e]).length>0){w=e;break}}}e=e[t]}C[v]=w}}}var i=document.compareDocumentPosition?function(t,e){return t.compareDocumentPosition(e)&16}:function(t,e){return t!==e&&(t.contains?t.contains(e):true)};var q=function(e){return e.nodeType===9&&e.documentElement.nodeName!=="HTML"||!!e.ownerDocument&&e.ownerDocument.documentElement.nodeName!=="HTML"};var h=function(e,z){var v=[],w="",x,u=z.nodeType?[z]:z;while((x=g.match.PSEUDO.exec(e))){w+=x[0];e=e.replace(g.match.PSEUDO,"")}e=g.relative[e]?e+"*":e;for(var y=0,t=u.length;y<t;y++){b(e,u[y],v)}return b.filter(w,v)};window.tinymce.dom.Sizzle=b})();(function(e){var g=e.each,c=e.DOM,b=e.isIE,f=e.isWebKit,a;e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(p,q,m,k){var h,i=this,j=i.events,l;if(q instanceof Array){l=[];g(q,function(r){l.push(i.add(p,r,m,k))});return l}if(p&&p.hasOwnProperty&&p instanceof Array){l=[];g(p,function(n){n=c.get(n);l.push(i.add(n,q,m,k))});return l}p=c.get(p);if(!p){return}h=function(n){if(i.disabled){return}n=n||window.event;if(n&&b){if(!n.target){n.target=n.srcElement}e.extend(n,i._stoppers)}if(!k){return m(n)}return m.call(k,n)};if(q=="unload"){e.unloads.unshift({func:h});return h}if(q=="init"){if(i.domLoaded){h()}else{i.inits.push(h)}return h}j.push({obj:p,name:q,func:m,cfunc:h,scope:k});i._add(p,q,h);return m},remove:function(m,p,l){var i=this,h=i.events,j=false,k;if(m&&m.hasOwnProperty&&m instanceof Array){k=[];g(m,function(n){n=c.get(n);k.push(i.remove(n,p,l))});return k}m=c.get(m);g(h,function(q,n){if(q.obj==m&&q.name==p&&(!l||(q.func==l||q.cfunc==l))){h.splice(n,1);i._remove(m,p,q.cfunc);j=true;return false}});return j},clear:function(m){var k=this,h=k.events,j,l;if(m){m=c.get(m);for(j=h.length-1;j>=0;j--){l=h[j];if(l.obj===m){k._remove(l.obj,l.name,l.cfunc);l.obj=l.cfunc=null;h.splice(j,1)}}}},cancel:function(h){if(!h){return false}this.stop(h);return this.prevent(h)},stop:function(h){if(h.stopPropagation){h.stopPropagation()}else{h.cancelBubble=true}return false},prevent:function(h){if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false},destroy:function(){var h=this;g(h.events,function(k,j){h._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null});h.events=[];h=null},_add:function(i,j,h){if(i.attachEvent){i.attachEvent("on"+j,h)}else{if(i.addEventListener){i.addEventListener(j,h,false)}else{i["on"+j]=h}}},_remove:function(j,k,i){if(j){try{if(j.detachEvent){j.detachEvent("on"+k,i)}else{if(j.removeEventListener){j.removeEventListener(k,i,false)}else{j["on"+k]=null}}}catch(h){}}},_pageInit:function(i){var h=this;if(h.domLoaded){return}h.domLoaded=true;g(h.inits,function(j){j()});h.inits=[]},_wait:function(j){var h=this,i=j.document;if(j.tinyMCE_GZ&&tinyMCE_GZ.loaded){h.domLoaded=1;return}if(i.attachEvent){i.attachEvent("onreadystatechange",function(){if(i.readyState==="complete"){i.detachEvent("onreadystatechange",arguments.callee);h._pageInit(j)}});if(i.documentElement.doScroll&&j==j.top){(function(){if(h.domLoaded){return}try{i.documentElement.doScroll("left")}catch(k){setTimeout(arguments.callee,0);return}h._pageInit(j)})()}}else{if(i.addEventListener){h._add(j,"DOMContentLoaded",function(){h._pageInit(j)})}}h._add(j,"load",function(){h._pageInit(j)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=e.dom.Event=new e.dom.EventUtils();a._wait(window);e.addUnload(function(){a.destroy()})})(tinymce);(function(a){var b=a.each;a.create("tinymce.dom.Element",{Element:function(h,f){var c=this,g,e;f=f||{};c.id=h;c.dom=g=f.dom||a.DOM;c.settings=f;if(!a.isIE){e=c.dom.get(c.id)}b(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(i){c[i]=function(){var j=[h],k;for(k=0;k<arguments.length;k++){j.push(arguments[k])}j=g[i].apply(g,j);c.update(i);return j}})},on:function(g,e,c){return a.dom.Event.add(this.id,g,e,c)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var c=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||c.clientWidth),h:parseInt(this.getStyle("height")||c.clientHeight)}},moveTo:function(c,e){this.setStyles({left:c,top:e})},moveBy:function(c,f){var e=this.getXY();this.moveTo(e.x+c,e.y+f)},resizeTo:function(c,e){this.setStyles({width:c,height:e})},resizeBy:function(c,f){var e=this.getSize();this.resizeTo(e.w+c,e.h+f)},update:function(e){var f=this,c,g=f.dom;if(a.isIE6&&f.settings.blocker){e=e||"";if(e.indexOf("get")===0||e.indexOf("has")===0||e.indexOf("is")===0){return}if(e=="remove"){g.remove(f.blocker);return}if(!f.blocker){f.blocker=g.uniqueId();c=g.add(f.settings.container||g.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});g.setStyle(c,"opacity",0)}else{c=g.get(f.blocker)}g.setStyle(c,"left",f.getStyle("left",1));g.setStyle(c,"top",f.getStyle("top",1));g.setStyle(c,"width",f.getStyle("width",1));g.setStyle(c,"height",f.getStyle("height",1));g.setStyle(c,"display",f.getStyle("display",1));g.setStyle(c,"zIndex",parseInt(f.getStyle("zIndex",1)||0)-1)}}})})(tinymce);(function(c){function f(g){return g.replace(/[\n\r]+/g,"")}var b=c.is,a=c.isIE,e=c.each;c.create("tinymce.dom.Selection",{Selection:function(j,i,h){var g=this;g.dom=j;g.win=i;g.serializer=h;e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(k){g[k]=new c.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new c.dom.TridentSelection(g)}c.addUnload(g.destroy,g)},getContent:function(h){var g=this,i=g.getRng(),m=g.dom.create("body"),k=g.getSel(),j,l,p;h=h||{};j=l="";h.get=true;h.format=h.format||"html";g.onBeforeGetContent.dispatch(g,h);if(h.format=="text"){return g.isCollapsed()?"":(i.text||(k.toString?k.toString():""))}if(i.cloneContents){p=i.cloneContents();if(p){m.appendChild(p)}}else{if(b(i.item)||b(i.htmlText)){m.innerHTML=i.item?i.item(0).outerHTML:i.htmlText}else{m.innerHTML=i.toString()}}if(/^\s/.test(m.innerHTML)){j=" "}if(/\s+$/.test(m.innerHTML)){l=" "}h.getInner=true;h.content=g.isCollapsed()?"":j+g.serializer.serialize(m,h)+l;g.onGetContent.dispatch(g,h);return h.content},setContent:function(j,i){var g=this,k=g.getRng(),m,l=g.win.document;i=i||{format:"html"};i.set=true;j=i.content=g.dom.processHTML(j);g.onBeforeSetContent.dispatch(g,i);j=i.content;if(k.insertNode){j+='<span id="__caret">_</span>';k.deleteContents();k.insertNode(g.getRng().createContextualFragment(j));m=g.dom.get("__caret");k=l.createRange();k.setStartBefore(m);k.setEndAfter(m);g.setRng(k);g.dom.remove("__caret")}else{if(k.item){l.execCommand("Delete",false,null);k=g.getRng()}k.pasteHTML(j)}g.onSetContent.dispatch(g,i)},getStart:function(){var g=this,h=g.getRng(),i;if(a){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(1);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.firstChild}return i}else{i=h.startContainer;if(i.nodeName=="BODY"){return i.firstChild}return g.dom.getParent(i,"*")}},getEnd:function(){var g=this,h=g.getRng(),i;if(a){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild}return i}else{i=h.endContainer;if(i.nodeName=="BODY"){return i.lastChild}return g.dom.getParent(i,"*")}},getBookmark:function(z){var k=this,n=k.getRng(),g,p,m,w=k.dom.getViewPort(k.win),x,u,B,q,y=-16777215,l,i=k.dom.getRoot(),h=0,j=0,A;p=w.x;m=w.y;if(z){return{rng:n,scrollX:p,scrollY:m}}if(a){if(n.item){x=n.item(0);e(k.dom.select(x.nodeName),function(s,r){if(x==s){u=r;return false}});return{tag:x.nodeName,index:u,scrollX:p,scrollY:m}}g=k.dom.doc.body.createTextRange();g.moveToElementText(i);g.collapse(true);B=Math.abs(g.move("character",y));g=n.duplicate();g.collapse(true);u=Math.abs(g.move("character",y));g=n.duplicate();g.collapse(false);q=Math.abs(g.move("character",y))-u;return{start:u-B,length:q,scrollX:p,scrollY:m}}x=k.getNode();l=k.getSel();if(!l){return null}if(x&&x.nodeName=="IMG"){return{scrollX:p,scrollY:m}}function v(C,F,t){var s=k.dom.doc.createTreeWalker(C,NodeFilter.SHOW_TEXT,null,false),G,D=0,E={};while((G=s.nextNode())!=null){if(G==F){E.start=D}if(G==t){E.end=D;return E}D+=f(G.nodeValue||"").length}return null}if(l.anchorNode==l.focusNode&&l.anchorOffset==l.focusOffset){x=v(i,l.anchorNode,l.focusNode);if(!x){return{scrollX:p,scrollY:m}}f(l.anchorNode.nodeValue||"").replace(/^\s+/,function(r){h=r.length});return{start:Math.max(x.start+l.anchorOffset-h,0),end:Math.max(x.end+l.focusOffset-h,0),scrollX:p,scrollY:m,beg:l.anchorOffset-h==0}}else{x=v(i,n.startContainer,n.endContainer);if(!x){return{scrollX:p,scrollY:m}}return{start:Math.max(x.start+n.startOffset-h,0),end:Math.max(x.end+n.endOffset-j,0),scrollX:p,scrollY:m,beg:n.startOffset-h==0}}},moveToBookmark:function(p){var q=this,h=q.getRng(),u=q.getSel(),k=q.dom.getRoot(),n,i,l;function j(s,x,F){var D=q.dom.doc.createTreeWalker(s,NodeFilter.SHOW_TEXT,null,false),z,t=0,C={},y,E,B,A;while((z=D.nextNode())!=null){B=A=0;l=z.nodeValue||"";i=f(l).length;t+=i;if(t>=x&&!C.startNode){y=x-(t-i);if(p.beg&&y>=i){continue}C.startNode=z;C.startOffset=y+A}if(t>=F){C.endNode=z;C.endOffset=F-(t-i)+A;return C}}return null}if(!p){return false}q.win.scrollTo(p.scrollX,p.scrollY);if(a){if(h=p.rng){try{h.select()}catch(m){}return true}q.win.focus();if(p.tag){h=k.createControlRange();e(q.dom.select(p.tag),function(s,r){if(r==p.index){h.addElement(s)}})}else{try{if(p.start<0){return true}h=u.createRange();h.moveToElementText(k);h.collapse(true);h.moveStart("character",p.start);h.moveEnd("character",p.length)}catch(g){return true}}try{h.select()}catch(m){}return true}if(!u){return false}if(p.rng){u.removeAllRanges();u.addRange(p.rng)}else{if(b(p.start)&&b(p.end)){try{n=j(k,p.start,p.end);if(n){h=q.dom.doc.createRange();h.setStart(n.startNode,n.startOffset);h.setEnd(n.endNode,n.endOffset);u.removeAllRanges();u.addRange(h)}if(!c.isOpera){q.win.focus()}}catch(m){}}}},select:function(h,m){var u=this,g=u.getRng(),v=u.getSel(),q,p,l,k=u.win.document;function i(w,t){var s,r;if(w){s=k.createTreeWalker(w,NodeFilter.SHOW_TEXT,null,false);while(w=s.nextNode()){r=w;if(c.trim(w.nodeValue).length!=0){if(t){return w}else{r=w}}}}return r}if(a){try{q=k.body;if(/^(IMG|TABLE)$/.test(h.nodeName)){g=q.createControlRange();g.addElement(h)}else{g=q.createTextRange();g.moveToElementText(h)}g.select()}catch(j){}}else{if(m){p=i(h,1)||u.dom.select("br:first",h)[0];l=i(h,0)||u.dom.select("br:last",h)[0];if(p&&l){g=k.createRange();if(p.nodeName=="BR"){g.setStartBefore(p)}else{g.setStart(p,0)}if(l.nodeName=="BR"){g.setEndBefore(l)}else{g.setEnd(l,l.nodeValue.length)}}else{g.selectNode(h)}}else{g.selectNode(h)}u.setRng(g)}return h},isCollapsed:function(){var g=this,i=g.getRng(),h=g.getSel();if(!i||i.item){return false}return !h||i.boundingWidth==0||i.collapsed},collapse:function(g){var h=this,i=h.getRng(),j;if(i.item){j=i.item(0);i=this.win.document.body.createTextRange();i.moveToElementText(j)}i.collapse(!!g);h.setRng(i)},getSel:function(){var h=this,g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(k){var h=this,i,j;if(k&&h.tridentSel){return h.tridentSel.getRangeAt(0)}try{if(i=h.getSel()){j=i.rangeCount>0?i.getRangeAt(0):(i.createRange?i.createRange():h.win.document.createRange())}}catch(g){}if(!j){j=a?h.win.document.body.createTextRange():h.win.document.createRange()}return j},setRng:function(j){var i,h=this;if(!h.tridentSel){i=h.getSel();if(i){i.removeAllRanges();i.addRange(j)}}else{if(j.cloneRange){h.tridentSel.addRange(j);return}try{j.select()}catch(g){}}},setNode:function(h){var g=this;g.setContent(g.dom.getOuterHTML(h));return h},getNode:function(){var g=this,i=g.getRng(),h=g.getSel(),j;if(!a){if(!i){return g.dom.getRoot()}j=i.commonAncestorContainer;if(!i.collapsed){if(c.isWebKit&&h.anchorNode&&h.anchorNode.nodeType==1){return h.anchorNode.childNodes[h.anchorOffset]}if(i.startContainer==i.endContainer){if(i.startOffset-i.endOffset<2){if(i.startContainer.hasChildNodes()){j=i.startContainer.childNodes[i.startOffset]}}}}return g.dom.getParent(j,"*")}return i.item?i.item(0):i.parentElement()},getSelectedBlocks:function(h,g){var j=this,k=j.dom,p,i,m,l=[];p=k.getParent(h||j.getStart(),k.isBlock);i=k.getParent(g||j.getEnd(),k.isBlock);if(p){l.push(p)}if(p&&i&&p!=i){m=p;while((m=m.nextSibling)&&m!=i){if(k.isBlock(m)){l.push(m)}}}if(i&&p!=i){l.push(i)}return l},destroy:function(h){var g=this;g.win=null;if(g.tridentSel){g.tridentSel.destroy()}if(!h){c.removeUnload(g.destroy)}}})})(tinymce);(function(a){a.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(c){function b(){var f=document.implementation;if(!f||!f.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(e){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(e){}}else{return f.createDocument("","",null)}}this.doc=b();this.valid=a.isOpera||a.isWebKit;this.reset()},reset:function(){var b=this,c=b.doc;if(c.firstChild){c.removeChild(c.firstChild)}b.node=c.appendChild(c.createElement("html"))},writeStartElement:function(c){var b=this;b.node=b.node.appendChild(b.doc.createElement(c))},writeAttribute:function(c,b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.setAttribute(c,b)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var b=this,c=b.node;c.appendChild(b.doc.createTextNode(""));b.node=c.parentNode},writeText:function(b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.appendChild(this.doc.createTextNode(b))},writeCDATA:function(b){this.node.appendChild(this.doc.createCDATASection(b))},writeComment:function(b){if(a.isIE){b=b.replace(/^\-|\-$/g," ")}this.node.appendChild(this.doc.createComment(b.replace(/\-\-/g," ")))},getContent:function(){var b;b=this.doc.xml||new XMLSerializer().serializeToString(this.doc);b=b.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");b=b.replace(/ ?\/>/g," />");if(this.valid){b=b.replace(/\%MCGT%/g,"&gt;")}return b}})})(tinymce);(function(a){a.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(b){this.settings=a.extend({indent_char:" ",indentation:0},b);this.reset()},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0},writeStartElement:function(b){this._writeAttributesEnd();this.writeRaw("<"+b);this.tags.push(b);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(e,b){var c=this;c.writeRaw(" "+c.encode(e)+'="'+c.encode(b)+'"')},writeEndElement:function(){var b;if(this.tags.length>0){b=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+b+">")}if(this.settings.indentation>0){this.writeRaw("\n")}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n")}}},writeText:function(b){this._writeAttributesEnd();this.writeRaw(this.encode(b));this.count++},writeCDATA:function(b){this._writeAttributesEnd();this.writeRaw("<![CDATA["+b+"]]>");this.count++},writeComment:function(b){this._writeAttributesEnd();this.writeRaw("<!-- "+b+"-->");this.count++},writeRaw:function(b){this.str+=b},encode:function(b){return b.replace(/[<>&"]/g,function(c){switch(c){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return c})},getContent:function(){return this.str},_writeAttributesEnd:function(b){if(!this.inAttr){return}this.inAttr=false;if(b&&this.elementCount==this.count){this.writeRaw(" />");return false}this.writeRaw(">");return true}})})(tinymce);(function(f){var h=f.extend,g=f.each,b=f.util.Dispatcher,e=f.isIE,a=f.isGecko;function c(i){return i.replace(/([?+*])/g,".$1")}f.create("tinymce.dom.Serializer",{Serializer:function(k){var j=this;j.key=0;j.onPreProcess=new b(j);j.onPostProcess=new b(j);try{j.writer=new f.dom.XMLWriter()}catch(i){j.writer=new f.dom.StringWriter()}j.settings=k=h({dom:f.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},k);j.dom=k.dom;if(k.remove_redundant_brs){j.onPostProcess.add(function(l,m){m.content=m.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(p,n,q){if(/^<br \/>\s*<\//.test(p)){return"</"+q+">"}return p})})}if(k.element_format=="html"){j.onPostProcess.add(function(l,m){m.content=m.content.replace(/<([^>]+) \/>/g,"<$1>")})}if(k.fix_list_elements){j.onPreProcess.add(function(w,t){var m,z,y=["ol","ul"],v,u,s,l=/^(OL|UL)$/,A;function q(x,B){var p=B.split(","),r;while((x=x.previousSibling)!=null){for(r=0;r<p.length;r++){if(x.nodeName==p[r]){return x}}}return null}for(z=0;z<y.length;z++){m=j.dom.select(y[z],t.node);for(v=0;v<m.length;v++){u=m[v];s=u.parentNode;if(l.test(s.nodeName)){A=q(u,"LI");if(!A){A=j.dom.create("li");A.innerHTML="&nbsp;";A.appendChild(u);s.insertBefore(A,s.firstChild)}else{A.appendChild(u)}}}}})}if(k.fix_table_elements){j.onPreProcess.add(function(l,m){g(j.dom.select("p table",m.node),function(p){if(e){p.outerHTML=p.outerHTML}j.dom.split(j.dom.getParent(p,"p"),p)})})}},setEntities:function(r){var p=this,k,n,j={},q="",m;if(p.entityLookup){return}k=r.split(",");for(n=0;n<k.length;n+=2){m=k[n];if(m==34||m==38||m==60||m==62){continue}j[String.fromCharCode(k[n])]=k[n+1];m=parseInt(k[n]).toString(16);q+="\\u"+"0000".substring(m.length)+m}if(!q){p.settings.entity_encoding="raw";return}p.entitiesRE=new RegExp("["+q+"]","g");p.entityLookup=j},setValidChildRules:function(i){this.childRules=null;this.addValidChildRules(i)},addValidChildRules:function(l){var k=this,m,i,j;if(!l){return}m="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment";i="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment";j="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP";g(l.split(","),function(q){var r=q.split(/\[|\]/),n;q="";g(r[1].split("|"),function(p){if(q){q+="|"}switch(p){case"%itrans":p=i;break;case"%itrans_na":p=i.substring(2);break;case"%istrict":p=m;break;case"%istrict_na":p=m.substring(2);break;case"%btrans":p=j;break;case"%bstrict":p=j;break}q+=p});n=new RegExp("^("+q.toLowerCase()+")$","i");g(r[0].split("/"),function(p){k.childRules=k.childRules||{};k.childRules[p]=n})});l="";g(k.childRules,function(p,n){if(l){l+="|"}l+=n});k.parentElementsRE=new RegExp("^("+l.toLowerCase()+")$","i")},setRules:function(j){var i=this;i._setup();i.rules={};i.wildRules=[];i.validElements={};return i.addRules(j)},addRules:function(j){var i=this,k;if(!j){return}i._setup();g(j.split(","),function(n){var t=n.split(/\[|\]/),m=t[0].split("/"),u,l,r,q=[];if(k){l=f.extend([],k.attribs)}if(t.length>1){g(t[1].split("|"),function(w){var p={},v;l=l||[];w=w.replace(/::/g,"~");w=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(w);w[2]=w[2].replace(/~/g,":");if(w[1]=="!"){u=u||[];u.push(w[2])}if(w[1]=="-"){for(v=0;v<l.length;v++){if(l[v].name==w[2]){l.splice(v,1);return}}}switch(w[3]){case"=":p.defaultVal=w[4]||"";break;case":":p.forcedVal=w[4];break;case"<":p.validVals=w[4].split("?");break}if(/[*.?]/.test(w[2])){r=r||[];p.nameRE=new RegExp("^"+c(w[2])+"$");r.push(p)}else{p.name=w[2];l.push(p)}q.push(w[2])})}g(m,function(y,w){var z=y.charAt(0),v=1,p={};if(k){if(k.noEmpty){p.noEmpty=k.noEmpty}if(k.fullEnd){p.fullEnd=k.fullEnd}if(k.padd){p.padd=k.padd}}switch(z){case"-":p.noEmpty=true;break;case"+":p.fullEnd=true;break;case"#":p.padd=true;break;default:v=0}m[w]=y=y.substring(v);i.validElements[y]=1;if(/[*.?]/.test(m[0])){p.nameRE=new RegExp("^"+c(m[0])+"$");i.wildRules=i.wildRules||{};i.wildRules.push(p)}else{p.name=m[0];if(m[0]=="@"){k=p}i.rules[y]=p}p.attribs=l;if(u){p.requiredAttribs=u}if(r){y="";g(q,function(s){if(y){y+="|"}y+="("+c(s)+")"});p.validAttribsRE=new RegExp("^"+y.toLowerCase()+"$");p.wildAttribs=r}})});j="";g(i.validElements,function(m,l){if(j){j+="|"}if(l!="@"){j+=l}});i.validElementsRE=new RegExp("^("+c(j.toLowerCase())+")$")},findRule:function(p){var k=this,m=k.rules,j,l;k._setup();l=m[p];if(l){return l}m=k.wildRules;for(j=0;j<m.length;j++){if(m[j].nameRE.test(p)){return m[j]}}return null},findAttribRule:function(j,m){var k,l=j.wildAttribs;for(k=0;k<l.length;k++){if(l[k].nameRE.test(m)){return l[k]}}return null},serialize:function(m,l){var j,i=this,k;i._setup();l=l||{};l.format=l.format||"html";m=m.cloneNode(true);i.processObj=l;if(f.isWebKit){k=m.ownerDocument.implementation.createHTMLDocument("");k.body.appendChild(m)}i.key=""+(parseInt(i.key)+1);if(!l.no_events){l.node=m;i.onPreProcess.dispatch(i,l)}i.writer.reset();i._serializeNode(m,l.getInner);l.content=i.writer.getContent();if(!l.no_events){i.onPostProcess.dispatch(i,l)}i._postProcess(l);l.node=null;return f.trim(l.content)},_postProcess:function(n){var i=this,k=i.settings,j=n.content,m=[],l;if(n.format=="html"){l=i._protect({content:j,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});j=l.content;if(k.entity_encoding!=="raw"){j=i._encode(j)}if(!n.set){j=j.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,k.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(k.remove_linebreaks){j=j.replace(/\r?\n|\r/g," ");j=j.replace(/(<[^>]+>)\s+/g,"$1 ");j=j.replace(/\s+(<\/[^>]+>)/g," $1");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");j=j.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(k.apply_source_formatting&&k.indent_mode=="simple"){j=j.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");j=j.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>");j=j.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");j=j.replace(/\n\n/g,"\n")}}j=i._unprotect(j,l);j=j.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>");j=j.replace(/(type|language)=\"mce-/g,'$1="');if(k.entity_encoding=="raw"){j=j.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>")}j=j.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(p,r,q){return"<noscript"+r+">"+i.dom.decode(q.replace(/<!--|-->/g,""))+"</noscript>"})}n.content=j},_serializeNode:function(F,q){var B=this,C=B.settings,z=B.writer,u,k,y,H,G,I,D,j,A,m,x,E,r,p;if(!C.node_filter||C.node_filter(F)){switch(F.nodeType){case 1:if(F.hasAttribute?F.hasAttribute("mce_bogus"):F.getAttribute("mce_bogus")){return}r=false;u=F.hasChildNodes();m=F.getAttribute("mce_name")||F.nodeName.toLowerCase();if(e){if(F.scopeName!=="HTML"&&F.scopeName!=="html"){m=F.scopeName+":"+m}}if(m.indexOf("mce:")===0){m=m.substring(4)}if(!B.validElementsRE||!B.validElementsRE.test(m)||(B.invalidElementsRE&&B.invalidElementsRE.test(m))||q){r=true;break}if(e){if(C.fix_content_duplication){if(F.mce_serialized==B.key){return}F.mce_serialized=B.key}if(m.charAt(0)=="/"){m=m.substring(1)}}else{if(a){if(F.nodeName==="BR"&&F.getAttribute("type")=="_moz"){return}}}if(B.childRules){if(B.parentElementsRE.test(B.elementName)){if(!B.childRules[B.elementName].test(m)){r=true;break}}B.elementName=m}x=B.findRule(m);m=x.name||m;p=C.closed.test(m);if((!u&&x.noEmpty)||(e&&!m)){r=true;break}if(x.requiredAttribs){I=x.requiredAttribs;for(H=I.length-1;H>=0;H--){if(this.dom.getAttrib(F,I[H])!==""){break}}if(H==-1){r=true;break}}z.writeStartElement(m);if(x.attribs){for(H=0,D=x.attribs,G=D.length;H<G;H++){I=D[H];A=B._getAttrib(F,I);if(A!==null){z.writeAttribute(I.name,A)}}}if(x.validAttribsRE){D=B.dom.getAttribs(F);for(H=D.length-1;H>-1;H--){j=D[H];if(j.specified){I=j.nodeName.toLowerCase();if(C.invalid_attrs.test(I)||!x.validAttribsRE.test(I)){continue}E=B.findAttribRule(x,I);A=B._getAttrib(F,E,I);if(A!==null){z.writeAttribute(I,A)}}}}if(m==="script"&&f.trim(F.innerHTML)){z.writeText("// ");z.writeCDATA(F.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,""));u=false;break}if(x.padd){if(u&&(y=F.firstChild)&&y.nodeType===1&&F.childNodes.length===1){if(y.hasAttribute?y.hasAttribute("mce_bogus"):y.getAttribute("mce_bogus")){z.writeText("\u00a0")}}else{if(!u){z.writeText("\u00a0")}}}break;case 3:if(B.childRules&&B.parentElementsRE.test(B.elementName)){if(!B.childRules[B.elementName].test(F.nodeName)){return}}return z.writeText(F.nodeValue);case 4:return z.writeCDATA(F.nodeValue);case 8:return z.writeComment(F.nodeValue)}}else{if(F.nodeType==1){u=F.hasChildNodes()}}if(u&&!p){y=F.firstChild;while(y){B._serializeNode(y);B.elementName=m;y=y.nextSibling}}if(!r){if(!p){z.writeFullEndElement()}else{z.writeEndElement()}}},_protect:function(k){var j=this;k.items=k.items||[];function i(m){return m.replace(/[\r\n\\]/g,function(n){if(n==="\n"){return"\\n"}else{if(n==="\\"){return"\\\\"}}return"\\r"})}function l(m){return m.replace(/\\[\\rn]/g,function(n){if(n==="\\n"){return"\n"}else{if(n==="\\\\"){return"\\"}}return"\r"})}g(k.patterns,function(m){k.content=l(i(k.content).replace(m.pattern,function(p,q,n,r){n=l(n);if(m.encode){n=j._encode(n)}k.items.push(n);return q+"<!--mce:"+(k.items.length-1)+"-->"+r}))});return k},_unprotect:function(i,j){i=i.replace(/\<!--mce:([0-9]+)--\>/g,function(l,k){return j.items[parseInt(k)]});j.items=[];return i},_encode:function(m){var j=this,k=j.settings,i;if(k.entity_encoding!=="raw"){if(k.entity_encoding.indexOf("named")!=-1){j.setEntities(k.entities);i=j.entityLookup;m=m.replace(j.entitiesRE,function(l){var n;if(n=i[l]){l="&"+n+";"}return l})}if(k.entity_encoding.indexOf("numeric")!=-1){m=m.replace(/[\u007E-\uFFFF]/g,function(l){return"&#"+l.charCodeAt(0)+";"})}}return m},_setup:function(){var i=this,j=this.settings;if(i.done){return}i.done=1;i.setRules(j.valid_elements);i.addRules(j.extended_valid_elements);i.addValidChildRules(j.valid_child_elements);if(j.invalid_elements){i.invalidElementsRE=new RegExp("^("+c(j.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")}if(j.attrib_value_filter){i.attribValueFilter=j.attribValueFilter}},_getAttrib:function(p,k,j){var m,l;j=j||k.name;if(k.forcedVal&&(l=k.forcedVal)){if(l==="{$uid}"){return this.dom.uniqueId()}return l}l=this.dom.getAttrib(p,j);if(this.settings.bool_attrs.test(j)&&l){l=(""+l).toLowerCase();if(l==="false"||l==="0"){return null}l=j}switch(j){case"rowspan":case"colspan":if(l=="1"){l=""}break}if(this.attribValueFilter){l=this.attribValueFilter(j,l,p)}if(k.validVals){for(m=k.validVals.length-1;m>=0;m--){if(l==k.validVals[m]){break}}if(m==-1){return null}}if(l===""&&typeof(k.defaultVal)!="undefined"){l=k.defaultVal;if(l==="{$uid}"){return this.dom.uniqueId()}return l}else{if(j=="class"&&this.processObj.get){l=l.replace(/\s?mceItem\w+\s?/g,"")}}if(l===""){return null}return l}})})(tinymce);(function(tinymce){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(s){this.settings=s||{};this.queue=[];this.lookup={}},isDone:function(u){return this.lookup[u]?this.lookup[u].state==2:0},markDone:function(u){this.lookup[u]={state:2,url:u}},add:function(u,cb,s,pr){var t=this,lo=t.lookup,o;if(o=lo[u]){if(cb&&o.state==2){cb.call(s||this)}return o}o={state:0,url:u,func:cb,scope:s||this};if(pr){t.queue.unshift(o)}else{t.queue.push(o)}lo[u]=o;return o},load:function(u,cb,s){var t=this,o;if(o=t.lookup[u]){if(cb&&o.state==2){cb.call(s||t)}return o}function loadScript(u){if(Event.domLoaded||t.settings.strict_mode){tinymce.util.XHR.send({url:tinymce._addVer(u),error:t.settings.error,async:false,success:function(co){t.eval(co)}})}else{document.write('<script type="text/javascript" src="'+tinymce._addVer(u)+'"><\/script>')}}if(!tinymce.is(u,"string")){each(u,function(u){loadScript(u)});if(cb){cb.call(s||t)}}else{loadScript(u);if(cb){cb.call(s||t)}}},loadQueue:function(cb,s){var t=this;if(!t.queueLoading){t.queueLoading=1;t.queueCallbacks=[];t.loadScripts(t.queue,function(){t.queueLoading=0;if(cb){cb.call(s||t)}each(t.queueCallbacks,function(o){o.func.call(o.scope)})})}else{if(cb){t.queueCallbacks.push({func:cb,scope:s||t})}}},eval:function(co){var w=window;if(!w.execScript){try{eval.call(w,co)}catch(ex){eval(co,w)}}else{w.execScript(co)}},loadScripts:function(sc,cb,s){var t=this,lo=t.lookup;function done(o){o.state=2;if(o.func){o.func.call(o.scope||t)}}function allDone(){var l;l=sc.length;each(sc,function(o){o=lo[o.url];if(o.state===2){done(o);l--}else{load(o)}});if(l===0&&cb){cb.call(s||t);cb=0}}function load(o){if(o.state>0){return}o.state=1;tinymce.dom.ScriptLoader.loadScript(o.url,function(){done(o);allDone()})}each(sc,function(o){var u=o.url;if(!lo[u]){lo[u]=o;t.queue.push(o)}else{o=lo[u]}if(o.state>0){return}if(!Event.domLoaded&&!t.settings.strict_mode){var ix,ol="";if(cb||o.func){o.state=1;ix=tinymce.dom.ScriptLoader._addOnLoad(function(){done(o);allDone()});if(tinymce.isIE){ol=' onreadystatechange="'}else{ol=' onload="'}ol+="tinymce.dom.ScriptLoader._onLoad(this,'"+u+"',"+ix+');"'}document.write('<script type="text/javascript" src="'+tinymce._addVer(u)+'"'+ol+"><\/script>");if(!o.func){done(o)}}else{load(o)}});allDone()},"static":{_addOnLoad:function(f){var t=this;t._funcs=t._funcs||[];t._funcs.push(f);return t._funcs.length-1},_onLoad:function(e,u,ix){if(!tinymce.isIE||e.readyState=="complete"){this._funcs[ix].call(this)}},loadScript:function(u,cb){var id=tinymce.DOM.uniqueId(),e;function done(){Event.clear(id);tinymce.DOM.remove(id);if(cb){cb.call(document,u);cb=0}}if(tinymce.isIE){tinymce.util.XHR.send({url:tinymce._addVer(u),async:false,success:function(co){window.execScript(co);done()}})}else{e=tinymce.DOM.create("script",{id:id,type:"text/javascript",src:tinymce._addVer(u)});Event.add(e,"load",done);(document.getElementsByTagName("head")[0]||document.body).appendChild(e)}}}});tinymce.ScriptLoader=new tinymce.dom.ScriptLoader()})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0},setDisabled:function(f){var g;if(f!=this.disabled){g=b.get(this.id);if(g&&this.settings.unavailable_prefix){if(f){this.prevTitle=g.title;g.title=this.settings.unavailable_prefix+": "+g.title}else{g.title=this.prevTitle}}this.setState("Disabled",f);this.setState("Enabled",!f);this.disabled=f}},isDisabled:function(){return this.disabled},setActive:function(e){if(e!=this.active){this.setState("Active",e);this.active=e}},isActive:function(){return this.active},setState:function(g,e){var f=b.get(this.id);g=this.classPrefix+g;if(e){b.addClass(f,g)}else{b.removeClass(f,g)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){b.setHTML(e,this.renderHTML())},postRender:function(){var f=this,e;if(a(f.disabled)){e=f.disabled;f.disabled=-1;f.setDisabled(e)}if(a(f.active)){e=f.active;f.active=-1;f.setActive(e)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(b,a){this.parent(b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});(function(e){var c=e.is,b=e.DOM,f=e.each,a=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(h,g){this.parent(h,g);this.classPrefix="mceMenuItem"},setSelected:function(g){this.setState("Selected",g);this.selected=g},isSelected:function(){return this.selected},postRender:function(){var g=this;g.parent();if(c(g.selected)){g.setSelected(g.selected)}}})})(tinymce);(function(e){var c=e.is,b=e.DOM,f=e.each,a=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(i,h){var g=this;g.parent(i,h);g.items={};g.collapsed=false;g.menuCount=0;g.onAddItem=new e.util.Dispatcher(this)},expand:function(h){var g=this;if(h){a(g,function(i){if(i.expand){i.expand()}},"items",g)}g.collapsed=false},collapse:function(h){var g=this;if(h){a(g,function(i){if(i.collapse){i.collapse()}},"items",g)}g.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(g){if(!g.settings){g=new e.ui.MenuItem(g.id||b.uniqueId(),g)}this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:true})},addMenu:function(g){if(!g.collapse){g=this.createMenu(g)}this.menuCount++;return this.add(g)},hasMenus:function(){return this.menuCount!==0},remove:function(g){delete this.items[g.id]},removeAll:function(){var g=this;a(g,function(h){if(h.removeAll){h.removeAll()}else{h.remove()}h.destroy()},"items",g);g.items={}},createMenu:function(h){var g=new e.ui.Menu(h.id||b.uniqueId(),h);g.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return g}})})(tinymce);(function(f){var e=f.is,c=f.DOM,g=f.each,a=f.dom.Event,b=f.dom.Element;f.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(i,h){h=h||{};h.container=h.container||c.doc.body;h.offset_x=h.offset_x||0;h.offset_y=h.offset_y||0;h.vp_offset_x=h.vp_offset_x||0;h.vp_offset_y=h.vp_offset_y||0;if(e(h.icons)&&!h.icons){h["class"]+=" mceNoIcons"}this.parent(i,h);this.onShowMenu=new f.util.Dispatcher(this);this.onHideMenu=new f.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(k){var i=this,j=i.settings,h;k.container=k.container||j.container;k.parent=i;k.constrain=k.constrain||j.constrain;k["class"]=k["class"]||j["class"];k.vp_offset_x=k.vp_offset_x||j.vp_offset_x;k.vp_offset_y=k.vp_offset_y||j.vp_offset_y;h=new f.ui.DropMenu(k.id||c.uniqueId(),k);h.onAddItem.add(i.onAddItem.dispatch,i.onAddItem);return h},update:function(){var j=this,k=j.settings,h=c.get("menu_"+j.id+"_tbl"),m=c.get("menu_"+j.id+"_co"),i,l;i=k.max_width?Math.min(h.clientWidth,k.max_width):h.clientWidth;l=k.max_height?Math.min(h.clientHeight,k.max_height):h.clientHeight;if(!c.boxModel){j.element.setStyles({width:i+2,height:l+2})}else{j.element.setStyles({width:i,height:l})}if(k.max_width){c.setStyle(m,"width",i)}if(k.max_height){c.setStyle(m,"height",l);if(h.clientHeight<k.max_height){c.setStyle(m,"overflow","hidden")}}},showMenu:function(r,p,v){var B=this,C=B.settings,q,i=c.getViewPort(),z,m,A,u,j=2,l,k,n=B.classPrefix;B.collapse(1);if(B.isMenuVisible){return}if(!B.rendered){q=c.add(B.settings.container,B.renderNode());g(B.items,function(h){h.postRender()});B.element=new b("menu_"+B.id,{blocker:1,container:C.container})}else{q=c.get("menu_"+B.id)}if(!f.isOpera){c.setStyles(q,{left:-65535,top:-65535})}c.show(q);B.update();r+=C.offset_x||0;p+=C.offset_y||0;i.w-=4;i.h-=4;if(C.constrain){z=q.clientWidth-j;m=q.clientHeight-j;A=i.x+i.w;u=i.y+i.h;if((r+C.vp_offset_x+z)>A){r=v?v-z:Math.max(0,(A-C.vp_offset_x)-z)}if((p+C.vp_offset_y+m)>u){p=Math.max(0,(u-C.vp_offset_y)-m)}}c.setStyles(q,{left:r,top:p});B.element.update();B.isMenuVisible=1;B.mouseClickFunc=a.add(q,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,n+"ItemSub")){h=B.items[s.id];if(h.isDisabled()){return}l=B;while(l){if(l.hideMenu){l.hideMenu()}l=l.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(B.hasMenus()){B.mouseOverFunc=a.add(q,"mouseover",function(w){var h,t,s;w=w.target;if(w&&(w=c.getParent(w,"tr"))){h=B.items[w.id];if(B.lastMenu){B.lastMenu.collapse(1)}if(h.isDisabled()){return}if(w&&c.hasClass(w,n+"ItemSub")){t=c.getRect(w);h.showMenu((t.x+t.w-j),t.y-j,t.x);B.lastMenu=h;c.addClass(c.get(h.id).firstChild,n+"ItemActive")}}})}B.onShowMenu.dispatch(B);if(C.keyboard_focus){a.add(q,"keydown",B._keyHandler,B);c.select("a","menu_"+B.id)[0].focus();B._focusIdx=0}},hideMenu:function(k){var h=this,j=c.get("menu_"+h.id),i;if(!h.isMenuVisible){return}a.remove(j,"mouseover",h.mouseOverFunc);a.remove(j,"click",h.mouseClickFunc);a.remove(j,"keydown",h._keyHandler);c.hide(j);h.isMenuVisible=0;if(!k){h.collapse(1)}if(h.element){h.element.hide()}if(i=c.get(h.id)){c.removeClass(i.firstChild,h.classPrefix+"ItemActive")}h.onHideMenu.dispatch(h)},add:function(j){var h=this,i;j=h.parent(j);if(h.isRendered&&(i=c.get("menu_"+h.id))){h._add(c.select("tbody",i)[0],j)}return j},collapse:function(h){this.parent(h);this.hideMenu(1)},remove:function(h){c.remove(h.id);this.destroy();return this.parent(h)},destroy:function(){var h=this,i=c.get("menu_"+h.id);a.remove(i,"mouseover",h.mouseOverFunc);a.remove(i,"click",h.mouseClickFunc);if(h.element){h.element.remove()}c.remove(i)},renderNode:function(){var j=this,k=j.settings,m,i,l,h;h=c.create("div",{id:"menu_"+j.id,"class":k["class"],style:"position:absolute;left:0;top:0;z-index:200000"});l=c.add(h,"div",{id:"menu_"+j.id+"_co","class":j.classPrefix+(k["class"]?" "+k["class"]:"")});j.element=new b("menu_"+j.id,{blocker:1,container:k.container});if(k.menu_line){c.add(l,"span",{"class":j.classPrefix+"Line"})}m=c.add(l,"table",{id:"menu_"+j.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});i=c.add(m,"tbody");g(j.items,function(n){j._add(i,n)});j.rendered=true;return h},_keyHandler:function(k){var j=this,i=k.keyCode;function h(n){var l=j._focusIdx+n,m=c.select("a","menu_"+j.id)[l];if(m){j._focusIdx=l;m.focus()}}switch(i){case 38:h(-1);return;case 40:h(1);return;case 13:return;case 27:return this.hideMenu()}},_add:function(k,i){var j,r=i.settings,q,m,l,p=this.classPrefix,h;if(r.separator){m=c.add(k,"tr",{id:i.id,"class":p+"ItemSeparator"});c.add(m,"td",{"class":p+"ItemSeparator"});if(j=m.previousSibling){c.addClass(j,"mceLast")}return}j=m=c.add(k,"tr",{id:i.id,"class":p+"Item "+p+"ItemEnabled"});j=l=c.add(j,"td");j=q=c.add(j,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});c.addClass(l,r["class"]);h=c.add(j,"span",{"class":"mceIcon"+(r.icon?" mce_"+r.icon:"")});if(r.icon_src){c.add(h,"img",{src:r.icon_src})}j=c.add(j,r.element||"span",{"class":"mceText",title:i.settings.title},i.settings.title);if(i.settings.style){c.setAttrib(j,"style",i.settings.style)}if(k.childNodes.length==1){c.addClass(m,"mceFirst")}if((j=m.previousSibling)&&c.hasClass(j,p+"ItemSeparator")){c.addClass(m,"mceFirst")}if(i.collapse){c.addClass(m,p+"ItemSub")}if(j=m.previousSibling){c.removeClass(j,"mceLast")}c.addClass(m,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,c){this.parent(e,c);this.classPrefix="mceButton"},renderHTML:function(){var g=this.classPrefix,f=this.settings,e,c;c=a.encode(f.label||"");e='<a id="'+this.id+'" href="javascript:;" class="'+g+" "+g+"Enabled "+f["class"]+(c?" "+g+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+a.encode(f.title)+'">';if(f.image){e+='<img class="mceIcon" src="'+f.image+'" />'+c+"</a>"}else{e+='<span class="mceIcon '+f["class"]+'"></span>'+(c?'<span class="'+g+'Label">'+c+"</span>":"")+"</a>"}return e},postRender:function(){var c=this,e=c.settings;b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return e.onclick.call(e.scope,f)}})}})})(tinymce);(function(e){var c=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(i,h){var g=this;g.parent(i,h);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new e.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){var h=this,i,j;if(g!=h.selectedIndex){i=c.get(h.id+"_text");j=h.items[g];if(j){h.selectedValue=j.value;h.selectedIndex=g;c.setHTML(i,c.encode(j.title));c.removeClass(i,"mceTitle")}else{c.setHTML(i,c.encode(h.settings.title));c.addClass(i,"mceTitle");h.selectedValue=h.selectedIndex=null}i=0}},add:function(j,g,i){var h=this;i=i||{};i=e.extend(i,{title:j,value:g});h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var j="",g=this,i=g.settings,k=g.classPrefix;j='<table id="'+g.id+'" cellpadding="0" cellspacing="0" class="'+k+" "+k+"Enabled"+(i["class"]?(" "+i["class"]):"")+'"><tbody><tr>';j+="<td>"+c.createHTML("a",{id:g.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(g.settings.title))+"</td>";j+="<td>"+c.createHTML("a",{id:g.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";j+="</tr></tbody></table>";return j},showMenu:function(){var h=this,k,j,i=c.get(this.id),g;if(h.isDisabled()||h.items.length==0){return}if(h.menu&&h.menu.isMenuVisible){return h.hideMenu()}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true}k=c.getPos(this.settings.menu_container);j=c.getPos(i);g=h.menu;g.settings.offset_x=j.x;g.settings.offset_y=j.y;g.settings.keyboard_focus=!e.isOpera;if(h.oldID){g.items[h.oldID].setSelected(0)}f(h.items,function(l){if(l.value===h.selectedValue){g.items[l.id].setSelected(1);h.oldID=l.id}});g.showMenu(0,i.clientHeight);b.add(c.doc,"mousedown",h.hideMenu,h);c.addClass(h.id,h.classPrefix+"Selected")},hideMenu:function(h){var g=this;if(h&&h.type=="mousedown"&&(h.target.id==g.id+"_text"||h.target.id==g.id+"_open")){return}if(!h||!c.getParent(h.target,".mceMenu")){c.removeClass(g.id,g.classPrefix+"Selected");b.remove(c.doc,"mousedown",g.hideMenu,g);if(g.menu){g.menu.hideMenu()}}},renderMenu:function(){var h=this,g;g=h.settings.control_manager.createDropMenu(h.id+"_menu",{menu_line:1,"class":h.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});g.onHideMenu.add(h.hideMenu,h);g.add({title:h.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(h.settings.onselect("")!==false){h.select("")}}});f(h.items,function(i){i.id=c.uniqueId();i.onclick=function(){if(h.settings.onselect(i.value)!==false){h.select(i.value)}};g.add(i)});h.onRenderMenu.dispatch(h,g);h.menu=g},postRender:function(){var g=this,h=g.classPrefix;b.add(g.id,"click",g.showMenu,g);b.add(g.id+"_text","focus",function(i){if(!g._focused){g.keyDownHandler=b.add(g.id+"_text","keydown",function(m){var j=-1,k,l=m.keyCode;f(g.items,function(n,p){if(g.selectedValue==n.value){j=p}});if(l==38){k=g.items[j-1]}else{if(l==40){k=g.items[j+1]}else{if(l==13){k=g.selectedValue;g.selectedValue=null;g.settings.onselect(k);return b.cancel(m)}}}if(k){g.hideMenu();g.select(k.value)}})}g._focused=1});b.add(g.id+"_text","blur",function(){b.remove(g.id+"_text","keydown",g.keyDownHandler);g._focused=0});if(e.isIE6||!c.boxModel){b.add(g.id,"mouseover",function(){if(!c.hasClass(g.id,h+"Disabled")){c.addClass(g.id,h+"Hover")}});b.add(g.id,"mouseout",function(){if(!c.hasClass(g.id,h+"Disabled")){c.removeClass(g.id,h+"Hover")}})}g.onPostRender.dispatch(g,c.get(g.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(e){var c=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(h,g){this.parent(h,g);this.classPrefix="mceNativeListBox"},setDisabled:function(g){c.get(this.id).disabled=g},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){c.get(this.id).selectedIndex=g+1;this.selectedValue=this.items[g]?this.items[g].value:null},add:function(k,h,g){var j,i=this;g=g||{};g.value=h;if(i.isRendered()){c.add(c.get(this.id),"option",g,k)}j={title:k,value:h,attribs:g};i.items.push(j);i.onAdd.dispatch(i,j)},getLength:function(){return c.get(this.id).options.length-1},renderHTML:function(){var i,g=this;i=c.createHTML("option",{value:""},"-- "+g.settings.title+" --");f(g.items,function(h){i+=c.createHTML("option",{value:h.value},h.title)});i=c.createHTML("select",{id:g.id,"class":"mceNativeListBox"},i);return i},postRender:function(){var h=this,i;h.rendered=true;function g(k){var j=h.items[k.target.selectedIndex-1];if(j&&(j=j.value)){h.onChange.dispatch(h,j);if(h.settings.onselect){h.settings.onselect(j)}}}b.add(h.id,"change",g);b.add(h.id,"keydown",function(k){var j;b.remove(h.id,"change",i);j=b.add(h.id,"blur",function(){b.add(h.id,"change",g);b.remove(h.id,"blur",j)});if(k.keyCode==13||k.keyCode==32){g(k);return b.cancel(k)}});h.onPostRender.dispatch(h,c.get(h.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,e=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f){this.parent(g,f);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:g.settings.icons});f.onHideMenu.add(g.hideMenu,g);g.onRenderMenu.dispatch(g,f);g.menu=f},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var f=this,g=f.settings;a.add(f.id,"click",function(){if(!f.isDisabled()){if(g.onclick){g.onclick(f.value)}f.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,e=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f){this.parent(g,f);this.classPrefix="mceSplitButton"},renderHTML:function(){var j,g=this,i=g.settings,f;j="<tbody><tr>";if(i.image){f=b.createHTML("img ",{src:i.image,"class":"mceAction "+i["class"]})}else{f=b.createHTML("span",{"class":"mceAction "+i["class"]},"")}j+="<td>"+b.createHTML("a",{id:g.id+"_action",href:"javascript:;","class":"mceAction "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},f)+"</td>";f=b.createHTML("span",{"class":"mceOpen "+i["class"]});j+="<td>"+b.createHTML("a",{id:g.id+"_open",href:"javascript:;","class":"mceOpen "+i["class"],onclick:"return false;",onmousedown:"return false;",title:i.title},f)+"</td>";j+="</tr></tbody>";return b.createHTML("table",{id:g.id,"class":"mceSplitButton mceSplitButtonEnabled "+i["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:i.title},j)},postRender:function(){var f=this,g=f.settings;if(g.onclick){a.add(f.id+"_action","click",function(){if(!f.isDisabled()){g.onclick(f.value)}})}a.add(f.id+"_open","click",f.showMenu,f);a.add(f.id+"_open","focus",function(){f._focused=1});a.add(f.id+"_open","blur",function(){f._focused=0});if(c.isIE6||!b.boxModel){a.add(f.id,"mouseover",function(){if(!b.hasClass(f.id,"mceSplitButtonDisabled")){b.addClass(f.id,"mceSplitButtonHover")}});a.add(f.id,"mouseout",function(){if(!b.hasClass(f.id,"mceSplitButtonDisabled")){b.removeClass(f.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open")}})})(tinymce);(function(e){var c=e.DOM,a=e.dom.Event,b=e.is,f=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h){var g=this;g.parent(i,h);g.settings=h=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new e.util.Dispatcher(g);g.onHideMenu=new e.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var g=this,h,k,j,i;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=c.get(g.id);c.show(g.id+"_menu");c.addClass(j,"mceSplitButtonSelected");i=c.getPos(j);c.setStyles(g.id+"_menu",{left:i.x,top:i.y+j.clientHeight,zIndex:200000});j=0;a.add(c.doc,"mousedown",g.hideMenu,g);g.onShowMenu.dispatch(g);if(g._focused){g._keyHandler=a.add(g.id+"_menu","keydown",function(l){if(l.keyCode==27){g.hideMenu()}});c.select("a",g.id+"_menu")[0].focus()}g.isMenuVisible=1},hideMenu:function(h){var g=this;if(h&&h.type=="mousedown"&&c.getParent(h.target,function(i){return i.id===g.id+"_open"})){return}if(!h||!c.getParent(h.target,".mceSplitButtonMenu")){c.removeClass(g.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",g.hideMenu,g);a.remove(g.id+"_menu","keydown",g._keyHandler);c.hide(g.id+"_menu")}g.onHideMenu.dispatch(g);g.isMenuVisible=0},renderMenu:function(){var l=this,g,k=0,p=l.settings,r,j,q,h;h=c.add(p.menu_container,"div",{id:l.id+"_menu","class":p.menu_class+" "+p["class"],style:"position:absolute;left:0;top:-1000px;"});g=c.add(h,"div",{"class":p["class"]+" mceSplitButtonMenu"});c.add(g,"span",{"class":"mceMenuLine"});r=c.add(g,"table",{"class":"mceColorSplitMenu"});j=c.add(r,"tbody");k=0;f(b(p.colors,"array")?p.colors:p.colors.split(","),function(i){i=i.replace(/^#/,"");if(!k--){q=c.add(j,"tr");k=p.grid_width-1}r=c.add(q,"td");r=c.add(r,"a",{href:"javascript:;",style:{backgroundColor:"#"+i},mce_color:"#"+i})});if(p.more_colors_func){r=c.add(j,"tr");r=c.add(r,"td",{colspan:p.grid_width,"class":"mceMoreColors"});r=c.add(r,"a",{id:l.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},p.more_colors_title);a.add(r,"click",function(i){p.more_colors_func.call(p.more_colors_scope||this);return a.cancel(i)})}c.addClass(g,"mceColorSplitMenu");a.add(l.id+"_menu","click",function(i){var m;i=i.target;if(i.nodeName=="A"&&(m=i.getAttribute("mce_color"))){l.setColor(m)}return a.cancel(i)});return h},setColor:function(h){var g=this;c.setStyle(g.id+"_preview","backgroundColor",h);g.value=h;g.hideMenu();g.settings.onselect(h)},postRender:function(){var g=this,h=g.id;g.parent();c.add(h+"_action","div",{id:h+"_preview","class":"mceColorPreview"});c.setStyle(g.id+"_preview","backgroundColor",g.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,b=tinymce.DOM,n=m.settings,e,a,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];a=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=b.createHTML("td",{"class":j},b.createHTML("span",null,"<!-- IE -->"))}if(a&&k.ListBox){if(a.Button||a.SplitButton){f+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))}}if(b.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=b.createHTML("td",{"class":j},b.createHTML("span",null,"<!-- IE -->"));return b.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||""},"<tbody><tr>"+f+"</tr></tbody>")}});(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new a(this),get:function(e){return this.lookup[e]},requireLangPack:function(g){var e,f=b.EditorManager.settings;if(f&&f.language){e=this.urls[g]+"/langs/"+f.language+".js";if(!b.dom.Event.domLoaded&&!f.strict_mode){b.ScriptLoader.load(e)}else{b.ScriptLoader.add(e)}}},add:function(f,e){this.items.push(e);this.lookup[f]=e;this.onAdd.dispatch(this,f,e);return e},load:function(i,f,e,h){var g=this;if(g.urls[i]){return}if(f.indexOf("/")!=0&&f.indexOf("://")==-1){f=b.baseURL+"/"+f}g.urls[i]=f.substring(0,f.lastIndexOf("/"));b.ScriptLoader.add(f,e,h)}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(g){var h=g.each,i=g.extend,f=g.DOM,a=g.dom.Event,c=g.ThemeManager,b=g.PluginManager,e=g.explode;g.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var j=this,k=window.location;g.documentBaseURL=k.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(g.documentBaseURL)){g.documentBaseURL+="/"}g.baseURL=new g.util.URI(g.documentBaseURL).toAbsolute(g.baseURL);g.EditorManager.baseURI=new g.util.URI(g.baseURL);j.onBeforeUnload=new g.util.Dispatcher(j);a.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)})},init:function(u){var r=this,m,l=g.ScriptLoader,q,p,j=[],n;function k(w,x,t){var v=w[x];if(!v){return}if(g.is(v,"string")){t=v.replace(/\.\w+$/,"");t=t?g.resolve(t):0;v=g.resolve(v)}return v.apply(t||this,Array.prototype.slice.call(arguments,2))}u=i({theme:"simple",language:"en",strict_loading_mode:document.contentType=="application/xhtml+xml"},u);r.settings=u;if(!a.domLoaded&&!u.strict_loading_mode){if(u.language){l.add(g.baseURL+"/langs/"+u.language+".js")}if(u.theme&&u.theme.charAt(0)!="-"&&!c.urls[u.theme]){c.load(u.theme,"themes/"+u.theme+"/editor_template"+g.suffix+".js")}if(u.plugins){m=e(u.plugins);if(g.inArray(m,"compat2x")!=-1){b.load("compat2x","plugins/compat2x/editor_plugin"+g.suffix+".js")}h(m,function(s){if(s&&s.charAt(0)!="-"&&!b.urls[s]){if(!g.isWebKit&&s=="safari"){return}b.load(s,"plugins/"+s+"/editor_plugin"+g.suffix+".js")}})}l.loadQueue()}a.add(document,"init",function(){var s,v;k(u,"onpageload");if(u.browsers){s=false;h(e(u.browsers),function(w){switch(w){case"ie":case"msie":if(g.isIE){s=true}break;case"gecko":if(g.isGecko){s=true}break;case"safari":case"webkit":if(g.isWebKit){s=true}break;case"opera":if(g.isOpera){s=true}break}});if(!s){return}}switch(u.mode){case"exact":s=u.elements||"";if(s.length>0){h(e(s),function(w){if(f.get(w)){n=new g.Editor(w,u);j.push(n);n.render(1)}else{q=0;h(document.forms,function(x){h(x.elements,function(y){if(y.name===w){w="mce_editor_"+q;f.setAttrib(y,"id",w);n=new g.Editor(w,u);j.push(n);n.render(1)}})})}})}break;case"textareas":case"specific_textareas":function t(x,w){return w.constructor===RegExp?w.test(x.className):f.hasClass(x,w)}h(f.select("textarea"),function(w){if(u.editor_deselector&&t(w,u.editor_deselector)){return}if(!u.editor_selector||t(w,u.editor_selector)){p=f.get(w.name);if(!w.id&&!p){w.id=w.name}if(!w.id||r.get(w.id)){w.id=f.uniqueId()}n=new g.Editor(w.id,u);j.push(n);n.render(1)}});break}if(u.oninit){s=v=0;h(j,function(w){v++;if(!w.initialized){w.onInit.add(function(){s++;if(s==v){k(u,"oninit")}})}else{s++}if(s==v){k(u,"oninit")}})}})},get:function(j){return this.editors[j]},getInstanceById:function(j){return this.get(j)},add:function(j){this.editors[j.id]=j;this._setActive(j);return j},remove:function(k){var j=this;if(!j.editors[k.id]){return null}delete j.editors[k.id];if(j.activeEditor==k){j._setActive(null);h(j.editors,function(l){j._setActive(l);return false})}k.destroy();return k},execCommand:function(q,n,m){var p=this,l=p.get(m),j;switch(q){case"mceFocus":l.focus();return true;case"mceAddEditor":case"mceAddControl":if(!p.get(m)){new g.Editor(m,p.settings).render()}return true;case"mceAddFrameControl":j=m.window;j.tinyMCE=tinyMCE;j.tinymce=g;g.DOM.doc=j.document;g.DOM.win=j;l=new g.Editor(m.element_id,m);l.render();if(g.isIE){function k(){l.destroy();j.detachEvent("onunload",k);j=j.tinyMCE=j.tinymce=null}j.attachEvent("onunload",k)}m.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(l){l.remove()}return true;case"mceToggleEditor":if(!l){p.execCommand("mceAddControl",0,m);return true}if(l.isHidden()){l.show()}else{l.hide()}return true}if(p.activeEditor){return p.activeEditor.execCommand(q,n,m)}return false},execInstanceCommand:function(n,m,l,k){var j=this.get(n);if(j){return j.execCommand(m,l,k)}return false},triggerSave:function(){h(this.editors,function(j){j.save()})},addI18n:function(l,m){var j,k=this.i18n;if(!g.is(l,"string")){h(l,function(p,n){h(p,function(r,q){h(r,function(t,s){if(q==="common"){k[n+"."+s]=t}else{k[n+"."+q+"."+s]=t}})})})}else{h(m,function(p,n){k[l+"."+n]=p})}},_setActive:function(j){this.selectedInstance=this.activeEditor=j}});g.EditorManager.preInit()})(tinymce);var tinyMCE=window.tinyMCE=tinymce.EditorManager;(function(p){var q=p.DOM,l=p.dom.Event,g=p.extend,m=p.util.Dispatcher;var k=p.each,a=p.isGecko,b=p.isIE,f=p.isWebKit;var e=p.is,i=p.ThemeManager,c=p.PluginManager,j=p.EditorManager;var r=p.inArray,n=p.grep,h=p.explode;p.create("tinymce.Editor",{Editor:function(w,v){var u=this;u.id=u.editorId=w;u.execCommands={};u.queryStateCommands={};u.queryValueCommands={};u.plugins={};k(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){u[s]=new m(u)});u.settings=v=g({id:w,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:p.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:true,convert_fonts_to_spans:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,removeformat_selector:"span,b,strong,em,i,font,u,strike"},v);u.documentBaseURI=new p.util.URI(v.document_base_url||p.documentBaseURL,{base_uri:tinyMCE.baseURI});u.baseURI=j.baseURI;u.execCallback("setup",u)},render:function(w){var x=this,y=x.settings,z=x.id,u=p.ScriptLoader;if(!l.domLoaded){l.add(document,"init",function(){x.render()});return}if(!w){y.strict_loading_mode=1;tinyMCE.settings=y}if(!x.getElement()){return}if(y.strict_loading_mode){u.settings.strict_mode=y.strict_loading_mode;p.DOM.settings.strict=1}if(!/TEXTAREA|INPUT/i.test(x.getElement().nodeName)&&y.hidden_input&&q.getParent(z,"form")){q.insertAfter(q.create("input",{type:"hidden",name:z}),z)}if(p.WindowManager){x.windowManager=new p.WindowManager(x)}if(y.encoding=="xml"){x.onGetContent.add(function(s,t){if(t.save){t.content=q.encode(t.content)}})}if(y.add_form_submit_trigger){x.onSubmit.addToTop(function(){if(x.initialized){x.save();x.isNotDirty=1}})}if(y.add_unload_trigger){x._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(x.initialized&&!x.destroyed&&!x.isHidden()){x.save({format:"raw",no_events:true})}})}p.addUnload(x.destroy,x);if(y.submit_patch){x.onBeforeRenderUI.add(function(){var s=x.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){x.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){j.triggerSave();x.isNotDirty=1;return x.formElement._mceOldSubmit(x.formElement)}}s=null})}function v(){if(y.language){u.add(p.baseURL+"/langs/"+y.language+".js")}if(y.theme&&y.theme.charAt(0)!="-"&&!i.urls[y.theme]){i.load(y.theme,"themes/"+y.theme+"/editor_template"+p.suffix+".js")}k(h(y.plugins),function(s){if(s&&s.charAt(0)!="-"&&!c.urls[s]){if(!f&&s=="safari"){return}c.load(s,"plugins/"+s+"/editor_plugin"+p.suffix+".js")}});u.loadQueue(function(){if(!x.removed){x.init()}})}if(y.plugins.indexOf("compat2x")!=-1){c.load("compat2x","plugins/compat2x/editor_plugin"+p.suffix+".js");u.loadQueue(v)}else{v()}},init:function(){var y,H=this,I=H.settings,E,B,D=H.getElement(),x,v,F,A,C,G;j.add(H);if(I.theme){I.theme=I.theme.replace(/-/,"");x=i.get(I.theme);H.theme=new x();if(H.theme.init&&I.init_theme){H.theme.init(H,i.urls[I.theme]||p.documentBaseURL.replace(/\/$/,""))}}k(h(I.plugins.replace(/\-/g,"")),function(w){var J=c.get(w),t=c.urls[w]||p.documentBaseURL.replace(/\/$/,""),s;if(J){s=new J(H,t);H.plugins[w]=s;if(s.init){s.init(H,t)}}});if(I.popup_css!==false){if(I.popup_css){I.popup_css=H.documentBaseURI.toAbsolute(I.popup_css)}else{I.popup_css=H.baseURI.toAbsolute("themes/"+I.theme+"/skins/"+I.skin+"/dialog.css")}}if(I.popup_css_add){I.popup_css+=","+H.documentBaseURI.toAbsolute(I.popup_css_add)}H.controlManager=new p.ControlManager(H);H.undoManager=new p.UndoManager(H);H.undoManager.onAdd.add(function(t,s){if(!s.initial){return H.onChange.dispatch(H,s,t)}});H.undoManager.onUndo.add(function(t,s){return H.onUndo.dispatch(H,s,t)});H.undoManager.onRedo.add(function(t,s){return H.onRedo.dispatch(H,s,t)});if(I.custom_undo_redo){H.onExecCommand.add(function(t,w,u,J,s){if(w!="Undo"&&w!="Redo"&&w!="mceRepaint"&&(!s||!s.skip_undo)){H.undoManager.add()}})}H.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){H.nodeChanged()}});if(a){function z(s,t){if(!t||!t.initial){H.execCommand("mceRepaint")}}H.onUndo.add(z);H.onRedo.add(z);H.onSetContent.add(z)}H.onBeforeRenderUI.dispatch(H,H.controlManager);if(I.render_ui){E=I.width||D.style.width||D.offsetWidth;B=I.height||D.style.height||D.offsetHeight;H.orgDisplay=D.style.display;G=/^[0-9\.]+(|px)$/i;if(G.test(""+E)){E=Math.max(parseInt(E)+(x.deltaWidth||0),100)}if(G.test(""+B)){B=Math.max(parseInt(B)+(x.deltaHeight||0),100)}x=H.theme.renderUI({targetNode:D,width:E,height:B,deltaWidth:I.delta_width,deltaHeight:I.delta_height});H.editorContainer=x.editorContainer}if(document.domain&&location.hostname!=document.domain){p.relaxedDomain=document.domain}q.setStyles(x.sizeContainer||x.editorContainer,{width:E,height:B});B=(x.iframeHeight||B)+(typeof(B)=="number"?(x.deltaHeight||0):"");if(B<100){B=100}H.iframeHTML=I.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(I.document_base_url!=p.documentBaseURL){H.iframeHTML+='<base href="'+H.documentBaseURI.getURI()+'" />'}H.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(p.relaxedDomain){H.iframeHTML+='<script type="text/javascript">document.domain = "'+p.relaxedDomain+'";<\/script>'}A=I.body_id||"tinymce";if(A.indexOf("=")!=-1){A=H.getParam("body_id","","hash");A=A[H.id]||A}C=I.body_class||"";if(C.indexOf("=")!=-1){C=H.getParam("body_class","","hash");C=C[H.id]||""}H.iframeHTML+='</head><body id="'+A+'" class="mceContentBody '+C+'"></body></html>';if(p.relaxedDomain){if(b||(p.isOpera&&parseFloat(opera.version())>=9.5)){F='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+H.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}else{if(p.isOpera){F='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'}}}y=q.add(x.iframeContainer,"iframe",{id:H.id+"_ifr",src:F||'javascript:""',frameBorder:"0",style:{width:"100%",height:B}});H.contentAreaContainer=x.iframeContainer;q.get(x.editorContainer).style.display=H.orgDisplay;q.get(H.id).style.display="none";if(!b||!p.relaxedDomain){H.setupIframe()}D=y=x=null},setupIframe:function(){var B=this,C=B.settings,w=q.get(B.id),x=B.getDoc(),v,z;if(!b||!p.relaxedDomain){x.open();x.write(B.iframeHTML);x.close()}if(!b){try{if(!C.readonly){x.designMode="On"}}catch(y){}}if(b){z=B.getBody();q.hide(z);if(!C.readonly){z.contentEditable=true}q.show(z)}B.dom=new p.DOM.DOMUtils(B.getDoc(),{keep_values:true,url_converter:B.convertURL,url_converter_scope:B,hex_colors:C.force_hex_style_colors,class_filter:C.class_filter,update_styles:1,fix_ie_paragraphs:1});B.serializer=new p.dom.Serializer({entity_encoding:C.entity_encoding,entities:C.entities,valid_elements:C.verify_html===false?"*[*]":C.valid_elements,extended_valid_elements:C.extended_valid_elements,valid_child_elements:C.valid_child_elements,invalid_elements:C.invalid_elements,fix_table_elements:C.fix_table_elements,fix_list_elements:C.fix_list_elements,fix_content_duplication:C.fix_content_duplication,convert_fonts_to_spans:C.convert_fonts_to_spans,font_size_classes:C.font_size_classes,font_size_style_values:C.font_size_style_values,apply_source_formatting:C.apply_source_formatting,remove_linebreaks:C.remove_linebreaks,element_format:C.element_format,dom:B.dom});B.selection=new p.dom.Selection(B.dom,B.getWin(),B.serializer);B.forceBlocks=new p.ForceBlocks(B,{forced_root_block:C.forced_root_block});B.editorCommands=new p.EditorCommands(B);B.serializer.onPreProcess.add(function(s,t){return B.onPreProcess.dispatch(B,t,s)});B.serializer.onPostProcess.add(function(s,t){return B.onPostProcess.dispatch(B,t,s)});B.onPreInit.dispatch(B);if(!C.gecko_spellcheck){B.getBody().spellcheck=0}if(!C.readonly){B._addEvents()}B.controlManager.onPostRender.dispatch(B,B.controlManager);B.onPostRender.dispatch(B);if(C.directionality){B.getBody().dir=C.directionality}if(C.nowrap){B.getBody().style.whiteSpace="nowrap"}if(C.custom_elements){function A(s,t){k(h(C.custom_elements),function(D){var E;if(D.indexOf("~")===0){D=D.substring(1);E="span"}else{E="div"}t.content=t.content.replace(new RegExp("<("+D+")([^>]*)>","g"),"<"+E+' mce_name="$1"$2>');t.content=t.content.replace(new RegExp("</("+D+")>","g"),"</"+E+">")})}B.onBeforeSetContent.add(A);B.onPostProcess.add(function(s,t){if(t.set){A(s,t)}})}if(C.handle_node_change_callback){B.onNodeChange.add(function(t,s,D){B.execCallback("handle_node_change_callback",B.id,D,-1,-1,true,B.selection.isCollapsed())})}if(C.save_callback){B.onSaveContent.add(function(s,D){var t=B.execCallback("save_callback",B.id,D.content,B.getBody());if(t){D.content=t}})}if(C.onchange_callback){B.onChange.add(function(t,s){B.execCallback("onchange_callback",B,s)})}if(C.convert_newlines_to_brs){B.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />")}})}if(C.fix_nesting&&b){B.onBeforeSetContent.add(function(s,t){t.content=B._fixNesting(t.content)})}if(C.preformatted){B.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>"}})}if(C.verify_css_classes){B.serializer.attribValueFilter=function(F,D){var E,t;if(F=="class"){if(!B.classesRE){t=B.dom.getClasses();if(t.length>0){E="";k(t,function(s){E+=(E?"|":"")+s["class"]});B.classesRE=new RegExp("("+E+")","gi")}}return !B.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(D)||B.classesRE.test(D)?D:""}return D}}if(C.convert_fonts_to_spans){B._convertFonts()}if(C.inline_styles){B._convertInlineElements()}if(C.cleanup_callback){B.onBeforeSetContent.add(function(s,t){t.content=B.execCallback("cleanup_callback","insert_to_editor",t.content,t)});B.onPreProcess.add(function(s,t){if(t.set){B.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){B.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});B.onPostProcess.add(function(s,t){if(t.set){t.content=B.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=B.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(C.save_callback){B.onGetContent.add(function(s,t){if(t.save){t.content=B.execCallback("save_callback",B.id,t.content,B.getBody())}})}if(C.handle_event_callback){B.onEvent.add(function(s,t,D){if(B.execCallback("handle_event_callback",t,s,D)===false){l.cancel(t)}})}B.onSetContent.add(function(){B.addVisual(B.getBody())});if(C.padd_empty_editor){B.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function u(s,t){k(s.dom.select("a"),function(E){var D=E.parentNode;if(s.dom.isBlock(D)&&D.lastChild===E){s.dom.add(D,"br",{mce_bogus:1})}})}B.onExecCommand.add(function(s,t){if(t==="CreateLink"){u(s)}});B.onSetContent.add(B.selection.onSetContent.add(u));if(!C.readonly){try{x.designMode="Off";x.designMode="On"}catch(y){}}}setTimeout(function(){if(B.removed){return}B.load({initial:true,format:(C.cleanup_on_startup?"html":"raw")});B.startContent=B.getContent({format:"raw"});B.undoManager.add({initial:true});B.initialized=true;B.onInit.dispatch(B);B.execCallback("setupcontent_callback",B.id,B.getBody(),B.getDoc());B.execCallback("init_instance_callback",B);B.focus(true);B.nodeChanged({initial:1});if(C.content_css){p.each(h(C.content_css),function(s){B.dom.loadCSS(B.documentBaseURI.toAbsolute(s))})}if(C.auto_focus){setTimeout(function(){var s=j.get(C.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus()},100)}},1);w=null},focus:function(u){var w,s=this,v=s.settings.content_editable;if(!u){if(!v&&(!b||s.selection.getNode().ownerDocument!=s.getDoc())){s.getWin().focus()}}if(j.activeEditor!=s){if((w=j.activeEditor)!=null){w.onDeactivate.dispatch(w,s)}s.onActivate.dispatch(s,w)}j._setActive(s)},execCallback:function(x){var u=this,w=u.settings[x],v;if(!w){return}if(u.callbackLookup&&(v=u.callbackLookup[x])){w=v.func;v=v.scope}if(e(w,"string")){v=w.replace(/\.\w+$/,"");v=v?p.resolve(v):0;w=p.resolve(w);u.callbackLookup=u.callbackLookup||{};u.callbackLookup[x]={func:w,scope:v}}return w.apply(v||u,Array.prototype.slice.call(arguments,1))},translate:function(t){var v=this.settings.language||"en",u=j.i18n;if(!t){return""}return u[v+"."+t]||t.replace(/{\#([^}]+)\}/g,function(w,s){return u[v+"."+s]||"{#"+s+"}"})},getLang:function(t,s){return j.i18n[(this.settings.language||"en")+"."+t]||(e(s)?s:"{#"+t+"}")},getParam:function(y,u,s){var w=p.trim,t=e(this.settings[y])?this.settings[y]:u,x;if(s==="hash"){x={};if(e(t,"string")){k(t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),function(z){z=z.split("=");if(z.length>1){x[w(z[0])]=w(z[1])}else{x[w(z[0])]=w(z)}})}else{x=t}return x}return t},nodeChanged:function(w){var u=this,v=u.selection,x=v.getNode()||u.getBody();if(u.initialized){u.onNodeChange.dispatch(u,w?w.controlManager||u.controlManager:u.controlManager,b&&x.ownerDocument!=u.getDoc()?u.getBody():x,v.isCollapsed(),w)}},addButton:function(w,v){var u=this;u.buttons=u.buttons||{};u.buttons[w]=v},addCommand:function(v,u,t){this.execCommands[v]={func:u,scope:t||this}},addQueryStateHandler:function(v,u,t){this.queryStateCommands[v]={func:u,scope:t||this}},addQueryValueHandler:function(v,u,t){this.queryValueCommands[v]={func:u,scope:t||this}},addShortcut:function(v,x,s,w){var u=this,y;if(!u.settings.custom_shortcuts){return false}u.shortcuts=u.shortcuts||{};if(e(s,"string")){y=s;s=function(){u.execCommand(y,false,null)}}if(e(s,"object")){y=s;s=function(){u.execCommand(y[0],y[1],y[2])}}k(h(v),function(t){var z={func:s,scope:w||this,desc:x,alt:false,ctrl:false,shift:false};k(h(t,"+"),function(A){switch(A){case"alt":case"ctrl":case"shift":z[A]=true;break;default:z.charCode=A.charCodeAt(0);z.keyCode=A.toUpperCase().charCodeAt(0)}});u.shortcuts[(z.ctrl?"ctrl":"")+","+(z.alt?"alt":"")+","+(z.shift?"shift":"")+","+z.keyCode]=z});return true},execCommand:function(z,y,B,u){var w=this,x=0,A,v;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(z)&&(!u||!u.skip_focus)){w.focus()}A={};w.onBeforeExecCommand.dispatch(w,z,y,B,A);if(A.terminate){return false}if(w.execCallback("execcommand_callback",w.id,w.selection.getNode(),z,y,B)){w.onExecCommand.dispatch(w,z,y,B,u);return true}if(A=w.execCommands[z]){v=A.func.call(A.scope,y,B);if(v!==true){w.onExecCommand.dispatch(w,z,y,B,u);return v}}k(w.plugins,function(s){if(s.execCommand&&s.execCommand(z,y,B)){w.onExecCommand.dispatch(w,z,y,B,u);x=1;return false}});if(x){return true}if(w.theme&&w.theme.execCommand&&w.theme.execCommand(z,y,B)){w.onExecCommand.dispatch(w,z,y,B,u);return true}if(p.GlobalCommands.execCommand(w,z,y,B)){w.onExecCommand.dispatch(w,z,y,B,u);return true}if(w.editorCommands.execCommand(z,y,B)){w.onExecCommand.dispatch(w,z,y,B,u);return true}w.getDoc().execCommand(z,y,B);w.onExecCommand.dispatch(w,z,y,B,u)},queryCommandState:function(y){var v=this,x,w;if(v._isHidden()){return}if(x=v.queryStateCommands[y]){w=x.func.call(x.scope);if(w!==true){return w}}x=v.editorCommands.queryCommandState(y);if(x!==-1){return x}try{return this.getDoc().queryCommandState(y)}catch(u){}},queryCommandValue:function(y){var v=this,x,w;if(v._isHidden()){return}if(x=v.queryValueCommands[y]){w=x.func.call(x.scope);if(w!==true){return w}}x=v.editorCommands.queryCommandValue(y);if(e(x)){return x}try{return this.getDoc().queryCommandValue(y)}catch(u){}},show:function(){var s=this;q.show(s.getContainer());q.hide(s.id);s.load()},hide:function(){var s=this,u=s.getDoc();if(b&&u){u.execCommand("SelectAll")}s.save();q.hide(s.getContainer());q.setStyle(s.id,"display",s.orgDisplay)},isHidden:function(){return !q.isHidden(this.id)},setProgressState:function(s,t,u){this.onSetProgressState.dispatch(this,s,t,u);return s},load:function(w){var s=this,v=s.getElement(),u;if(v){w=w||{};w.load=true;u=s.setContent(e(v.value)?v.value:v.innerHTML,w);w.element=v;if(!w.no_events){s.onLoadContent.dispatch(s,w)}w.element=v=null;return u}},save:function(x){var s=this,w=s.getElement(),u,v;if(!w||!s.initialized){return}x=x||{};x.save=true;if(!x.no_events){s.undoManager.typing=0;s.undoManager.add()}x.element=w;u=x.content=s.getContent(x);if(!x.no_events){s.onSaveContent.dispatch(s,x)}u=x.content;if(!/TEXTAREA|INPUT/i.test(w.nodeName)){w.innerHTML=u;if(v=q.getParent(s.id,"form")){k(v.elements,function(t){if(t.name==s.id){t.value=u;return false}})}}else{w.value=u}x.element=w=null;return u},setContent:function(u,v){var s=this;v=v||{};v.format=v.format||"html";v.set=true;v.content=u;if(!v.no_events){s.onBeforeSetContent.dispatch(s,v)}if(!p.isIE&&(u.length===0||/^\s+$/.test(u))){v.content=s.dom.setHTML(s.getBody(),'<br mce_bogus="1" />');v.format="raw"}v.content=s.dom.setHTML(s.getBody(),p.trim(v.content));if(v.format!="raw"&&s.settings.cleanup){v.getInner=true;v.content=s.dom.setHTML(s.getBody(),s.serializer.serialize(s.getBody(),v))}if(!v.no_events){s.onSetContent.dispatch(s,v)}return v.content},getContent:function(v){var s=this,u;v=v||{};v.format=v.format||"html";v.get=true;if(!v.no_events){s.onBeforeGetContent.dispatch(s,v)}if(v.format!="raw"&&s.settings.cleanup){v.getInner=true;u=s.serializer.serialize(s.getBody(),v)}else{u=s.getBody().innerHTML}u=u.replace(/^\s*|\s*$/g,"");v.content=u;if(!v.no_events){s.onGetContent.dispatch(s,v)}return v.content},isDirty:function(){var s=this;return p.trim(s.startContent)!=p.trim(s.getContent({format:"raw",no_events:1}))&&!s.isNotDirty},getContainer:function(){var s=this;if(!s.container){s.container=q.get(s.editorContainer||s.id+"_parent")}return s.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return q.get(this.settings.content_element||this.id)},getWin:function(){var s=this,u;if(!s.contentWindow){u=q.get(s.id+"_ifr");if(u){s.contentWindow=u.contentWindow}}return s.contentWindow},getDoc:function(){var u=this,s;if(!u.contentDocument){s=u.getWin();if(s){u.contentDocument=s.document}}return u.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(v,z,y){var w=this,x=w.settings;if(x.urlconverter_callback){return w.execCallback("urlconverter_callback",v,y,true,z)}if(!x.convert_urls||(y&&y.nodeName=="LINK")||v.indexOf("file:")===0){return v}if(x.relative_urls){return w.documentBaseURI.toRelative(v)}v=w.documentBaseURI.toAbsolute(v,x.remove_script_host);return v},addVisual:function(w){var u=this,v=u.settings;w=w||u.getBody();if(!e(u.hasVisual)){u.hasVisual=v.visual}k(u.dom.select("table,a",w),function(t){var s;switch(t.nodeName){case"TABLE":s=u.dom.getAttrib(t,"border");if(!s||s=="0"){if(u.hasVisual){u.dom.addClass(t,v.visual_table_class)}else{u.dom.removeClass(t,v.visual_table_class)}}return;case"A":s=u.dom.getAttrib(t,"name");if(s){if(u.hasVisual){u.dom.addClass(t,"mceItemAnchor")}else{u.dom.removeClass(t,"mceItemAnchor")}}return}});u.onVisualAid.dispatch(u,w,u.hasVisual)},remove:function(){var s=this,u=s.getContainer();s.removed=1;s.hide();s.execCallback("remove_instance_callback",s);s.onRemove.dispatch(s);s.onExecCommand.listeners=[];j.remove(s);q.remove(u)},destroy:function(v){var u=this;if(u.destroyed){return}if(!v){p.removeUnload(u.destroy);tinyMCE.onBeforeUnload.remove(u._beforeUnload);if(u.theme&&u.theme.destroy){u.theme.destroy()}u.controlManager.destroy();u.selection.destroy();u.dom.destroy();if(!u.settings.content_editable){l.clear(u.getWin());l.clear(u.getDoc())}l.clear(u.getBody());l.clear(u.formElement)}if(u.formElement){u.formElement.submit=u.formElement._mceOldSubmit;u.formElement._mceOldSubmit=null}u.contentAreaContainer=u.formElement=u.container=u.settings.content_element=u.bodyElement=u.contentDocument=u.contentWindow=null;if(u.selection){u.selection=u.selection.win=u.selection.dom=u.selection.dom.doc=null}u.destroyed=1},_addEvents:function(){var y=this,x,A=y.settings,z={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function w(t,C){var s=t.type;if(y.removed){return}if(y.onEvent.dispatch(y,t,C)!==false){y[z[t.fakeType||t.type]].dispatch(y,t,C)}}k(z,function(t,s){switch(s){case"contextmenu":if(p.isOpera){y.dom.bind(y.getBody(),"mousedown",function(C){if(C.ctrlKey){C.fakeType="contextmenu";w(C)}})}else{y.dom.bind(y.getBody(),s,w)}break;case"paste":y.dom.bind(y.getBody(),s,function(C){w(C)});break;case"submit":case"reset":y.dom.bind(y.getElement().form||q.getParent(y.id,"form"),s,w);break;default:y.dom.bind(A.content_editable?y.getBody():y.getDoc(),s,w)}});y.dom.bind(A.content_editable?y.getBody():(a?y.getDoc():y.getWin()),"focus",function(s){y.focus(true)});if(p.isGecko){y.dom.bind(y.getDoc(),"DOMNodeInserted",function(t){var s;t=t.target;if(t.nodeType===1&&t.nodeName==="IMG"&&(s=t.getAttribute("mce_src"))){t.src=y.documentBaseURI.toAbsolute(s)}})}if(a){function u(){var D=this,F=D.getDoc(),E=D.settings;if(a&&!E.readonly){if(D._isHidden()){try{if(!E.content_editable){F.designMode="On"}}catch(C){}}try{F.execCommand("styleWithCSS",0,false)}catch(C){if(!D._isHidden()){try{F.execCommand("useCSS",0,true)}catch(C){}}}if(!E.table_inline_editing){try{F.execCommand("enableInlineTableEditing",false,false)}catch(C){}}if(!E.object_resizing){try{F.execCommand("enableObjectResizing",false,false)}catch(C){}}}}y.onBeforeExecCommand.add(u);y.onMouseDown.add(u)}y.onMouseUp.add(y.nodeChanged);y.onClick.add(y.nodeChanged);y.onKeyUp.add(function(s,t){var C=t.keyCode;if((C>=33&&C<=36)||(C>=37&&C<=40)||C==13||C==45||C==46||C==8||(p.isMac&&(C==91||C==93))||t.ctrlKey){y.nodeChanged()}});y.onReset.add(function(){y.setContent(y.startContent,{format:"raw"})});if(A.custom_shortcuts){if(A.custom_undo_redo_keyboard_shortcuts){y.addShortcut("ctrl+z",y.getLang("undo_desc"),"Undo");y.addShortcut("ctrl+y",y.getLang("redo_desc"),"Redo")}if(a){y.addShortcut("ctrl+b",y.getLang("bold_desc"),"Bold");y.addShortcut("ctrl+i",y.getLang("italic_desc"),"Italic");y.addShortcut("ctrl+u",y.getLang("underline_desc"),"Underline")}for(x=1;x<=6;x++){y.addShortcut("ctrl+"+x,"",["FormatBlock",false,"<h"+x+">"])}y.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);y.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);y.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function B(t){var s=null;if(!t.altKey&&!t.ctrlKey&&!t.metaKey){return s}k(y.shortcuts,function(C){if(p.isMac&&C.ctrl!=t.metaKey){return}else{if(!p.isMac&&C.ctrl!=t.ctrlKey){return}}if(C.alt!=t.altKey){return}if(C.shift!=t.shiftKey){return}if(t.keyCode==C.keyCode||(t.charCode&&t.charCode==C.charCode)){s=C;return false}});return s}y.onKeyUp.add(function(s,t){var C=B(t);if(C){return l.cancel(t)}});y.onKeyPress.add(function(s,t){var C=B(t);if(C){return l.cancel(t)}});y.onKeyDown.add(function(s,t){var C=B(t);if(C){C.func.call(C.scope);return l.cancel(t)}})}if(p.isIE){y.dom.bind(y.getDoc(),"controlselect",function(C){var t=y.resizeInfo,s;C=C.target;if(C.nodeName!=="IMG"){return}if(t){y.dom.unbind(t.node,t.ev,t.cb)}if(!y.dom.hasClass(C,"mceItemNoResize")){ev="resizeend";s=y.dom.bind(C,ev,function(E){var D;E=E.target;if(D=y.dom.getStyle(E,"width")){y.dom.setAttrib(E,"width",D.replace(/[^0-9%]+/g,""));y.dom.setStyle(E,"width","")}if(D=y.dom.getStyle(E,"height")){y.dom.setAttrib(E,"height",D.replace(/[^0-9%]+/g,""));y.dom.setStyle(E,"height","")}})}else{ev="resizestart";s=y.dom.bind(C,"resizestart",l.cancel,l)}t=y.resizeInfo={node:C,ev:ev,cb:s}});y.onKeyDown.add(function(s,t){switch(t.keyCode){case 8:if(y.selection.getRng().item){y.selection.getRng().item(0).removeNode();return l.cancel(t)}}})}if(p.isOpera){y.onClick.add(function(s,t){l.prevent(t)})}if(A.custom_undo_redo){function v(){y.undoManager.typing=0;y.undoManager.add()}if(p.isIE){y.dom.bind(y.getWin(),"blur",function(s){var t;if(y.selection){t=y.selection.getNode();if(!y.removed&&t.ownerDocument&&t.ownerDocument!=y.getDoc()){v()}}})}else{y.dom.bind(y.getDoc(),"blur",function(){if(y.selection&&!y.removed){v()}})}y.onMouseDown.add(v);y.onKeyUp.add(function(s,t){if((t.keyCode>=33&&t.keyCode<=36)||(t.keyCode>=37&&t.keyCode<=40)||t.keyCode==13||t.keyCode==45||t.ctrlKey){y.undoManager.typing=0;y.undoManager.add()}});y.onKeyDown.add(function(s,t){if((t.keyCode>=33&&t.keyCode<=36)||(t.keyCode>=37&&t.keyCode<=40)||t.keyCode==13||t.keyCode==45){if(y.undoManager.typing){y.undoManager.add();y.undoManager.typing=0}return}if(!y.undoManager.typing){y.undoManager.add();y.undoManager.typing=1}})}},_convertInlineElements:function(){var B=this,D=B.settings,w=B.dom,A,y,x,C,u;function z(s,t){if(!D.inline_styles){return}if(t.get){k(B.dom.select("table,u,strike",t.node),function(v){switch(v.nodeName){case"TABLE":if(A=w.getAttrib(v,"height")){w.setStyle(v,"height",A);w.setAttrib(v,"height","")}break;case"U":case"STRIKE":v.style.textDecoration=v.nodeName=="U"?"underline":"line-through";w.setAttrib(v,"mce_style","");w.setAttrib(v,"mce_name","span");break}})}else{if(t.set){k(B.dom.select("table,span",t.node).reverse(),function(v){if(v.nodeName=="TABLE"){if(A=w.getStyle(v,"height")){w.setAttrib(v,"height",A.replace(/[^0-9%]+/g,""))}}else{if(v.style.textDecoration=="underline"){x="u"}else{if(v.style.textDecoration=="line-through"){x="strike"}else{x=""}}if(x){v.style.textDecoration="";w.setAttrib(v,"mce_style","");y=w.create(x,{style:w.getAttrib(v,"style")});w.replace(y,v,1)}}})}}}B.onPreProcess.add(z);if(!D.cleanup_on_startup){B.onSetContent.add(function(s,t){if(t.initial){z(B,{node:B.getBody(),set:1})}})}},_convertFonts:function(){var y=this,z=y.settings,B=y.dom,x,v,u,w;if(!z.inline_styles){return}x=[8,10,12,14,18,24,36];v=["xx-small","x-small","small","medium","large","x-large","xx-large"];if(u=z.font_size_style_values){u=h(u)}if(w=z.font_size_classes){w=h(w)}function A(D){var E,C,t,s;if(!z.inline_styles){return}t=y.dom.select("font",D);for(s=t.length-1;s>=0;s--){E=t[s];C=B.create("span",{style:B.getAttrib(E,"style"),"class":B.getAttrib(E,"class")});B.setStyles(C,{fontFamily:B.getAttrib(E,"face"),color:B.getAttrib(E,"color"),backgroundColor:E.style.backgroundColor});if(E.size){if(u){B.setStyle(C,"fontSize",u[parseInt(E.size)-1])}else{B.setAttrib(C,"class",w[parseInt(E.size)-1])}}B.setAttrib(C,"mce_style","");B.replace(C,E,1)}}y.onPreProcess.add(function(s,t){if(t.get){A(t.node)}});y.onSetContent.add(function(s,t){if(t.initial){A(t.node)}})},_isHidden:function(){var t;if(!a){return 0}t=this.selection.getSel();return(!t||!t.rangeCount||t.rangeCount==0)},_fixNesting:function(u){var v=[],t;u=u.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(w,s,y){var x;if(s==="/"){if(!v.length){return""}if(y!==v[v.length-1].tag){for(t=v.length-1;t>=0;t--){if(v[t].tag===y){v[t].close=1;break}}return""}else{v.pop();if(v.length&&v[v.length-1].close){w=w+"</"+v[v.length-1].tag+">";v.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(y)){return w}if(/\/>$/.test(w)){return w}v.push({tag:y})}return w});for(t=v.length-1;t>=0;t--){u+="</"+v[t].tag+">"}return u}})})(tinymce);(function(e){var g=e.each,c=e.isIE,a=e.isGecko,b=e.isOpera,f=e.isWebKit;e.create("tinymce.EditorCommands",{EditorCommands:function(h){this.editor=h},execCommand:function(l,k,m){var i=this,h=i.editor,j;switch(l){case"mceResetDesignMode":case"mceBeginUndoLevel":return true;case"unlink":i.UnLink();return true;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":i.mceJustify(l,l.substring(7).toLowerCase());return true;default:j=this[l];if(j){j.call(this,k,m);return true}}return false},Indent:function(){var h=this.editor,m=h.dom,k=h.selection,l,i,j;i=h.settings.indentation;j=/[a-z%]+$/i.exec(i);i=parseInt(i);if(h.settings.inline_styles&&(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList())){g(k.getSelectedBlocks(),function(n){m.setStyle(n,"paddingLeft",(parseInt(n.style.paddingLeft||0)+i)+j)});return}h.getDoc().execCommand("Indent",false,null);if(c){m.getParent(k.getNode(),function(p){if(p.nodeName=="BLOCKQUOTE"){p.dir=p.style.cssText=""}})}},Outdent:function(){var i=this.editor,n=i.dom,l=i.selection,m,h,j,k;j=i.settings.indentation;k=/[a-z%]+$/i.exec(j);j=parseInt(j);if(i.settings.inline_styles&&(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList())){g(l.getSelectedBlocks(),function(p){h=Math.max(0,parseInt(p.style.paddingLeft||0)-j);n.setStyle(p,"paddingLeft",h?h+k:"")});return}i.getDoc().execCommand("Outdent",false,null)},mceSetContent:function(i,h){this.editor.setContent(h)},mceToggleVisualAid:function(){var h=this.editor;h.hasVisual=!h.hasVisual;h.addVisual()},mceReplaceContent:function(i,h){var j=this.editor.selection;j.setContent(h.replace(/\{\$selection\}/g,j.getContent({format:"text"})))},mceInsertLink:function(j,i){var h=this.editor,k=h.selection,l=h.dom.getParent(k.getNode(),"a");if(e.is(i,"string")){i={href:i}}function m(n){g(i,function(q,p){h.dom.setAttrib(n,p,q)})}if(!l){h.execCommand("CreateLink",false,"javascript:mctmp(0);");g(h.dom.select("a[href=javascript:mctmp(0);]"),function(n){m(n)})}else{if(i.href){m(l)}else{h.dom.remove(l,1)}}},UnLink:function(){var h=this.editor,i=h.selection;if(i.isCollapsed()){i.select(i.getNode())}h.getDoc().execCommand("unlink",false,null);i.collapse(0)},FontName:function(j,i){var k=this,h=k.editor,l=h.selection,m;if(!i){if(l.isCollapsed()){l.select(l.getNode())}}else{if(h.settings.convert_fonts_to_spans){k._applyInlineStyle("span",{style:{fontFamily:i}})}else{h.getDoc().execCommand("FontName",false,i)}}},FontSize:function(k,j){var i=this.editor,m=i.settings,l,h;if(m.convert_fonts_to_spans&&j>=1&&j<=7){h=e.explode(m.font_size_style_values);l=e.explode(m.font_size_classes);if(l){j=l[j-1]||j}else{j=h[j-1]||j}}if(j>=1&&j<=7){i.getDoc().execCommand("FontSize",false,j)}else{this._applyInlineStyle("span",{style:{fontSize:j}})}},queryCommandValue:function(i){var h=this["queryValue"+i];if(h){return h.call(this,i)}return false},queryCommandState:function(i){var h;switch(i){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(i,i.substring(7).toLowerCase());default:if(h=this["queryState"+i]){return h.call(this,i)}}return -1},_queryState:function(i){try{return this.editor.getDoc().queryCommandState(i)}catch(h){}},_queryVal:function(i){try{return this.editor.getDoc().queryCommandValue(i)}catch(h){}},queryValueFontSize:function(){var i=this.editor,h=0,j;if(j=i.dom.getParent(i.selection.getNode(),"span")){h=j.style.fontSize}if(!h&&(b||f)){if(j=i.dom.getParent(i.selection.getNode(),"font")){h=j.size}return h}return h||this._queryVal("FontSize")},queryValueFontName:function(){var i=this.editor,h=0,j;if(j=i.dom.getParent(i.selection.getNode(),"font")){h=j.face}if(j=i.dom.getParent(i.selection.getNode(),"span")){h=j.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}if(!h){h=this._queryVal("FontName")}return h},mceJustify:function(q,r){var l=this.editor,p=l.selection,h=p.getNode(),s=h.nodeName,i,k,j=l.dom,m;if(l.settings.inline_styles&&this.queryStateJustify(q,r)){m=1}i=j.getParent(h,l.dom.isBlock);if(s=="IMG"){if(r=="full"){return}if(m){if(r=="center"){j.setStyle(i||h.parentNode,"textAlign","")}j.setStyle(h,"float","");this.mceRepaint();return}if(r=="center"){if(i&&/^(TD|TH)$/.test(i.nodeName)){i=0}if(!i||i.childNodes.length>1){k=j.create("p");k.appendChild(h.cloneNode(false));if(i){j.insertAfter(k,i)}else{j.insertAfter(k,h)}j.remove(h);h=k.firstChild;i=k}j.setStyle(i,"textAlign",r);j.setStyle(h,"float","")}else{j.setStyle(h,"float",r);j.setStyle(i||h.parentNode,"textAlign","")}this.mceRepaint();return}if(l.settings.inline_styles&&l.settings.forced_root_block){if(m){r=""}g(p.getSelectedBlocks(j.getParent(p.getStart(),j.isBlock),j.getParent(p.getEnd(),j.isBlock)),function(n){j.setAttrib(n,"align","");j.setStyle(n,"textAlign",r=="full"?"justify":r)});return}else{if(!m){l.getDoc().execCommand(q,false,null)}}if(l.settings.inline_styles){if(m){j.getParent(l.selection.getNode(),function(t){if(t.style&&t.style.textAlign){j.setStyle(t,"textAlign","")}});return}g(j.select("*"),function(u){var t=u.align;if(t){if(t=="full"){t="justify"}j.setStyle(u,"textAlign",t);j.setAttrib(u,"align","")}})}},mceSetCSSClass:function(i,h){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:h})},getSelectedElement:function(){var y=this,q=y.editor,p=q.dom,v=q.selection,i=v.getRng(),m,l,w,s,k,h,u,j,z,x;if(v.isCollapsed()||i.item){return v.getNode()}x=q.settings.merge_styles_invalid_parents;if(e.is(x,"string")){x=new RegExp(x,"i")}if(c){m=i.duplicate();m.collapse(true);w=m.parentElement();l=i.duplicate();l.collapse(false);s=l.parentElement();if(w!=s){m.move("character",1);w=m.parentElement()}if(w==s){m=i.duplicate();m.moveToElementText(w);if(m.compareEndPoints("StartToStart",i)==0&&m.compareEndPoints("EndToEnd",i)==0){return x&&x.test(w.nodeName)?null:w}}}else{function n(r){return p.getParent(r,"*")}w=i.startContainer;s=i.endContainer;k=i.startOffset;h=i.endOffset;if(!i.collapsed){if(w==s){if(k-h<2){if(w.hasChildNodes()){j=w.childNodes[k];return x&&x.test(j.nodeName)?null:j}}}}if(w.nodeType!=3||s.nodeType!=3){return null}if(k==0){j=n(w);if(j&&j.firstChild!=w){j=null}}if(k==w.nodeValue.length){u=w.nextSibling;if(u&&u.nodeType==1){j=w.nextSibling}}if(h==0){u=s.previousSibling;if(u&&u.nodeType==1){z=u}}if(h==s.nodeValue.length){z=n(s);if(z&&z.lastChild!=s){z=null}}if(j==z){return x&&j&&x.test(j.nodeName)?null:j}}return null},mceSetStyleInfo:function(p,n){var w=this,i=w.editor,k=i.getDoc(),h=i.dom,j,l,x=i.selection,r=n.wrapper||"span",l=x.getBookmark(),q;function m(t,s){if(t.nodeType==1){switch(n.command){case"setattrib":return h.setAttrib(t,n.name,n.value);case"setstyle":return h.setStyle(t,n.name,n.value);case"removeformat":return h.setAttrib(t,"class","")}}}q=i.settings.merge_styles_invalid_parents;if(e.is(q,"string")){q=new RegExp(q,"i")}if((j=w.getSelectedElement())&&!i.settings.force_span_wrappers){m(j,1)}else{k.execCommand("FontName",false,"__");g(h.select("span,font"),function(u){var s,t;if(h.getAttrib(u,"face")=="__"||u.style.fontFamily==="__"){s=h.create(r,{mce_new:"1"});m(s);g(u.childNodes,function(v){s.appendChild(v.cloneNode(true))});h.replace(s,u)}})}g(h.select(r).reverse(),function(t){var s=t.parentNode;if(!h.getAttrib(t,"mce_new")){s=h.getParent(t,"*[mce_new]");if(s){h.remove(t,1)}}});g(h.select(r).reverse(),function(t){var s=t.parentNode;if(!s||!h.getAttrib(t,"mce_new")){return}if(i.settings.force_span_wrappers&&s.nodeName!="SPAN"){return}if(s.nodeName==r.toUpperCase()&&s.childNodes.length==1){return h.remove(s,1)}if(t.nodeType==1&&(!q||!q.test(s.nodeName))&&s.childNodes.length==1){m(s);h.setAttrib(t,"class","")}});g(h.select(r).reverse(),function(s){if(h.getAttrib(s,"mce_new")||(h.getAttribs(s).length<=1&&s.className==="")){if(!h.getAttrib(s,"class")&&!h.getAttrib(s,"style")){return h.remove(s,1)}h.setAttrib(s,"mce_new","")}});x.moveToBookmark(l)},queryStateJustify:function(l,i){var h=this.editor,k=h.selection.getNode(),j=h.dom;if(k&&k.nodeName=="IMG"){if(j.getStyle(k,"float")==i){return 1}return k.parentNode.style.textAlign==i}k=j.getParent(h.selection.getStart(),function(m){return m.nodeType==1&&m.style.textAlign});if(i=="full"){i="justify"}if(h.settings.inline_styles){return(k&&k.style.textAlign==i)}return this._queryState(l)},ForeColor:function(j,i){var h=this.editor;if(h.settings.convert_fonts_to_spans){this._applyInlineStyle("span",{style:{color:i}});return}else{h.getDoc().execCommand("ForeColor",false,i)}},HiliteColor:function(j,l){var i=this,h=i.editor,k=h.getDoc();if(h.settings.convert_fonts_to_spans){this._applyInlineStyle("span",{style:{backgroundColor:l}});return}function m(p){if(!a){return}try{k.execCommand("styleWithCSS",0,p)}catch(n){k.execCommand("useCSS",0,!p)}}if(a||b){m(true);k.execCommand("hilitecolor",false,l);m(false)}else{k.execCommand("BackColor",false,l)}},FormatBlock:function(p,i){var q=this,m=q.editor,r=m.selection,k=m.dom,h,l,n;function j(s){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(s.nodeName)}h=k.getParent(r.getNode(),function(s){return j(s)});if(h){if((c&&j(h.parentNode))||h.nodeName=="DIV"){l=m.dom.create(i);g(k.getAttribs(h),function(s){k.setAttrib(l,s.nodeName,k.getAttrib(h,s.nodeName))});n=r.getBookmark();k.replace(l,h,1);r.moveToBookmark(n);m.nodeChanged();return}}i=m.settings.forced_root_block?(i||"<p>"):i;if(i.indexOf("<")==-1){i="<"+i+">"}if(e.isGecko){i=i.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")}m.getDoc().execCommand("FormatBlock",false,i)},mceCleanup:function(){var i=this.editor,j=i.selection,h=j.getBookmark();i.setContent(i.getContent());j.moveToBookmark(h)},mceRemoveNode:function(k,l){var i=this.editor,j=i.selection,h,m=l||j.getNode();if(m==i.getBody()){return}h=j.getBookmark();i.dom.remove(m,1);j.moveToBookmark(h);i.nodeChanged()},mceSelectNodeDepth:function(j,k){var h=this.editor,i=h.selection,l=0;h.dom.getParent(i.getNode(),function(m){if(m.nodeType==1&&l++==k){i.select(m);h.nodeChanged();return false}},h.getBody())},mceSelectNode:function(i,h){this.editor.selection.select(h)},mceInsertContent:function(h,i){this.editor.selection.setContent(i)},mceInsertRawHTML:function(i,j){var h=this.editor;h.selection.setContent("tiny_mce_marker");h.setContent(h.getContent().replace(/tiny_mce_marker/g,j))},mceRepaint:function(){var j,h,k=this.editor;if(e.isGecko){try{j=k.selection;h=j.getBookmark(true);if(j.getSel()){j.getSel().selectAllChildren(k.getBody())}j.collapse(true);j.moveToBookmark(h)}catch(i){}}},queryStateUnderline:function(){var h=this.editor,i=h.selection.getNode();if(i&&i.nodeName=="A"){return false}return this._queryState("Underline")},queryStateOutdent:function(){var h=this.editor,i;if(h.settings.inline_styles){if((i=h.dom.getParent(h.selection.getStart(),h.dom.isBlock))&&parseInt(i.style.paddingLeft)>0){return true}if((i=h.dom.getParent(h.selection.getEnd(),h.dom.isBlock))&&parseInt(i.style.paddingLeft)>0){return true}}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||(!h.settings.inline_styles&&!!h.dom.getParent(h.selection.getNode(),"BLOCKQUOTE"))},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return !!this.editor.dom.getParent(this.editor.selection.getStart(),function(h){return h.nodeName==="BLOCKQUOTE"})},_applyInlineStyle:function(q,k,n){var s=this,p=s.editor,m=p.dom,j,r={},l,u;q=q.toUpperCase();if(n&&n.check_classes&&k["class"]){n.check_classes.push(k["class"])}function i(){g(m.select(q).reverse(),function(v){var t=0;g(m.getAttribs(v),function(w){if(w.nodeName.substring(0,1)!="_"&&m.getAttrib(v,w.nodeName)!=""){t++}});if(t==0){m.remove(v,1)}})}function h(){var t;g(m.select("span,font"),function(v){if(v.style.fontFamily=="mceinline"||v.face=="mceinline"){if(!t){t=p.selection.getBookmark()}k._mce_new="1";m.replace(m.create(q,k),v,1)}});g(m.select(q+"[_mce_new]"),function(w){function v(x){if(x.nodeType==1){g(k.style,function(z,y){m.setStyle(x,y,"")});if(k["class"]&&x.className&&n){g(n.check_classes,function(y){if(m.hasClass(x,y)){m.removeClass(x,y)}})}}}g(m.select(q,w),v);if(w.parentNode&&w.parentNode.nodeType==1&&w.parentNode.childNodes.length==1){v(w.parentNode)}m.getParent(w.parentNode,function(x){if(x.nodeType==1){if(k.style){g(k.style,function(A,z){var y;if(!r[z]&&(y=m.getStyle(x,z))){if(y===A){m.setStyle(w,z,"")}r[z]=1}})}if(k["class"]&&x.className&&n){g(n.check_classes,function(y){if(m.hasClass(x,y)){m.removeClass(w,y)}})}}return false});w.removeAttribute("_mce_new")});i();p.selection.moveToBookmark(t);return !!t}p.focus();p.getDoc().execCommand("FontName",false,"mceinline");h();if(l=s._applyInlineStyle.keyhandler){p.onKeyUp.remove(l);p.onKeyPress.remove(l);p.onKeyDown.remove(l);p.onSetContent.remove(s._applyInlineStyle.chandler)}if(p.selection.isCollapsed()){if(!c){g(m.getParents(p.selection.getNode(),"span"),function(t){g(k.style,function(x,w){var y;if(y=m.getStyle(t,w)){if(y==x){m.setStyle(t,w,"");u=2;return false}u=1;return false}});if(u){return false}});if(u==2){j=p.selection.getBookmark();i();p.selection.moveToBookmark(j);window.setTimeout(function(){p.nodeChanged()},1);return}}s._pendingStyles=e.extend(s._pendingStyles||{},k.style);s._applyInlineStyle.chandler=p.onSetContent.add(function(){delete s._pendingStyles});s._applyInlineStyle.keyhandler=l=function(t){if(s._pendingStyles){k.style=s._pendingStyles;delete s._pendingStyles}if(h()){p.onKeyDown.remove(s._applyInlineStyle.keyhandler);p.onKeyPress.remove(s._applyInlineStyle.keyhandler)}if(t.type=="keyup"){p.onKeyUp.remove(s._applyInlineStyle.keyhandler)}};p.onKeyDown.add(l);p.onKeyPress.add(l);p.onKeyUp.add(l)}else{s._pendingStyles=0}}})})(tinymce);(function(a){a.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(c){var e=this,b=a.util.Dispatcher;e.editor=c;e.data=[];e.onAdd=new b(this);e.onUndo=new b(this);e.onRedo=new b(this)},add:function(e){var h=this,g,f=h.editor,c,j=f.settings,k;e=e||{};e.content=e.content||f.getContent({format:"raw",no_events:1});e.content=e.content.replace(/^\s*|\s*$/g,"");k=h.data[h.index>0&&(h.index==0||h.index==h.data.length)?h.index-1:h.index];if(!e.initial&&k&&e.content==k.content){return null}if(j.custom_undo_redo_levels){if(h.data.length>j.custom_undo_redo_levels){for(g=0;g<h.data.length-1;g++){h.data[g]=h.data[g+1]}h.data.length--;h.index=h.data.length}}if(j.custom_undo_redo_restore_selection&&!e.initial){e.bookmark=c=e.bookmark||f.selection.getBookmark()}if(h.index<h.data.length){h.index++}if(h.data.length===0&&!e.initial){return null}h.data.length=h.index+1;h.data[h.index++]=e;if(e.initial){h.index=0}if(h.data.length==2&&h.data[0].initial){h.data[0].bookmark=c}h.onAdd.dispatch(h,e);f.isNotDirty=0;return e},undo:function(){var f=this,c=f.editor,b=b,e;if(f.typing){f.add();f.typing=0}if(f.index>0){if(f.index==f.data.length&&f.index>1){e=f.index;f.typing=0;if(!f.add()){f.index=e}--f.index}b=f.data[--f.index];c.setContent(b.content,{format:"raw"});c.selection.moveToBookmark(b.bookmark);f.onUndo.dispatch(f,b)}return b},redo:function(){var e=this,c=e.editor,b=null;if(e.index<e.data.length-1){b=e.data[++e.index];c.setContent(b.content,{format:"raw"});c.selection.moveToBookmark(b.bookmark);e.onRedo.dispatch(e,b)}return b},clear:function(){var b=this;b.data=[];b.index=0;b.typing=0;b.add({initial:true})},hasUndo:function(){return this.index!=0||this.typing},hasRedo:function(){return this.index<this.data.length-1}})})(tinymce);(function(f){var b,e,a,c,g,i;b=f.dom.Event;e=f.isIE;a=f.isGecko;c=f.isOpera;g=f.each;i=f.extend;function h(j){j=j.innerHTML;j=j.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");j=j.replace(/<[^>]+>/g,"");return j.replace(/[ \t\r\n]+/g,"")==""}f.create("tinymce.ForceBlocks",{ForceBlocks:function(k){var l=this,m=k.settings,n;l.editor=k;l.dom=k.dom;n=(m.forced_root_block||"p").toLowerCase();m.element=n.toUpperCase();k.onPreInit.add(l.setup,l);l.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+n+">","gi");l.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,n),"gi");l.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,n),"gi");l.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,n),"gi");l.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,n),"gi");function j(p,q){if(c){q.content=q.content.replace(l.reOpera,"</"+n+">")}q.content=q.content.replace(l.rePadd,"<"+n+"$1$2$3$4$5$6>\u00a0</"+n+">");if(!e&&!c&&q.set){q.content=q.content.replace(l.reNbsp2BR1,"<"+n+"$1$2><br /></"+n+">");q.content=q.content.replace(l.reNbsp2BR2,"<"+n+"$1$2><br /></"+n+">")}else{q.content=q.content.replace(l.reBR2Nbsp,"<"+n+"$1$2>\u00a0</"+n+">")}}k.onBeforeSetContent.add(j);k.onPostProcess.add(j);if(m.forced_root_block){k.onInit.add(l.forceRoots,l);k.onSetContent.add(l.forceRoots,l);k.onBeforeGetContent.add(l.forceRoots,l)}},setup:function(){var k=this,j=k.editor,l=j.settings;if(l.forced_root_block){j.onKeyUp.add(k.forceRoots,k);j.onPreProcess.add(k.forceRoots,k)}if(l.force_br_newlines){if(e){j.onKeyPress.add(function(p,r){var t,q=p.selection;if(r.keyCode==13&&q.getNode().nodeName!="LI"){q.setContent('<br id="__" /> ',{format:"raw"});t=p.dom.get("__");t.removeAttribute("id");q.select(t);q.collapse();return b.cancel(r)}})}return}if(!e&&l.force_p_newlines){j.onKeyPress.add(function(n,p){if(p.keyCode==13&&!p.shiftKey){if(!k.insertPara(p)){b.cancel(p)}}});if(a){j.onKeyDown.add(function(n,p){if((p.keyCode==8||p.keyCode==46)&&!p.shiftKey){k.backspaceDelete(p,p.keyCode==8)}})}}function m(p,n){var q=j.dom.create(n);g(p.attributes,function(r){if(r.specified&&r.nodeValue){q.setAttribute(r.nodeName.toLowerCase(),r.nodeValue)}});g(p.childNodes,function(r){q.appendChild(r.cloneNode(true))});p.parentNode.replaceChild(q,p);return q}j.onPreProcess.add(function(n,p){g(n.dom.select("p,h1,h2,h3,h4,h5,h6,div",p.node),function(q){if(h(q)){g(n.dom.select("span,em,strong,b,i",p.node),function(r){if(!r.hasChildNodes()){r.appendChild(n.getDoc().createTextNode("\u00a0"));return false}})}})});if(e){if(l.element!="P"){j.onKeyPress.add(function(n,p){k.lastElm=n.selection.getNode().nodeName});j.onKeyUp.add(function(q,s){var u,r=q.selection,t=r.getNode(),p=q.getBody();if(p.childNodes.length===1&&t.nodeName=="P"){t=m(t,l.element);r.select(t);r.collapse();q.nodeChanged()}else{if(s.keyCode==13&&!s.shiftKey&&k.lastElm!="P"){u=q.dom.getParent(t,"p");if(u){m(u,l.element);q.nodeChanged()}}}})}}},find:function(q,l,m){var k=this.editor,j=k.getDoc().createTreeWalker(q,4,null,false),p=-1;while(q=j.nextNode()){p++;if(l==0&&q==m){return p}if(l==1&&p==m){return q}}return -1},forceRoots:function(q,E){var v=this,q=v.editor,I=q.getBody(),F=q.getDoc(),L=q.selection,w=L.getSel(),x=L.getRng(),J=-2,p,C,j,k,G=-16777215;var H,l,K,B,y,m=I.childNodes,A,z,u;for(A=m.length-1;A>=0;A--){H=m[A];if(H.nodeType==3||(!v.dom.isBlock(H)&&H.nodeType!=8)){if(!l){if(H.nodeType!=3||/[^\s]/g.test(H.nodeValue)){if(J==-2&&x){if(!e){if(x.startContainer.nodeType==1&&(z=x.startContainer.childNodes[x.startOffset])&&z.nodeType==1){u=z.getAttribute("id");z.setAttribute("id","__mce")}else{if(q.dom.getParent(x.startContainer,function(n){return n===I})){C=x.startOffset;j=x.endOffset;J=v.find(I,0,x.startContainer);p=v.find(I,0,x.endContainer)}}}else{k=F.body.createTextRange();k.moveToElementText(I);k.collapse(1);K=k.move("character",G)*-1;k=x.duplicate();k.collapse(1);B=k.move("character",G)*-1;k=x.duplicate();k.collapse(0);y=(k.move("character",G)*-1)-B;J=B-K;p=y}}l=q.dom.create(q.settings.forced_root_block);l.appendChild(H.cloneNode(1));H.parentNode.replaceChild(l,H)}}else{if(l.hasChildNodes()){l.insertBefore(H,l.firstChild)}else{l.appendChild(H)}}}else{l=null}}if(J!=-2){if(!e){l=I.getElementsByTagName(q.settings.element)[0];x=F.createRange();if(J!=-1){x.setStart(v.find(I,1,J),C)}else{x.setStart(l,0)}if(p!=-1){x.setEnd(v.find(I,1,p),j)}else{x.setEnd(l,0)}if(w){w.removeAllRanges();w.addRange(x)}}else{try{x=w.createRange();x.moveToElementText(I);x.collapse(1);x.moveStart("character",J);x.moveEnd("character",p);x.select()}catch(D){}}}else{if(!e&&(z=q.dom.get("__mce"))){if(u){z.setAttribute("id",u)}else{z.removeAttribute("id")}x=F.createRange();x.setStartBefore(z);x.setEndBefore(z);L.setRng(x)}}},getParentBlock:function(k){var j=this.dom;return j.getParent(k,j.isBlock)},insertPara:function(O){var C=this,q=C.editor,K=q.dom,P=q.getDoc(),T=q.settings,D=q.selection.getSel(),E=D.getRangeAt(0),S=P.body;var H,I,F,M,L,m,k,p,v,j,A,R,l,u,G,J=K.getViewPort(q.getWin()),z,B,x;H=P.createRange();H.setStart(D.anchorNode,D.anchorOffset);H.collapse(true);I=P.createRange();I.setStart(D.focusNode,D.focusOffset);I.collapse(true);F=H.compareBoundaryPoints(H.START_TO_END,I)<0;M=F?D.anchorNode:D.focusNode;L=F?D.anchorOffset:D.focusOffset;m=F?D.focusNode:D.anchorNode;k=F?D.focusOffset:D.anchorOffset;if(M===m&&/^(TD|TH)$/.test(M.nodeName)){if(M.firstChild.nodeName=="BR"){K.remove(M.firstChild)}if(M.childNodes.length==0){q.dom.add(M,T.element,null,"<br />");R=q.dom.add(M,T.element,null,"<br />")}else{G=M.innerHTML;M.innerHTML="";q.dom.add(M,T.element,null,G);R=q.dom.add(M,T.element,null,"<br />")}E=P.createRange();E.selectNodeContents(R);E.collapse(1);q.selection.setRng(E);return false}if(M==S&&m==S&&S.firstChild&&q.dom.isBlock(S.firstChild)){M=m=M.firstChild;L=k=0;H=P.createRange();H.setStart(M,0);I=P.createRange();I.setStart(m,0)}M=M.nodeName=="HTML"?P.body:M;M=M.nodeName=="BODY"?M.firstChild:M;m=m.nodeName=="HTML"?P.body:m;m=m.nodeName=="BODY"?m.firstChild:m;p=C.getParentBlock(M);v=C.getParentBlock(m);j=p?p.nodeName:T.element;if(C.dom.getParent(p,"ol,ul,pre")){return true}if(p&&(p.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(K.getStyle(p,"position",1)))){j=T.element;p=null}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(K.getStyle(p,"position",1)))){j=T.element;v=null}if(/(TD|TABLE|TH|CAPTION)/.test(j)||(p&&j=="DIV"&&/left|right/gi.test(K.getStyle(p,"float",1)))){j=T.element;p=v=null}A=(p&&p.nodeName==j)?p.cloneNode(0):q.dom.create(j);R=(v&&v.nodeName==j)?v.cloneNode(0):q.dom.create(j);R.removeAttribute("id");if(/^(H[1-6])$/.test(j)&&M.nodeValue&&L==M.nodeValue.length){R=q.dom.create(T.element)}G=l=M;do{if(G==S||G.nodeType==9||C.dom.isBlock(G)||/(TD|TABLE|TH|CAPTION)/.test(G.nodeName)){break}l=G}while((G=G.previousSibling?G.previousSibling:G.parentNode));G=u=m;do{if(G==S||G.nodeType==9||C.dom.isBlock(G)||/(TD|TABLE|TH|CAPTION)/.test(G.nodeName)){break}u=G}while((G=G.nextSibling?G.nextSibling:G.parentNode));if(l.nodeName==j){H.setStart(l,0)}else{H.setStartBefore(l)}H.setEnd(M,L);A.appendChild(H.cloneContents()||P.createTextNode(""));try{I.setEndAfter(u)}catch(N){}I.setStart(m,k);R.appendChild(I.cloneContents()||P.createTextNode(""));E=P.createRange();if(!l.previousSibling&&l.parentNode.nodeName==j){E.setStartBefore(l.parentNode)}else{if(H.startContainer.nodeName==j&&H.startOffset==0){E.setStartBefore(H.startContainer)}else{E.setStart(H.startContainer,H.startOffset)}}if(!u.nextSibling&&u.parentNode.nodeName==j){E.setEndAfter(u.parentNode)}else{E.setEnd(I.endContainer,I.endOffset)}E.deleteContents();if(c){q.getWin().scrollTo(0,J.y)}if(A.firstChild&&A.firstChild.nodeName==j){A.innerHTML=A.firstChild.innerHTML}if(R.firstChild&&R.firstChild.nodeName==j){R.innerHTML=R.firstChild.innerHTML}if(h(A)){A.innerHTML="<br />"}function Q(y,s){var r=[],V,U,t;y.innerHTML="";if(T.keep_styles){U=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(U.nodeName)){V=U.cloneNode(false);K.setAttrib(V,"id","");r.push(V)}}while(U=U.parentNode)}if(r.length>0){for(t=r.length-1,V=y;t>=0;t--){V=V.appendChild(r[t])}r[0].innerHTML=c?"&nbsp;":"<br />";return r[0]}else{y.innerHTML=c?"&nbsp;":"<br />"}}if(h(R)){x=Q(R,m)}if(c&&parseFloat(opera.version())<9.5){E.insertNode(A);E.insertNode(R)}else{E.insertNode(R);E.insertNode(A)}R.normalize();A.normalize();function w(r){return P.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,false).nextNode()||r}E=P.createRange();E.selectNodeContents(a?w(x||R):x||R);E.collapse(1);D.removeAllRanges();D.addRange(E);z=q.dom.getPos(R).y;B=R.clientHeight;if(z<J.y||z+B>J.y+J.h){q.getWin().scrollTo(0,z<J.y?z:z-J.h+25)}return false},backspaceDelete:function(m,x){var z=this,l=z.editor,s=l.getBody(),k,p=l.selection,j=p.getRng(),q=j.startContainer,k,u,v;if(q&&l.dom.isBlock(q)&&!/^(TD|TH)$/.test(q.nodeName)&&x){if(q.childNodes.length==0||(q.childNodes.length==1&&q.firstChild.nodeName=="BR")){k=q;while((k=k.previousSibling)&&!l.dom.isBlock(k)){}if(k){if(q!=s.firstChild){u=l.dom.doc.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,false);while(v=u.nextNode()){k=v}j=l.getDoc().createRange();j.setStart(k,k.nodeValue?k.nodeValue.length:0);j.setEnd(k,k.nodeValue?k.nodeValue.length:0);p.setRng(j);l.dom.remove(q)}return b.cancel(m)}}}function y(n){var r;n=n.target;if(n&&n.parentNode&&n.nodeName=="BR"&&(k=z.getParentBlock(n))){r=n.previousSibling;b.remove(s,"DOMNodeInserted",y);if(r&&r.nodeType==3&&/\s+$/.test(r.nodeValue)){return}if(n.previousSibling||n.nextSibling){l.dom.remove(n)}}}b._add(s,"DOMNodeInserted",y);window.setTimeout(function(){b._remove(s,"DOMNodeInserted",y)},1)}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,e=c.each,f=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(g,k){var j=this,h;k=k||{};j.editor=g;j.controls={};j.onAdd=new c.util.Dispatcher(j);j.onPostRender=new c.util.Dispatcher(j);j.prefix=k.prefix||g.id+"_";j._cls={};j.onPostRender.add(function(){e(j.controls,function(i){i.postRender()})})},get:function(g){return this.controls[this.prefix+g]||this.controls[g]},setActive:function(i,g){var h=null;if(h=this.get(i)){h.setActive(g)}return h},setDisabled:function(i,g){var h=null;if(h=this.get(i)){h.setDisabled(g)}return h},add:function(h){var g=this;if(h){g.controls[h.id]=h;g.onAdd.dispatch(h,g)}return h},createControl:function(j){var i,h=this,g=h.editor;e(g.plugins,function(k){if(k.createControl){i=k.createControl(j,h);if(i){return false}}});switch(j){case"|":case"separator":return h.createSeparator()}if(!i&&g.buttons&&(i=g.buttons[j])){return h.createButton(j,i)}return h.add(i)},createDropMenu:function(g,p,i){var n=this,j=n.editor,k,h,l,m;p=f({"class":"mceDropDown",constrain:j.settings.constrain_menus},p);p["class"]=p["class"]+" "+j.getParam("skin")+"Skin";if(l=j.getParam("skin_variant")){p["class"]+=" "+j.getParam("skin")+"Skin"+l.substring(0,1).toUpperCase()+l.substring(1)}g=n.prefix+g;m=i||n._cls.dropmenu||c.ui.DropMenu;k=n.controls[g]=new m(g,p);k.onAddItem.add(function(t,r){var q=r.settings;q.title=j.getLang(q.title,q.title);if(!q.onclick){q.onclick=function(s){j.execCommand(q.cmd,q.ui||false,q.value)}}});j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();h=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(h){j.selection.moveToBookmark(h);h=0}})}return n.add(k)},createListBox:function(n,j,m){var i=this,h=i.editor,k,l,g;if(i.get(n)){return null}j.title=h.translate(j.title);j.scope=j.scope||h;if(!j.onselect){j.onselect=function(p){h.execCommand(j.cmd,j.ui||false,p||j.value)}}j=f({title:j.title,"class":"mce_"+n,scope:j.scope,control_manager:i},j);n=i.prefix+n;if(h.settings.use_native_selects){l=new c.ui.NativeListBox(n,j)}else{g=m||i._cls.listbox||c.ui.ListBox;l=new g(n,j)}i.controls[n]=l;if(c.isWebKit){l.onPostRender.add(function(q,p){a.add(p,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)});a.add(p,"focus",function(){h.selection.moveToBookmark(h.bookmark);h.bookmark=null})})}if(l.hideMenu){h.onMouseDown.add(l.hideMenu,l)}return i.add(l)},createButton:function(n,j,m){var i=this,h=i.editor,k,l,g;if(i.get(n)){return null}j.title=h.translate(j.title);j.label=h.translate(j.label);j.scope=j.scope||h;if(!j.onclick&&!j.menu_button){j.onclick=function(){h.execCommand(j.cmd,j.ui||false,j.value)}}j=f({title:j.title,"class":"mce_"+n,unavailable_prefix:h.getLang("unavailable",""),scope:j.scope,control_manager:i},j);n=i.prefix+n;if(j.menu_button){g=m||i._cls.menubutton||c.ui.MenuButton;l=new g(n,j);h.onMouseDown.add(l.hideMenu,l)}else{g=i._cls.button||c.ui.Button;l=new g(n,j)}return i.add(l)},createMenuButton:function(i,g,h){g=g||{};g.menu_button=1;return this.createButton(i,g,h)},createSplitButton:function(n,j,m){var i=this,h=i.editor,k,l,g;if(i.get(n)){return null}j.title=h.translate(j.title);j.scope=j.scope||h;if(!j.onclick){j.onclick=function(p){h.execCommand(j.cmd,j.ui||false,p||j.value)}}if(!j.onselect){j.onselect=function(p){h.execCommand(j.cmd,j.ui||false,p||j.value)}}j=f({title:j.title,"class":"mce_"+n,scope:j.scope,control_manager:i},j);n=i.prefix+n;g=m||i._cls.splitbutton||c.ui.SplitButton;l=i.add(new g(n,j));h.onMouseDown.add(l.hideMenu,l);return l},createColorSplitButton:function(g,p,i){var m=this,k=m.editor,j,l,n,h;if(m.get(g)){return null}p.title=k.translate(p.title);p.scope=p.scope||k;if(!p.onclick){p.onclick=function(q){if(c.isIE){h=k.selection.getBookmark(1)}k.execCommand(p.cmd,p.ui||false,q||p.value)}}if(!p.onselect){p.onselect=function(q){k.execCommand(p.cmd,p.ui||false,q||p.value)}}p=f({title:p.title,"class":"mce_"+g,menu_class:k.getParam("skin")+"Skin",scope:p.scope,more_colors_title:k.getLang("more_colors")},p);g=m.prefix+g;n=i||m._cls.colorsplitbutton||c.ui.ColorSplitButton;l=new n(g,p);k.onMouseDown.add(l.hideMenu,l);k.onRemove.add(function(){l.destroy()});if(c.isIE){l.onShowMenu.add(function(){k.focus();h=k.selection.getBookmark(1)});l.onHideMenu.add(function(){if(h){k.selection.moveToBookmark(h);h=0}})}return m.add(l)},createToolbar:function(l,i,k){var j,h=this,g;l=h.prefix+l;g=k||h._cls.toolbar||c.ui.Toolbar;j=new g(l,i);if(h.get(l)){return null}return h.add(j)},createSeparator:function(h){var g=h||this._cls.separator||c.ui.Separator;return new g()},setControlType:function(h,g){return this._cls[h.toLowerCase()]=g},destroy:function(){e(this.controls,function(g){g.destroy()});this.controls=null}})})(tinymce);(function(e){var a=e.util.Dispatcher,f=e.each,c=e.isIE,b=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(g){var h=this;h.editor=g;h.onOpen=new a(h);h.onClose=new a(h);h.params={};h.features={}},open:function(A,h){var z=this,k="",n,m,i=z.editor.settings.dialog_type=="modal",r,q,j,g=e.DOM.getViewPort(),v;A=A||{};h=h||{};q=b?g.w:screen.width;j=b?g.h:screen.height;A.name=A.name||"mc_"+new Date().getTime();A.width=parseInt(A.width||320);A.height=parseInt(A.height||240);A.resizable=true;A.left=A.left||parseInt(q/2)-(A.width/2);A.top=A.top||parseInt(j/2)-(A.height/2);h.inline=false;h.mce_width=A.width;h.mce_height=A.height;h.mce_auto_focus=A.auto_focus;if(i){if(c){A.center=true;A.help=false;A.dialogWidth=A.width+"px";A.dialogHeight=A.height+"px";A.scroll=A.scrollbars||false}}f(A,function(s,p){if(e.is(s,"boolean")){s=s?"yes":"no"}if(!/^(name|url)$/.test(p)){if(c&&i){k+=(k?";":"")+p+":"+s}else{k+=(k?",":"")+p+"="+s}}});z.features=A;z.params=h;z.onOpen.dispatch(z,A,h);v=A.url||A.file;v=e._addVer(v);try{if(c&&i){r=1;window.showModalDialog(v,window,k)}else{r=window.open(v,A.name,k)}}catch(l){}if(!r){alert(z.editor.getLang("popup_blocked"))}},close:function(g){g.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=e.resolve(i);return new j(h,g,m,l,k)},confirm:function(i,g,j,h){h=h||window;g.call(j||this,h.confirm(this._decode(this.editor.getLang(i,i))))},alert:function(i,g,k,h){var j=this;h=h||window;h.alert(j._decode(j.editor.getLang(i,i)));if(g){g.call(k||j)}},_decode:function(g){return e.DOM.decode(g).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.CommandManager=function(){var c={},b={},e={};function f(j,i,h,g){if(typeof(i)=="string"){i=[i]}a.each(i,function(k){j[k.toLowerCase()]={func:h,scope:g}})}a.extend(this,{add:function(i,h,g){f(c,i,h,g)},addQueryStateHandler:function(i,h,g){f(b,i,h,g)},addQueryValueHandler:function(i,h,g){f(e,i,h,g)},execCommand:function(h,k,j,i,g){if(k=c[k.toLowerCase()]){if(k.func.call(h||k.scope,j,i,g)!==false){return true}}},queryCommandValue:function(){if(cmd=e[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}},queryCommandState:function(){if(cmd=b[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}}})};a.GlobalCommands=new a.CommandManager()})(tinymce);(function(b){function a(j,e,i,p){var k,h,f,m,g;function l(r,q){do{if(r.parentNode==q){return r}r=r.parentNode}while(r)}function c(q){p(q);b.walk(q,p,"childNodes")}k=j.findCommonAncestor(e,i);f=l(e,k)||e;m=l(i,k)||i;for(h=e;h&&h!=f;h=h.parentNode){for(g=h.nextSibling;g;g=g.nextSibling){c(g)}}if(f!=m){for(h=f.nextSibling;h&&h!=m;h=h.nextSibling){c(h)}}else{c(f)}for(h=i;h&&h!=m;h=h.parentNode){for(g=h.previousSibling;g;g=g.previousSibling){c(g)}}}b.GlobalCommands.add("RemoveFormat",function(){var p=this,m=p.dom,w=p.selection,e=w.getRng(1),f=[],i,g,k,u,h,q,c,j;function l(s){var r;m.getParent(s,function(x){if(m.is(x,p.getParam("removeformat_selector"))){r=x}return m.isBlock(x)},p.getBody());return r}function t(r){if(m.is(r,p.getParam("removeformat_selector"))){f.push(r)}}function v(r){t(r);b.walk(r,t,"childNodes")}i=w.getBookmark();u=e.startContainer;q=e.endContainer;h=e.startOffset;c=e.endOffset;u=u.nodeType==1?u.childNodes[Math.min(h,u.childNodes.length-1)]:u;q=q.nodeType==1?q.childNodes[Math.min(h==c?c:c-1,q.childNodes.length-1)]:q;if(u==q){g=l(u);if(u.nodeType==3){if(g&&g.nodeType==1){j=u.splitText(h);j.splitText(c-h);m.split(g,j);w.moveToBookmark(i)}return}v(m.split(g,u)||u)}else{g=l(u);k=l(q);if(g){if(u.nodeType==3){if(h==u.nodeValue.length){u.nodeValue+="\uFEFF"}u=u.splitText(h)}}if(k){if(q.nodeType==3){q.splitText(c)}}if(g&&g==k){m.replace(m.create("span",{id:"__end"},q.cloneNode(true)),q)}if(g){g=m.split(g,u)}else{g=u}if(j=m.get("__end")){q=j;k=l(q)}if(k){k=m.split(k,q)}else{k=q}a(m,g,k,t);if(u.nodeValue=="\uFEFF"){u.nodeValue=""}v(q);v(u)}b.each(f,function(r){m.remove(r,1)});m.remove("__end",1);w.moveToBookmark(i)})})(tinymce);(function(a){a.GlobalCommands.add("mceBlockQuote",function(){var k=this,q=k.selection,g=k.dom,m,l,f,e,t,c,p,j,b;function h(i){return g.getParent(i,function(r){return r.nodeName==="BLOCKQUOTE"})}m=g.getParent(q.getStart(),g.isBlock);l=g.getParent(q.getEnd(),g.isBlock);if(t=h(m)){if(m!=l||m.childNodes.length>1||(m.childNodes.length==1&&m.firstChild.nodeName!="BR")){e=q.getBookmark()}if(h(l)){p=t.cloneNode(false);while(f=l.nextSibling){p.appendChild(f.parentNode.removeChild(f))}}if(p){g.insertAfter(p,t)}b=q.getSelectedBlocks(m,l);for(j=b.length-1;j>=0;j--){g.insertAfter(b[j],t)}if(/^\s*$/.test(t.innerHTML)){g.remove(t,1)}if(p&&/^\s*$/.test(p.innerHTML)){g.remove(p,1)}if(!e){if(!a.isIE){c=k.getDoc().createRange();c.setStart(m,0);c.setEnd(m,0);q.setRng(c)}else{q.select(m);q.collapse(0);if(g.getParent(q.getStart(),g.isBlock)!=m){c=q.getRng();c.move("character",-1);c.select()}}}else{k.selection.moveToBookmark(e)}return}if(a.isIE&&!m&&!l){k.getDoc().execCommand("Indent");f=h(q.getNode());f.style.margin=f.dir="";return}if(!m||!l){return}if(m!=l||m.childNodes.length>1||(m.childNodes.length==1&&m.firstChild.nodeName!="BR")){e=q.getBookmark()}a.each(q.getSelectedBlocks(h(q.getStart()),h(q.getEnd())),function(i){if(i.nodeName=="BLOCKQUOTE"&&!t){t=i;return}if(!t){t=g.create("blockquote");i.parentNode.insertBefore(t,i)}if(i.nodeName=="BLOCKQUOTE"&&t){f=i.firstChild;while(f){t.appendChild(f.cloneNode(true));f=f.nextSibling}g.remove(i);return}t.appendChild(g.remove(i))});if(!e){if(!a.isIE){c=k.getDoc().createRange();c.setStart(m,0);c.setEnd(m,0);q.setRng(c)}else{q.select(m);q.collapse(1)}}else{q.moveToBookmark(e)}})})(tinymce);(function(a){a.each(["Cut","Copy","Paste"],function(b){a.GlobalCommands.add(b,function(){var c=this,f=c.getDoc();try{f.execCommand(b,false,null);if(!f.queryCommandSupported(b)){throw"Error"}}catch(e){c.windowManager.alert(c.getLang("clipboard_no_support"))}})})})(tinymce);(function(a){a.GlobalCommands.add("InsertHorizontalRule",function(){if(a.isOpera){return this.getDoc().execCommand("InsertHorizontalRule",false,"")}this.selection.setContent("<hr />")})})(tinymce);(function(){var a=tinymce.GlobalCommands;a.add(["mceEndUndoLevel","mceAddUndoLevel"],function(){this.undoManager.add()});a.add("Undo",function(){var b=this;if(b.settings.custom_undo_redo){b.undoManager.undo();b.nodeChanged();return true}return false});a.add("Redo",function(){var b=this;if(b.settings.custom_undo_redo){b.undoManager.redo();b.nodeChanged();return true}return false})})();(function(){Ext.namespace("Ext.ux");var c=false;Ext.ux.TinyMCE=Ext.extend(function(e){var f={tinymceSettings:{accessibility_focus:false}};Ext.apply(f,e);this.addEvents({editorcreated:true});Ext.ux.TinyMCE.superclass.constructor.call(this,f)},Ext.form.Field,{tinymceSettings:null,defaultAutoCreate:{tag:"div",style:{overflow:"hidden"},children:[{tag:"textarea"}]},width:200,height:200,initComponent:function(){this.tinymceSettings=this.tinymceSettings||{};Ext.ux.TinyMCE.initTinyMCE({language:this.tinymceSettings.language})},reInit:function(){tinyMCE.execCommand("mceRemoveControl",false,this.textareaEl.id);this.initTinyMce();this.onResize()},onRender:function(f,e){Ext.ux.TinyMCE.superclass.onRender.call(this,f,e);var g=this.getEl();if(Ext.type(this.width)=="number"){g.setWidth(this.width);this.tinymceSettings.width=this.width}if(Ext.type(this.height)=="number"){g.setHeight(this.height);this.tinymceSettings.height=this.height}this.textareaEl=g.child("textarea");if(this.name){this.textareaEl.set({name:this.name})}this.initTinyMce()},initTinyMce:function(){this.ed=new tinymce.Editor(this.textareaEl.id,this.tinymceSettings);this.ed.onBeforeRenderUI.add(function(f,e){f.controlManager=new a(this,f)}.createDelegate(this));this.ed.onPostRender.add(function(f,e){f.windowManager=new b(this.ed)}.createDelegate(this));this.ed.onInit.add(function(){var f=Ext.get(Ext.DomQuery.selectNode("#"+this.ed.id+"_tbl td.mceToolbar"));var e=f.select("> table.mceToolbar");Ext.DomHelper.append(f,{tag:"div",style:{overflow:"hidden"}},true).appendChild(e)}.createDelegate(this));this.ed.render();tinyMCE.add(this.ed);this.fireEvent("editorcreated")},getName:function(){return this.rendered&&this.textareaEl.dom.name?this.textareaEl.dom.name:(this.name||"")},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{var e=this.getEl().child("textarea",true);if(e.value.length>0){this.setValue(e.value)}}},onDestroy:function(){if(this.ed){tinyMCE.remove(this.ed)}Ext.ux.TinyMCE.superclass.onDestroy.call(this)},getValue:function(){if(!this.rendered||!this.ed.initialized){return this.value}var e=this.ed.getContent();if(e===this.emptyText||e===undefined){e=""}return e},setValue:function(e){this.value=e;if(this.rendered){this.withEd(function(){this.ed.undoManager.clear();this.ed.setContent(e===null||e===undefined?"":e);this.ed.startContent=this.ed.getContent({format:"raw"});this.validate()})}},isDirty:function(){if(this.disabled||!this.rendered){return false}return this.ed.isDirty()},syncValue:function(){if(this.rendered&&this.ed.initialized){this.ed.save()}},getEd:function(){return this.ed},onResize:function(f,e){if(this.rendered){this.withEd(function(){if(Ext.type(f)!="number"){f=this.el.getWidth()}if(Ext.type(e)!="number"){e=this.el.getHeight()}this.ed.theme.resizeTo(f,e)})}},focus:function(f,e){Ext.ux.TinyMCE.superclass.focus.call(this,f,e)},onFocus:function(){if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.withEd(function(){this.ed.focus();this.fireEvent("focus",this)})}},withEd:function(e){if(!this.ed){this.on("editorcreated",function(){this.withEd(e)},this)}else{if(this.ed.initialized){e.call(this)}else{this.ed.onInit.add(function(){e.defer(10,this)}.createDelegate(this))}}}});Ext.apply(Ext.ux.TinyMCE,{tinymcePlugins:"safari,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template",initTinyMCE:function(f){if(!c){var e={mode:"none",plugins:Ext.ux.TinyMCE.tinymcePlugins,theme:"advanced"};Ext.apply(e,f);tinyMCE.init(e);c=true}}});Ext.ComponentMgr.registerType("tinymce",Ext.ux.TinyMCE);var b=Ext.extend(function(e){b.superclass.constructor.call(this,e)},tinymce.WindowManager,{alert:function(f,e,g){Ext.MessageBox.alert("",f,function(){e.call(this)},g)},confirm:function(f,e,g){Ext.MessageBox.confirm("",f,function(h){e.call(this,h=="yes")},g)},open:function(e,g){e=e||{};g=g||{};if(!e.type){this.bookmark=this.editor.selection.getBookmark("simple")}e.width=parseInt(e.width||320);e.height=parseInt(e.height||240)+(tinymce.isIE?8:0);e.min_width=parseInt(e.min_width||150);e.min_height=parseInt(e.min_height||100);e.max_width=parseInt(e.max_width||2000);e.max_height=parseInt(e.max_height||2000);e.movable=e.resizable=true;g.mce_width=e.width;g.mce_height=e.height;g.mce_inline=true;this.features=e;this.params=g;var f=new Ext.Window({title:e.name,width:e.width,height:e.height,minWidth:e.min_width,minHeight:e.min_height,resizable:true,maximizable:e.maximizable==true,minimizable:e.minimizable==true,modal:true,layout:"fit",items:[{xtype:"iframepanel",defaultSrc:e.url||e.file}]});g.mce_window_id=f.getId();f.show(null,function(){if(e.left&&e.top){f.setPagePosition(e.left,e.top)}var h=f.getPosition();e.left=h[0];e.top=h[1];this.onOpen.dispatch(this,e,g)},this);return f},close:function(f){if(!f.tinyMCEPopup||!f.tinyMCEPopup.id){b.superclass.close.call(this,f);return}var e=Ext.getCmp(f.tinyMCEPopup.id);if(e){this.onClose.dispatch(this);e.close()}},setTitle:function(g,f){if(!g.tinyMCEPopup||!g.tinyMCEPopup.id){b.superclass.setTitle.call(this,g,f);return}var e=Ext.getCmp(g.tinyMCEPopup.id);if(e){e.setTitle(f)}},resizeBy:function(f,h,i){var e=Ext.getCmp(i);if(e){var g=e.getSize();e.setSize(g.width+f,g.height+h)}},focus:function(f){var e=Ext.getCmp(f);if(e){e.setActive(true)}}});var a=Ext.extend(function(g,e,f){this.control=g;a.superclass.constructor.call(this,e,f)},tinymce.ControlManager,{control:null,createDropMenu:function(h,f){var e=a.superclass.createDropMenu.call(this,h,f);var g=e.showMenu;e.showMenu=function(i,k,j){g.call(this,i,k,j);Ext.fly("menu_"+this.id).setStyle("z-index",200001)};return e},createColorSplitButton:function(h,f){var e=a.superclass.createColorSplitButton.call(this,h,f);var g=e.showMenu;e.showMenu=function(i,k,j){g.call(this,i,k,j);Ext.fly(this.id+"_menu").setStyle("z-index",200001)};return e}})}());GO.cms.SitesDialog=function(a){if(!a){a={}}this.sitesGrid=new GO.cms.SitesGrid();a.layout="fit";a.modal=false;a.resizable=false;a.width=500;a.height=400;a.closeAction="hide";a.title=GO.cms.lang.sites;a.items=this.sitesGrid;a.buttons=[{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.cms.SitesDialog.superclass.constructor.call(this,a)};Ext.extend(GO.cms.SitesDialog,Ext.Window,{show:function(){if(!this.sitesGrid.store.loaded){this.sitesGrid.store.load()}GO.cms.SitesDialog.superclass.show.call(this)}});GO.cms.SitesGrid=function(a){if(!a){a={}}a.border=false;a.layout="fit";a.autoScroll=true;a.split=true;a.store=new GO.data.JsonStore({url:GO.settings.modules.cms.url+"json.php",baseParams:{task:"sites"},root:"results",id:"id",totalProperty:"total",fields:["id","user_name","acl_write","allow_properties","domain","webmaster","publish_style","publish_path","template_id","root_folder_id","start_file_id","language","name"],remoteSort:true});a.paging=true;var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:GO.lang.strName,dataIndex:"name"}]});a.cm=b;a.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});a.sm=new Ext.grid.RowSelectionModel();a.loadMask=true;this.siteDialog=new GO.cms.SiteDialog();this.siteDialog.on("save",function(){this.store.reload()},this);a.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.siteDialog.show()},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected()},scope:this}];GO.cms.SitesGrid.superclass.constructor.call(this,a);this.on("rowdblclick",function(e,f){var c=e.getStore().getAt(f);this.siteDialog.show(c.data.id)},this)};Ext.extend(GO.cms.SitesGrid,GO.grid.GridPanel,{loaded:false,afterRender:function(){GO.cms.SitesGrid.superclass.afterRender.call(this);if(this.isVisible()){this.onGridShow()}},onGridShow:function(){if(!this.loaded&&this.rendered){this.store.load();this.loaded=true}}});GO.cms.SiteDialog=function(b){if(!b){b={}}this.buildForm();var a=function(){this.propertiesPanel.items.items[0].focus()};b.maximizable=true;b.layout="fit";b.modal=false;b.resizable=false;b.width=400;b.height=400;b.closeAction="hide";b.title=GO.cms.lang.site;b.items=this.formPanel;b.focus=a.createDelegate(this);b.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdApply,handler:function(){this.submitForm()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.cms.SiteDialog.superclass.constructor.call(this,b);this.addEvents({save:true})};Ext.extend(GO.cms.SiteDialog,Ext.Window,{show:function(a){if(!this.rendered){this.render(Ext.getBody())}this.tabPanel.setActiveTab(0);if(!a){a=0}this.setSiteId(a);if(this.site_id>0){this.formPanel.load({url:GO.settings.modules.cms.url+"json.php",success:function(b,c){this.writePermissionsTab.setAcl(c.result.data.acl_write);GO.cms.SiteDialog.superclass.show.call(this)},failure:function(b,c){Ext.Msg.alert(GO.lang.strError,c.result.feedback)},scope:this})}else{this.formPanel.form.reset();this.writePermissionsTab.setAcl(0);GO.cms.SiteDialog.superclass.show.call(this)}},setSiteId:function(a){this.formPanel.form.baseParams.site_id=a;this.site_id=a},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.cms.url+"action.php",params:{task:"save_site"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){this.fireEvent("save",this);if(a){this.hide()}else{if(c.result.site_id){this.setSiteId(c.result.site_id);this.writePermissionsTab.setAcl(c.result.acl_write)}}},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},buildForm:function(){this.propertiesPanel=new Ext.Panel({title:GO.lang.strProperties,cls:"go-form-panel",waitMsgTarget:true,layout:"form",autoScroll:true,items:[{xtype:"textfield",name:"name",anchor:"-20",allowBlank:false,fieldLabel:GO.lang.strName},{xtype:"textfield",name:"domain",anchor:"-20",allowBlank:false,fieldLabel:GO.cms.lang.domain},{xtype:"textfield",name:"webmaster",anchor:"-20",allowBlank:false,fieldLabel:GO.cms.lang.webmaster},new Ext.form.ComboBox({fieldLabel:GO.cms.lang.template,hiddenName:"template",store:new GO.data.JsonStore({fields:["name"],url:GO.settings.modules.cms.url+"json.php",root:"results",baseParams:{task:"templates"}}),valueField:"name",displayField:"name",mode:"remote",triggerAction:"all",editable:false,forceSelection:true,anchor:"-20",allowBlank:false}),new Ext.form.ComboBox({fieldLabel:GO.lang.strLanguage,name:"language",store:new Ext.data.SimpleStore({fields:["id","language"],data:GO.Languages}),displayField:"language",valueField:"id",hiddenName:"language",mode:"local",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,value:GO.settings.language}),{xtype:"plainfield",fieldLabel:GO.cms.lang.siteId,name:"id"}]});var a=[this.propertiesPanel];this.writePermissionsTab=new GO.grid.PermissionsPanel({title:GO.lang.strWritePermissions});a.push(this.writePermissionsTab);this.tabPanel=new Ext.TabPanel({activeTab:0,deferredRender:false,border:false,items:a,anchor:"100% 100%"});this.formPanel=new Ext.form.FormPanel({waitMsgTarget:true,url:GO.settings.modules.cms.url+"action.php",border:false,baseParams:{task:"site"},items:this.tabPanel})}});GO.cms.FoldersGrid=function(a){if(!a){a={}}a.title=GO.cms.lang.folders;a.layout="fit";a.autoScroll=true;a.split=true;a.store=new GO.data.JsonStore({url:GO.settings.modules.cms.url+"json.php",baseParams:{task:"folders",site_id:0},root:"results",id:"id",totalProperty:"total",fields:["id","parent_id","ctime","mtime","name","disabled","priority","multipage","template_item_id","acl"],remoteSort:true});a.paging=true;var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:GO.cms.lang.parentId,dataIndex:"parent_id"},{header:GO.lang.strCtime,dataIndex:"ctime"},{header:GO.lang.strMtime,dataIndex:"mtime"},{header:GO.lang.strName,dataIndex:"name"},{header:GO.cms.lang.disabled,dataIndex:"disabled"},{header:GO.cms.lang.priority,dataIndex:"priority"},{header:GO.cms.lang.multipage,dataIndex:"multipage"},{header:GO.cms.lang.templateItemId,dataIndex:"template_item_id"},{header:GO.cms.lang.acl,dataIndex:"acl"}]});a.cm=b;a.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});a.sm=new Ext.grid.RowSelectionModel();a.loadMask=true;this.folderDialog=new GO.cms.FolderDialog();this.folderDialog.on("save",function(){this.store.reload()},this);a.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.folderDialog.show();this.folderDialog.formPanel.form.setValues({site_id:this.store.baseParams.site_id})},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected()},scope:this}];GO.cms.FoldersGrid.superclass.constructor.call(this,a);this.on("rowdblclick",function(e,f){var c=e.getStore().getAt(f);this.folderDialog.show(c.data.id)},this)};Ext.extend(GO.cms.FoldersGrid,GO.grid.GridPanel,{});GO.cms.FolderDialog=function(b){if(!b){b={}}this.buildForm();var a=function(){this.propertiesPanel.items.items[0].focus()};b.maximizable=true;b.layout="fit";b.modal=false;b.resizable=false;b.width=400;b.height=500;b.closeAction="hide";b.title=GO.cms.lang.folder;b.items=this.formPanel;b.focus=a.createDelegate(this);b.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdApply,handler:function(){this.submitForm()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.cms.FolderDialog.superclass.constructor.call(this,b);this.addEvents({save:true})};Ext.extend(GO.cms.FolderDialog,Ext.Window,{nodeAttributes:[],show:function(a,c,b){if(!this.rendered){this.render(Ext.getBody())}this.tabPanel.setActiveTab(0);if(c){this.formPanel.baseParams.parent_id=c}else{delete this.formPanel.baseParams.parent_id}if(b){this.formPanel.baseParams.site_id=b}else{delete this.formPanel.baseParams.site_id}if(!a){a=0}this.setFolderId(a);if(this.folder_id==0){this.formPanel.form.reset();this.writePermissionsTab.setAcl(0)}this.formPanel.load({url:GO.settings.modules.cms.url+"json.php",success:function(e,f){this.formPanel.baseParams.parent_id=f.result.data.parent_id;this.writePermissionsTab.setAcl(f.result.data.acl);this.optionsPanel.loadConfig(f.result.data.config,f.result.data.option_values,f.result.data.type,f.result.data.default_template);GO.cms.FolderDialog.superclass.show.call(this)},failure:function(e,f){Ext.Msg.alert(GO.lang.strError,f.result.feedback)},scope:this})},setFolderId:function(a){this.formPanel.form.baseParams.folder_id=a;this.folder_id=a},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.cms.url+"action.php",params:{task:"save_folder"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){if(c.result.folder_id){this.setFolderId(c.result.folder_id)}if(a){this.hide()}else{if(c.result.folder_id){this.writePermissionsTab.setAcl(c.result.acl)}}this.fireEvent("save",this.folder_id,this.formPanel.form.getValues(),this.formPanel.baseParams.parent_id)},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},buildForm:function(){this.propertiesPanel=new Ext.Panel({title:GO.lang.strProperties,cls:"go-form-panel",waitMsgTarget:true,layout:"form",autoScroll:true,items:[{xtype:"textfield",name:"name",anchor:"-20",allowBlank:false,fieldLabel:GO.lang.strName},{xtype:"checkbox",name:"disabled",anchor:"-20",allowBlank:false,boxLabel:GO.cms.lang.disabled,hideLabel:true},{xtype:"checkbox",name:"authentication",anchor:"-20",allowBlank:false,boxLabel:GO.cms.lang.authentication,hideLabel:true},new Ext.form.FieldSet({title:GO.cms.lang.defaultTemplateOptions,autoHeight:true,items:[this.optionsPanel=new GO.cms.TemplateOptionsPanel({isFolder:true})]})]});var a=[this.propertiesPanel];this.writePermissionsTab=new GO.grid.PermissionsPanel({title:GO.lang.strWritePermissions});a.push(this.writePermissionsTab);this.tabPanel=new Ext.TabPanel({activeTab:0,deferredRender:false,border:false,items:a,anchor:"100% 100%"});this.formPanel=new Ext.form.FormPanel({waitMsgTarget:true,url:GO.settings.modules.cms.url+"action.php",border:false,baseParams:{task:"folder"},items:this.tabPanel})}});GO.cms.CommentsGrid=function(a){if(!a){a={}}a.title=GO.cms.lang.comments;a.layout="fit";a.autoScroll=true;a.split=true;a.store=new GO.data.JsonStore({url:GO.settings.modules.cms.url+"json.php",baseParams:{task:"comments"},root:"results",id:"id",totalProperty:"total",fields:["id","file_id","user_name","name","comments","ctime"],remoteSort:true});a.paging=true;var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:GO.cms.lang.fileId,dataIndex:"file_id"},{header:GO.lang.strOwner,dataIndex:"user_name",sortable:false},{header:GO.lang.strName,dataIndex:"name"},{header:GO.cms.lang.comments,dataIndex:"comments"},{header:GO.lang.strCtime,dataIndex:"ctime"}]});a.cm=b;a.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});a.sm=new Ext.grid.RowSelectionModel();a.loadMask=true;this.commentDialog=new GO.cms.CommentDialog();this.commentDialog.on("save",function(){this.store.reload()},this);a.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.commentDialog.show()},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected()},scope:this}];GO.cms.CommentsGrid.superclass.constructor.call(this,a);this.on("rowdblclick",function(e,f){var c=e.getStore().getAt(f);this.commentDialog.show(c.data.id)},this)};Ext.extend(GO.cms.CommentsGrid,GO.grid.GridPanel,{});GO.cms.CommentDialog=function(b){if(!b){b={}}this.buildForm();var a=function(){this.propertiesPanel.items.items[0].focus()};b.maximizable=true;b.layout="fit";b.modal=false;b.resizable=false;b.width=700;b.height=500;b.closeAction="hide";b.title=GO.cms.lang.comment;b.items=this.formPanel;b.focus=a.createDelegate(this);b.buttons=[{text:GO.lang.cmdOk,handler:function(){this.submitForm(true)},scope:this},{text:GO.lang.cmdApply,handler:function(){this.submitForm()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.cms.CommentDialog.superclass.constructor.call(this,b);this.addEvents({save:true})};Ext.extend(GO.cms.CommentDialog,Ext.Window,{show:function(a){if(!this.rendered){this.render(Ext.getBody())}this.tabPanel.setActiveTab(0);if(!a){a=0}this.setCommentId(a);if(this.comment_id>0){this.formPanel.load({url:GO.settings.modules.cms.url+"json.php",success:function(b,c){this.selectUser.setRemoteText(c.result.data.user_name);GO.cms.CommentDialog.superclass.show.call(this)},failure:function(b,c){Ext.Msg.alert(GO.lang.strError,c.result.feedback)},scope:this})}else{this.formPanel.form.reset();GO.cms.CommentDialog.superclass.show.call(this)}},setCommentId:function(a){this.formPanel.form.baseParams.comment_id=a;this.comment_id=a},submitForm:function(a){this.formPanel.form.submit({url:GO.settings.modules.cms.url+"action.php",params:{task:"save_comment"},waitMsg:GO.lang.waitMsgSave,success:function(b,c){this.fireEvent("save",this);if(a){this.hide()}else{if(c.result.comment_id){this.setCommentId(c.result.comment_id)}}},failure:function(b,c){if(c.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,c.result.feedback)}},scope:this})},buildForm:function(){this.propertiesPanel=new Ext.Panel({title:GO.lang.strProperties,cls:"go-form-panel",waitMsgTarget:true,layout:"form",autoScroll:true,items:[{xtype:"textfield",name:"file_id",anchor:"-20",allowBlank:false,fieldLabel:GO.cms.lang.fileId},this.selectUser=new GO.form.SelectUser({fieldLabel:GO.lang.strUser,disabled:!GO.settings.modules.cms["write_permission"],value:GO.settings.user_id,anchor:"-20"}),{xtype:"textfield",name:"name",anchor:"-20",allowBlank:false,fieldLabel:GO.lang.strName},{xtype:"textarea",name:"comments",anchor:"-20",allowBlank:true,fieldLabel:GO.cms.lang.comments}]});var a=[this.propertiesPanel];this.tabPanel=new Ext.TabPanel({activeTab:0,deferredRender:false,border:false,items:a,anchor:"100% 100%"});this.formPanel=new Ext.form.FormPanel({waitMsgTarget:true,url:GO.settings.modules.cms.url+"action.php",border:false,baseParams:{task:"comment"},items:this.tabPanel})}});GO.cms.TreePanel=function(a){if(!a){a={}}if(!a.rootNodeId){a.rootNodeId="root"}a.title=GO.cms.lang.categories;a.layout="fit";a.split=true;a.autoScroll=true;a.width=200;a.animate=true;a.loader=new Ext.tree.TreeLoader({dataUrl:GO.settings.modules.cms.url+"json.php",baseParams:{task:"tree"},preloadChildren:true});a.containerScroll=true;a.rootVisible=false;a.collapseFirst=false;a.collapsible=true;a.containerScroll=true;a.enableDD=true;a.ddGroup="cmsDD";GO.cms.TreePanel.superclass.constructor.call(this,a);this.rootNode=new Ext.tree.AsyncTreeNode({text:GO.lang.root,id:a.rootNodeId,draggable:false,iconCls:"folder-default",expanded:false});this.setRootNode(this.rootNode);this.on("nodedrop",function(j){var m={};if(j.dropNode.attributes.file_id){m.task="move_file";m.file_id=j.dropNode.attributes.file_id;if(j.point=="append"){m.folder_id=j.target.attributes.folder_id}else{m.folder_id=j.target.parentNode.attributes.folder_id}j.dropNode.attributes.folder_id=j.target.attributes.folder_id;var h=this.getNodeById("folder_"+m.folder_id)}else{m.task="move_folder";m.folder_id=j.dropNode.attributes.folder_id;if(j.point=="append"){m.parent_id=j.target.attributes.folder_id}else{m.parent_id=j.target.parentNode.attributes.folder_id}var h=this.getNodeById("folder_"+m.parent_id)}j.dropNode.attributes.site_id=j.target.attributes.site_id;var c=[];for(var g=0;g<h.childNodes.length;g++){var f=h.childNodes[g];if(f.attributes.file_id){var k="file";var b=f.attributes.file_id}else{var k="folder";var b=f.attributes.folder_id}var l={fstype:k,id:b,sort_order:g};c.push(l)}m.sort_order=Ext.encode(c);Ext.Ajax.request({url:GO.settings.modules.cms.url+"action.php",params:m,callback:function(i,p,e){var n=Ext.decode(e.responseText);if(!p||!n.success){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strSaveError)}},scope:this})},this)};Ext.extend(GO.cms.TreePanel,Ext.tree.TreePanel,{resetRootNode:function(a){this.rootNode.id=a;this.rootNode.attributes.id=a;this.rootNode.reload()},getActivePath:function(){var a=this.getSelectionModel();if(a.selNodes[0]==null){return""}var b=a.selNodes[0];var c="/"+b.text;if(!b.parentNode||!b.parentNode.parentNode){return""}while(!b.parentNode.parentNode.isRoot){b=b.parentNode;c="/"+b.text+c}return c}});GO.cms.SelectFile=Ext.extend(function(a){this.treePanel=new GO.cms.TreePanel({region:"west",title:GO.lang.menu,autoScroll:true,width:250,split:true,rootNodeId:"site_"+GO.cms.site_id});var b={title:GO.cms.lang.selectPage,height:400,width:600,layout:"fit",border:false,closeAction:"hide",tbar:[{iconCls:"cms-folder-properties",text:GO.cms.lang.files,handler:function(){GO.cms.createFileBrowser(GO.cms.editorPanel.root_folder_id,"",function(){var c=GO.cms.fb.getSelectedGridRecords();GO.cms.popupWin.document.getElementById(GO.cms.popupField).value=GO.settings.modules.files.full_url+"download.php?id="+c[0].data.id;GO.cms.fileBrowserWindow.hide()},GO.cms.editorPanel.files_folder_id);this.hide()},scope:this}],items:this.treePanel,buttons:[{text:GO.lang.cmdOk,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNode==null){Ext.MessageBox.alert(GO.lang.strError,GO.lang.noItemSelected)}else{this.fireEvent("fileselected",c.selNode.attributes);this.hide()}},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}]};Ext.apply(a,b);this.addEvents({fileselected:true});GO.cms.SelectFile.superclass.constructor.call(this,b)},Ext.Window,{show:function(){this.treePanel.resetRootNode("site_"+GO.cms.site_id);GO.cms.SelectFile.superclass.show.call(this)}});GO.cms.EditorPanel=Ext.extend(function(a){var f={};for(var c=0;c<GO.Languages.length;c++){f[GO.Languages[c][0]]=GO.Languages[c][1]}var g="+"+f[GO.settings.language]+"="+GO.settings.language;for(var e in f){if(e!=GO.settings.language){g+=","+f[e]+"="+e}}this.editor=new Ext.ux.TinyMCE({name:"content",tinymceSettings:{mode:"textareas",theme:"advanced",plugins:"spellchecker,safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,spellchecker,media,advhr,|,ltr,rtl,|,fullscreen",file_browser_callback:"GO.cms.fileBrowser",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:false,convert_urls:false,relative_urls:false,spellchecker_languages:g,spellchecker_rpc_url:BaseHref+"javascript/tiny_mce/plugins/spellchecker/rpc.php"}});var b={disabled:true,waitMsgTarget:true,url:GO.settings.modules.cms.url+"json.php",baseParams:{task:"file"},region:"center",border:false,labelAlign:"top",items:{anchor:"100% 100%",layout:"border",border:false,items:[{region:"center",layout:"fit",border:false,items:this.editor},{region:"east",split:true,width:300,cls:"go-form-panel",waitMsgTarget:true,layout:"form",autoScroll:true,defaults:{anchor:"-20",listeners:{change:function(){this.dirty=true},scope:this}},defaultType:"textfield",items:[{fieldLabel:GO.lang.strName,name:"name",allowBlank:false},{xtype:"datefield",format:GO.settings.date_format,fieldLabel:GO.cms.lang.showUntil,name:"show_until",allowBlank:true,emptyText:GO.cms.lang.alwaysShow},{hideLabel:true,xtype:"checkbox",checked:true,name:"auto_meta",boxLabel:GO.cms.lang.autoMeta,listeners:{check:function(h,i){this.setAutoMeta(i)},scope:this}},{fieldLabel:GO.cms.lang.title,xtype:"textarea",name:"title",height:60},{fieldLabel:GO.lang.strDescription,xtype:"textarea",name:"description",height:80},{fieldLabel:GO.cms.lang.keywords,xtype:"textarea",name:"keywords",height:80},this.optionsPanel=new GO.cms.TemplateOptionsPanel()]}]}};this.optionsPanel.on("htmlTemplateSelected",function(h){tinyMCE.execCommand("mceInsertContent",false,h.get("html"))},this);Ext.apply(b,a);GO.cms.EditorPanel.superclass.constructor.call(this,b);this.addEvents({save:true,disabled:true,load:true})},Ext.FormPanel,{files_folder_id:0,root_folder_id:0,currentTemplate:"",dirty:false,file_id:0,loadFile:function(c,b){this.setDisabled(false);if(this.currentTemplate!=b){if(this.currentTemplate!=""){this.editor.reInit()}var a=tinyMCE.activeEditor.dom;this.currentTemplate=b;a.remove(a.select("link"));if(b!=""){a.add(a.select("head")[0],"link",{rel:"stylesheet",href:GO.settings.modules.cms.url+"templates/"+b+"/css/editor.css"})}}this.file_id=c;this.baseParams.file_id=c;if(c>0){this.baseParams.folder_id=0}this.dirty=false;this.load({success:function(e,f){this.root_folder_id=f.result.data.root_folder_id;this.files_folder_id=f.result.data.files_folder_id;if(f.result.data.folder_id){this.baseParams.folder_id=f.result.data.folder_id}this.setAutoMeta(f.result.data.auto_meta=="1");this.optionsPanel.loadConfig(f.result.data.config,f.result.data.option_values,f.result.data.type);this.fireEvent("load",this)},scope:this})},saveFile:function(){tinyMCE.triggerSave();GO.mainLayout.getModulePanel("cms").getEl().mask(GO.lang.waitMsgSave);this.form.submit({url:GO.settings.modules.cms.url+"action.php",params:{task:"save_file"},success:function(a,b){if(b.result.file_id){this.baseParams.file_id=b.result.file_id}if(b.result.title){this.form.findField("title").setValue(b.result.title)}if(b.result.keywords){this.form.findField("keywords").setValue(b.result.keywords)}if(b.result.description){this.form.findField("description").setValue(b.result.description)}if(b.result.files_folder_id){this.files_folder_id=b.result.files_folder_id}this.dirty=false;this.editor.ed.isNotDirty=1;this.fireEvent("save",this.baseParams.file_id,this.form.getValues(),this.baseParams.folder_id);GO.mainLayout.getModulePanel("cms").getEl().unmask()},failure:function(a,b){if(b.failureType=="client"){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strErrorsInForm)}else{Ext.MessageBox.alert(GO.lang.strError,b.result.feedback)}GO.mainLayout.getModulePanel("cms").getEl().unmask()},scope:this})},newFile:function(a,b){this.form.reset();this.baseParams.folder_id=a;this.loadFile(0,b)},setDisabled:function(a){this.fireEvent("disabled",a);GO.cms.EditorPanel.superclass.setDisabled.call(this,a)},isDirty:function(){return this.dirty||this.editor.isDirty()},setAutoMeta:function(a){var b=this.form;b.findField("title").setDisabled(a);b.findField("description").setDisabled(a);b.findField("keywords").setDisabled(a)}});GO.cms.createFileBrowser=function(c,b,a,e){if(!GO.cms.fb){GO.cms.fb=new GO.files.FileBrowser({border:false,treeCollapsed:false});GO.cms.fileBrowserWindow=new Ext.Window({title:GO.lang.strSelectFiles,height:500,width:750,layout:"fit",border:false,collapsible:true,maximizable:true,closeAction:"hide",items:GO.cms.fb,buttons:[{text:GO.lang.cmdOk,handler:function(){GO.cms.fb.fileClickHandler()},scope:this},{text:GO.lang.cmdClose,handler:function(){GO.cms.fileBrowserWindow.hide()},scope:this}]})}GO.cms.fb.setFilesFilter(b);GO.cms.fb.setFileClickHandler(a,this);GO.cms.fileBrowserWindow.buttons[0].setVisible(a!=false);if(!e){e=c}GO.cms.fb.setRootID(c,e);GO.cms.fileBrowserWindow.show()};GO.cms.fileBrowser=function(c,a,b,e){GO.cms.popupWin=e;GO.cms.popupField=c;if(b=="image"){GO.cms.createFileBrowser(GO.cms.editorPanel.root_folder_id,"png,jpg,jpeg,gif,bmp",function(){var f=GO.cms.fb.getSelectedGridRecords();GO.cms.popupWin.document.getElementById(GO.cms.popupField).value=GO.settings.modules.files.full_url+"download.php?id="+f[0].data.id;GO.cms.fileBrowserWindow.hide()})}else{if(!GO.cms.selectFile){GO.cms.selectFile=new GO.cms.SelectFile();GO.cms.selectFile.on("fileselected",function(f){GO.cms.popupWin.document.getElementById(GO.cms.popupField).value="/{site_url}?site_id="+f.site_id+"&path="+f.path},this)}GO.cms.selectFile.show()}};GO.cms.TemplateOptionsPanel=Ext.extend(function(a){var b={layout:"form",border:false,bodyStyle:"padding:0px;",autoHeight:true};Ext.apply(b,a);GO.cms.TemplateOptionsPanel.superclass.constructor.call(this,b);this.addEvents({htmlTemplateSelected:true})},Ext.Panel,{templateConfig:false,options:[],loadConfig:function(b,a,f,e){var c,h;this.templateConfig=b;this.optionValues=a;if(this.items){this.items.each(function(j){var i=j.container.up("div.x-form-item");j.destroy();if(i){i.remove()}})}if(b.templates&&b.templates.length){var g={fieldLabel:GO.cms.lang.insertTemplate,store:new Ext.data.SimpleStore({fields:["name","html"],data:b.templates}),name:"default_template",displayField:"name",mode:"local",triggerAction:"all",editable:false,forceSelection:false,anchor:"-20"};if(!this.isFolder){g.listeners={select:function(k,i,j){this.fireEvent("htmlTemplateSelected",i);k.reset()},scope:this}}else{if(e){g.value=e}}this.add(new GO.form.ComboBoxReset(g))}if(b.types&&b.types.length){var g={fieldLabel:GO.lang.strType,store:new Ext.data.SimpleStore({fields:["name","options"],data:b.types}),name:"type",value:f,displayField:"name",mode:"local",triggerAction:"all",editable:false,forceSelection:false,anchor:"-20",listeners:{select:function(k,i,j){this.addOptions(i.get("name"))},scope:this}};this.add(new GO.form.ComboBoxReset(g));if(this.isFolder){this.add(new Ext.form.Checkbox({hideLabel:true,boxLabel:GO.cms.lang.applyRecursive,name:"recursive"}))}}this.addOptions(f)},removeOptions:function(){for(var b=0;b<this.options.length;b++){var a=this.options[b].container.up("div.x-form-item");this.options[b].destroy();if(a){a.remove()}}this.options=[]},addOptions:function(c){this.removeOptions();var a=[];for(var b=0;b<this.templateConfig.types.length;b++){if(this.templateConfig.types[b][0]==c){a=this.templateConfig.types[b][1];break}}var e;if(a.length){for(var b=0;b<a.length;b++){o=a[b];if(o.type=="select"){e=this.optionValues[o.name]?this.optionValues[o.name]:o.options[0][0];this.options.push(new GO.form.ComboBoxReset({fieldLabel:o.fieldLabel,hiddenName:o.name,store:new Ext.data.SimpleStore({fields:["value","text"],data:o.options}),value:e,valueField:"value",displayField:"text",mode:"local",triggerAction:"all",editable:false,forceSelection:true,anchor:"-20"}))}else{if(o.type=="file"){e=this.optionValues[o.name]?this.optionValues[o.name]:"";this.options.push(new GO.files.SelectFile({fieldLabel:o.fieldLabel,root_folder_id:this.ownerCt.ownerCt.ownerCt.root_folder_id,name:o.name,value:e,anchor:"-20",filesFilter:o.files_filter}))}else{if(o.type=="checkbox"){e=this.optionValues[o.name]?this.optionValues[o.name]:"";this.options.push(new Ext.form.Checkbox({boxLabel:o.fieldLabel,hideLabel:true,name:o.name,checked:!GO.util.empty(e),anchor:"-20"}))}else{if(o.type=="textarea"){e=this.optionValues[o.name]?this.optionValues[o.name]:"";this.options.push(new Ext.form.TextArea({fieldLabel:o.fieldLabel,name:o.name,value:e,anchor:"-20"}))}else{e=this.optionValues[o.name]?this.optionValues[o.name]:"";this.options.push(new Ext.form.TextField({fieldLabel:o.fieldLabel,name:o.name,value:e,anchor:"-20"}))}}}}this.add(this.options[this.options.length-1])}}this.doLayout()}});GO.cms.MainPanel=function(a){if(!a){a={}}this.folderDialog=new GO.cms.FolderDialog();this.folderDialog.on("save",function(e,h,g){var c=this.treePanel.getNodeById("folder_"+e);if(c){c.setText(h.name)}else{var c=this.treePanel.getNodeById("folder_"+g);var f=new Ext.tree.AsyncTreeNode({text:h.name,id:"folder_"+e,iconCls:"filetype-folder",site_id:c.attributes.site_id,file_id:0,folder_id:e,template:c.attributes.template,expanded:true,children:[]});c.appendChild(f)}},this);this.treePanel=GO.cms.treePanel=new GO.cms.TreePanel({region:"west",title:GO.lang.menu,autoScroll:true,width:250,split:true,selModel:new Ext.tree.MultiSelectionModel()});this.treePanel.on("beforeclick",function(c){if(c.attributes.file==0){return false}},this);this.treePanel.on("click",function(c,f){if(!f.ctrlKey){if(!c.expanded){c.expand()}if(c.attributes.site_id){GO.cms.site_id=c.attributes.site_id}if(c.attributes.file_id>0){this.checkChanges.defer(100,this,[function(){this.getEl().mask(GO.lang.waitMsgLoad);this.editorPanel.loadFile(c.attributes.file_id,c.attributes.template)},this])}}},this);this.editorPanel=new GO.cms.EditorPanel();GO.cms.editorPanel=this.editorPanel;this.editorPanel.on("disabled",function(c){this.saveButton.setDisabled(c);this.viewButton.setDisabled(c);if(c){this.filesButton.setDisabled(true)}},this);this.editorPanel.on("save",function(h,i,e){var f=this.treePanel.getNodeById("file_"+h);if(f){f.setText(i.name)}else{var c=this.treePanel.getNodeById("folder_"+e);var g=new Ext.tree.AsyncTreeNode({text:i.name,id:"file_"+h,iconCls:"filetype-html",site_id:c.attributes.site_id,file_id:h,folder_id:c.attributes.folder_id,template:c.attributes.template,leaf:true});c.appendChild(g);this.treePanel.getSelectionModel().select(g)}},this);a.items=[this.treePanel,this.editorPanel];a.layout="border";var b=[{iconCls:"btn-add",text:GO.cms.lang.newPage,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNodes[0]==null){Ext.MessageBox.alert(GO.lang.strError,GO.cms.lang.selectFolderAdd)}else{this.checkChanges.defer(100,this,[function(){this.editorPanel.newFile(c.selNodes[0].attributes.folder_id,c.selNodes[0].attributes.template)},this])}},scope:this},{iconCls:"btn-add",text:GO.cms.lang.newFolder,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNodes[0]==null){Ext.MessageBox.alert(GO.lang.strError,GO.cms.lang.selectFolderAdd)}else{this.folderDialog.show(0,c.selNodes[0].attributes.folder_id,c.selNodes[0].attributes.site_id)}},scope:this},{iconCls:"cms-btn-copy",text:GO.lang.copy,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNodes[0]==null){Ext.MessageBox.alert(GO.lang.strError,GO.cms.lang.selectFolderAdd)}else{this.copyFolders=[];this.copyFiles=[];for(var e=0;e<c.selNodes.length;e++){if(c.selNodes[e].attributes.file_id>0){this.copyFiles.push(c.selNodes[e].attributes.file_id)}else{this.copyFolders.push(c.selNodes[e].attributes.folder_id)}}this.pasteButton.setDisabled(false)}},scope:this},this.pasteButton=new Ext.Button({disabled:true,iconCls:"cms-btn-paste",text:GO.lang.paste,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNodes[0]==null){Ext.MessageBox.alert(GO.lang.strError,GO.cms.lang.selectFolderAdd)}else{var f=c.selNodes[0].attributes.folder_id;var e={task:"copy",copy_folders:Ext.encode(this.copyFolders),copy_files:Ext.encode(this.copyFiles),destination_folder_id:c.selNodes[0].attributes.folder_id};Ext.Ajax.request({url:GO.settings.modules.cms.url+"action.php",params:e,callback:function(h,j,g){if(!j){Ext.MessageBox.alert(GO.lang.strError,GO.lang.strRequestError)}else{var i=Ext.decode(g.responseText);if(!i.success){Ext.MessageBox.alert(GO.lang.strError,i.feedback)}else{this.treePanel.rootNode.reload();this.copyFolders=[];this.copyFiles=[];this.pasteButton.setDisabled(true)}}},scope:this})}},scope:this}),{text:GO.lang.cmdDelete,iconCls:"btn-delete",handler:function(){var e=this.treePanel.getSelectionModel();var c=[];if(e.selNodes){for(var f=0;f<e.selNodes.length;f++){c.push(e.selNodes[f].id)}}GO.deleteItems({count:c.length,url:GO.settings.modules.cms.url+"action.php",params:{task:"delete",delete_items:Ext.encode(c)},callback:function(j){if(j.deleted_nodes){for(var g=0;g<j.deleted_nodes.length;g++){var h=this.treePanel.getNodeById(j.deleted_nodes[g]);if(h){if(h.attributes.file_id==this.editorPanel.baseParams.file_id){this.editorPanel.form.reset();this.editorPanel.setDisabled(true)}h.remove()}}}},scope:this})},scope:this},"-",this.saveButton=new Ext.Button({iconCls:"btn-save",text:GO.lang.cmdSave,handler:function(){this.editorPanel.saveFile()},scope:this,disabled:true}),this.viewButton=new Ext.Button({iconCls:"cms-btn-view",text:GO.cms.lang.view,handler:function(){window.open(GO.settings.modules.cms.url+"run.php?file_id="+this.editorPanel.baseParams.file_id+"&basehref="+encodeURIComponent(GO.settings.modules.cms.url))},scope:this,disabled:true}),"-",{iconCls:"cms-folder-properties",text:GO.cms.lang.folderProperties,handler:function(){var c=this.treePanel.getSelectionModel();if(c.selNodes[0]==null){Ext.MessageBox.alert(GO.lang.strError,GO.cms.lang.selectFolder)}else{this.folderDialog.show(c.selNodes[0].attributes.folder_id)}},scope:this}];if(GO.files){b.push(this.filesButton=new Ext.Button({iconCls:"cms-folder-properties",text:GO.cms.lang.files,disabled:true,handler:function(){GO.cms.createFileBrowser(GO.cms.editorPanel.root_folder_id,"",false,GO.cms.editorPanel.files_folder_id)},scope:this}));this.editorPanel.on("load",function(){this.filesButton.setDisabled(this.editorPanel.files_folder_id==0);this.getEl().unmask()},this);this.editorPanel.on("save",function(){this.filesButton.setDisabled(this.editorPanel.files_folder_id==0)},this)}if(GO.settings.modules.cms.write_permission){b.push("-");b.push({iconCls:"cms-btn-sites",text:GO.cms.lang.sites,handler:function(){if(!this.sitesDialog){this.sitesDialog=new GO.cms.SitesDialog();this.sitesDialog.sitesGrid.store.on("load",function(){this.sitesDialog.sitesGrid.store.on("load",function(){this.treePanel.rootNode.reload()},this)},this)}this.sitesDialog.show()},scope:this})}if(GO.webshop){b.push({iconCls:"ws-btn-webshop",text:GO.webshop.lang.webshops,handler:function(){if(!this.webshopsDialog){this.webshopsDialog=new Ext.Window({layout:"fit",width:500,height:400,closeAction:"hide",title:GO.webshop.lang.webshops,items:new GO.webshop.WebshopsGrid(),buttons:[{text:GO.lang.cmdClose,handler:function(){this.webshopsDialog.hide()},scope:this}]})}this.webshopsDialog.show()},scope:this})}if(GO.mailings){b.push({iconCls:"ml-btn-mailings",text:GO.addressbook.lang.sendMailing,cls:"x-btn-text-icon",handler:function(){if(!this.selectMailingGroupWindow){this.selectMailingGroupWindow=new GO.mailings.SelectMailingGroupWindow();this.selectMailingGroupWindow.on("select",function(e,c){GO.email.showComposer({loadUrl:GO.settings.modules.mailings.url+"json.php",loadParams:{task:"sendcmsfile",file_id:this.editorPanel.baseParams.file_id,mailing_group_id:c},mailing_group_id:c})},this)}this.selectMailingGroupWindow.show()},scope:this})}a.tbar=new Ext.Toolbar({cls:"go-head-tb",items:b});a.border=false;GO.cms.MainPanel.superclass.constructor.call(this,a)};Ext.extend(GO.cms.MainPanel,Ext.Panel,{copyFolders:[],copyFile:[],checkChanges:function(c,b){var a=this.editorPanel.isDirty();if(a&&confirm(GO.cms.lang.saveChanges)){this.editorPanel.saveFile();this.editorPanel.on("save",c,b,{single:true})}else{c.call(b)}}});GO.moduleManager.addModule("cms",GO.cms.MainPanel,{title:GO.cms.lang.cms,iconCls:"go-tab-icon-cms"});