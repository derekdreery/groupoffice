GO.sieve.ActionPanel=function(a){a=a||{};this.cmbAction=new GO.form.ComboBox({hiddenName:"type",fieldLabel:GO.sieve.lang.action,valueField:"value",displayField:"field",store:GO.sieve.cmbActionStore,mode:"local",value:"fileinto",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,allowBlank:false,width:150,emptyText:GO.sieve.lang.action});this.cmbFolder=new GO.form.ComboBox({hiddenName:"target",fieldLabel:GO.sieve.lang.folder,valueField:"name",value:"INBOX",displayField:"name",store:GO.email.subscribedFoldersStore,mode:"local",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,allowBlank:false,width:150,emptyText:GO.sieve.lang.folder});this.txtEmailAddress=new Ext.form.TextField({name:"email",hidden:true,allowBlank:false,width:150,emptyText:GO.sieve.lang.addresses});this.txtMessage=new Ext.form.TextArea({name:"message",hidden:true,allowBlank:false,hideLabel:true,anchor:"100%",height:80,emptyText:GO.sieve.lang.reason,listeners:{scope:this,focus:function(){this.setHeight(100)}}});this.txtDays=new Ext.form.TextField({name:"days",hidden:true,allowBlank:false,width:50,emptyText:GO.sieve.lang.days});this.cmbAction.on("select",function(d,c){this.setVisibleFields(c,false)},this);var b=Ext.data.Record.create([{name:"type",type:"string"},{name:"copy",type:"string"},{name:"target",type:"string"},{name:"days",type:"string"},{name:"addresses",type:"string"},{name:"reason",type:"string"}]);this.btnAddAction=new Ext.Button({text:GO.lang.cmdAdd,handler:function(){var i=false;var g="";var e="";var h="";var j="";var d="";switch(this.cmbAction.getValue()){case"fileinto":i=false;g="fileinto";e=this.cmbFolder.getValue();break;case"copyto":i=true;g="fileinto";e=this.cmbFolder.getValue();break;case"redirect":i=false;g="redirect";e=this.txtEmailAddress.getValue();break;case"redirect_copy":i=true;g="redirect";e=this.txtEmailAddress.getValue();break;case"reject":i="";g="reject";e=this.txtMessage.getValue();break;case"vacation":i="";g="vacation";e="";h=this.txtDays.getValue();j=this.txtEmailAddress.getValue();d=this.txtMessage.getValue();break;case"discard":i="";g="discard";e="";break;case"stop":i="";g="stop";e="";break}var f={type:g,copy:i,target:e,days:h,addresses:j,reason:d};var c;if(this.btnAddAction.getText()==GO.lang.cmdAdd){c=new b(f);this.grid.store.insert(0,c)}else{c=this.grid.store.getAt(this.index);Ext.apply(c.data,f);c.commit()}this.resetForm()},scope:this});this.btnClearAction=new Ext.Button({text:GO.sieve.lang.clear,handler:function(){this.resetForm()},scope:this});a.bodyStyle="padding:5px";a.border=false;a.autoHeight=true;a.region="center";a.baseParams={task:"addAction",account_id:0,script_name:"",rule_name:"",script_index:0};a.items=[{xtype:"compositefield",items:[this.cmbAction,this.cmbFolder,this.txtDays,this.txtEmailAddress,this.btnAddAction,this.btnClearAction],hideLabel:true},this.txtMessage];GO.sieve.ActionPanel.superclass.constructor.call(this,a)};Ext.extend(GO.sieve.ActionPanel,Ext.FormPanel,{index:0,setVisibleFields:function(a,d,b){this.index=b?b:0;var c="";this.form.setValues(a.data);if(d){this.btnAddAction.setText(GO.lang.cmdEdit);c=a.data.type;if(a.data.type=="redirect"&&a.data.copy==true){c="redirect_copy";this.cmbAction.setValue(c)}else{if(a.data.type=="fileinto"&&a.data.copy==true){c="copyto";this.cmbAction.setValue(c)}else{if(a.data.type=="vacation"){this.txtEmailAddress.setValue(a.data.addresses);this.txtMessage.setValue(a.data.reason)}}}}else{this.btnAddAction.setText(GO.lang.cmdAdd);c=a.data.value}switch(c){case"fileinto":this.cmbFolder.show();this.txtEmailAddress.hide();this.txtMessage.hide();this.txtDays.hide();break;case"copyto":this.cmbFolder.show();this.txtEmailAddress.hide();this.txtMessage.hide();this.txtDays.hide();break;case"redirect":this.cmbFolder.hide();this.txtEmailAddress.show();this.txtMessage.hide();this.txtDays.hide();break;case"redirect_copy":this.cmbFolder.hide();this.txtEmailAddress.show();this.txtMessage.hide();this.txtDays.hide();break;case"reject":this.cmbFolder.hide();this.txtEmailAddress.hide();this.txtMessage.show();this.txtDays.hide();break;case"vacation":this.cmbFolder.hide();this.txtDays.show();this.txtEmailAddress.show();this.txtMessage.show();break;case"discard":this.cmbFolder.hide();this.txtDays.hide();this.txtEmailAddress.hide();this.txtMessage.hide();break;case"stop":this.cmbFolder.hide();this.txtEmailAddress.hide();this.txtDays.hide();this.txtMessage.hide();break}this.doLayout()},resetForm:function(){this.btnAddAction.setText(GO.lang.cmdAdd);this.form.reset();this.cmbFolder.show();this.txtEmailAddress.hide();this.txtMessage.hide();this.txtDays.hide();this.doLayout()},setAccountId:function(a){this.baseParams.account_id=a},setScriptName:function(a){this.baseParams.script_name=a},setScriptIndex:function(a){this.baseParams.script_index=a},setRuleName:function(a){this.baseParams.rule_name=a},afterRender:function(){GO.sieve.ActionPanel.superclass.afterRender.call(this)},onShow:function(){GO.sieve.ActionPanel.superclass.onShow.call(this);this.actionGrid.store.load()}});GO.sieve.TestsPanel=function(a){a=a||{};this.cmbField=new GO.form.ComboBox({hiddenName:"arg1",valueField:"value",displayField:"field",value:"Subject",store:GO.sieve.cmbFieldStore,mode:"local",triggerAction:"all",editable:false,forceSelection:true,allowBlank:false,width:90,emptyText:GO.sieve.lang.field});this.cmbOperator=new GO.form.ComboBox({hiddenName:"type",value:"contains",valueField:"value",displayField:"field",store:GO.sieve.cmbOperatorStore,mode:"local",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,allowBlank:false,width:110,emptyText:GO.sieve.lang.operator});this.txtCondition=new Ext.form.TextField({name:"arg2",emptyText:GO.sieve.lang.condition,fieldLabel:GO.sieve.lang.condition,allowBlank:false,width:150});this.cmbUnderOver=new GO.form.ComboBox({hiddenName:"underover",hidden:true,value:"under",valueField:"value",displayField:"field",store:GO.sieve.cmbUnderOverStore,mode:"local",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,allowBlank:false,width:70});this.rgSize=new Ext.form.RadioGroup({columns:4,width:150,hidden:true,items:[{items:{boxLabel:"B",name:"size",inputValue:"B",style:"margin-left: 4px; margin-right: -2px;"}},{items:{boxLabel:"KB",name:"size",inputValue:"K",style:"margin-left: 4px; margin-right: -2px;",checked:true}},{items:{boxLabel:"MB",name:"size",inputValue:"M",style:"margin-left: 4px; margin-right: -2px;"}},{items:{boxLabel:"GB",name:"size",inputValue:"G",style:"margin-left: 4px; margin-right: -2px;"}}],hideLabel:true});this.cmbField.on("select",function(d,c){this.setVisibleFields()},this);this.cmbOperator.on("select",function(d,c){this.setVisibleFields()},this);var b=Ext.data.Record.create([{name:"test",type:"string"},{name:"not",type:"string"},{name:"type",type:"string"},{name:"arg1",type:"string"},{name:"arg2",type:"string"}]);this.btnAddRule=new Ext.Button({text:GO.lang.cmdAdd,handler:function(){var j="";var i=true;var h="";var f="";var e=this.cmbField.getValue();var c=this.txtCondition.getValue();if(this.cmbOperator.getValue()=="exists"||this.cmbOperator.getValue()=="notexists"){c="sometext"}if(c!=""){if(this.cmbField.getValue()=="size"){j="size";i=false;h=this.cmbUnderOver.getValue();if(this.rgSize.getValue().inputValue=="B"){f=this.txtCondition.getValue()}else{f=this.txtCondition.getValue()+this.rgSize.getValue().inputValue}e="";c=""}else{if(this.cmbOperator.getValue()=="exists"||this.cmbOperator.getValue()=="notexists"){j="exists";if(this.cmbOperator.getValue()=="notexists"){i=true}else{i=false}h="";f=this.cmbField.getValue();e="";c=""}else{j="header";if(this.cmbOperator.getValue()=="notcontains"||this.cmbOperator.getValue()=="notis"){i=true}else{i=false}if(this.cmbOperator.getValue()=="contains"||this.cmbOperator.getValue()=="notcontains"){h="contains"}else{if(this.cmbOperator.getValue()=="is"||this.cmbOperator.getValue()=="notis"){h="is"}}f="";e=this.cmbField.getValue();c=this.txtCondition.getValue()}}var d;var g={test:j,not:i,type:h,arg:f,arg1:e,arg2:c};if(this.index==-1){d=new b(g);this.grid.store.insert(0,d)}else{d=this.grid.store.getAt(this.index);Ext.apply(d.data,g);d.commit()}this.resetForm()}},scope:this});this.btnClearRule=new Ext.Button({text:GO.sieve.lang.clear,handler:function(){this.resetForm()},scope:this});a.bodyStyle="padding:5px";a.border=false;a.autoHeight=true;a.region="center";a.url=GO.settings.modules.sieve.url+"fileIO.php";a.baseParams={task:"addRule",account_id:0,script_name:"",rule_name:"",script_index:0};a.items=[{xtype:"compositefield",items:[this.cmbField,this.cmbUnderOver,this.cmbOperator,this.txtCondition,this.rgSize,this.btnAddRule,this.btnClearRule],hideLabel:true}];GO.sieve.TestsPanel.superclass.constructor.call(this,a)};Ext.extend(GO.sieve.TestsPanel,Ext.FormPanel,{index:-1,grid:false,setFormValues:function(a,b){this.index=typeof(b)=="undefined"?-1:b;this.form.setValues(a.data);if(a.data.test=="size"){this.cmbField.setValue(a.data.test);this.cmbUnderOver.setValue(a.data.type);var c=a.data.arg.substr(a.data.arg.length-1,1);var d=a.data.arg.substr(0,a.data.arg.length-1);if(c!="K"&&c!="M"&&c!="G"){d=d+c;c="B"}this.txtCondition.setValue(d);this.rgSize.setValue(c)}if(a.data.type=="contains"&&a.data.not==true){this.cmbOperator.setValue("notcontains")}else{if(a.data.type=="is"&&a.data.not==true){this.cmbOperator.setValue("notis")}else{if(a.data.test=="exists"&&a.data.not==true){this.cmbOperator.setValue("notexists");this.cmbField.setValue(a.data.arg)}else{if(a.data.test=="exists"&&a.data.not==false){this.cmbOperator.setValue("exists");this.cmbField.setValue(a.data.arg)}}}}this.setVisibleFields();this.btnAddRule.setText(GO.lang.cmdEdit)},toggleCondition:function(){var a=this.cmbOperator.getValue();if(this.cmbField.getValue()!="size"&&(a=="exists"||a=="notexists")){this.txtCondition.hide()}else{this.txtCondition.show()}},setVisibleFields:function(){this.toggleCondition();switch(this.cmbField.getValue()){case"size":this.cmbOperator.hide();this.cmbUnderOver.show();this.rgSize.show();break;case"From":this.cmbOperator.show();this.cmbUnderOver.hide();this.rgSize.hide();break;case"To":this.cmbOperator.show();this.cmbUnderOver.hide();this.rgSize.hide();break;case"Subject":this.cmbOperator.show();this.cmbUnderOver.hide();this.rgSize.hide();break}this.doLayout()},onShow:function(){GO.sieve.TestsPanel.superclass.onShow.call(this)},resetForm:function(){this.btnAddRule.setText(GO.lang.cmdAdd);this.form.reset();this.setVisibleFields();this.index=-1}});GO.moduleManager.onModuleReady("email",function(){Ext.override(GO.email.AccountDialog,{initComponent:GO.email.AccountDialog.prototype.initComponent.createSequence(function(){this.sieveGrid=new GO.sieve.SieveGrid();this.tabPanel.add(this.sieveGrid)}),setAccountId:GO.email.AccountDialog.prototype.setAccountId.createSequence(function(a){this.sieveGrid.setAccountId(a)})})});GO.sieve.SieveDialog=function(a){if(!a){a={}}this.rgMethod=new Ext.form.RadioGroup({columns:3,anchor:"100%",value:"anyof",items:[{columnWidth:0.4,items:{boxLabel:GO.sieve.lang.allfollowingrules,name:"join",inputValue:"allof"}},{columnWidth:0.4,items:{boxLabel:GO.sieve.lang.somefollowingrules,name:"join",inputValue:"anyof"}},{columnWidth:0.2,items:{boxLabel:GO.sieve.lang.allmessages,name:"join",inputValue:"any"}}],listeners:{scope:this,change:function(){if(this.rgMethod.getValue()){if(this.rgMethod.getValue().inputValue=="any"){this.testsGrid.hide();this.testsPanel.hide()}else{this.testsGrid.show();this.testsPanel.show()}}}},hideLabel:true});this.formPanel=new Ext.FormPanel({style:"padding:5px;",autoHeight:true,border:false,url:GO.settings.modules.sieve.url+"fileIO.php",baseParams:{task:"load_rule"},items:[{fieldLabel:GO.lang.strName,name:"rule_name",xtype:"textfield",allowBlank:false},{name:"disabled",checked:false,xtype:"checkbox",fieldLabel:GO.sieve.lang.disablefilter},new Ext.form.Label({text:GO.sieve.lang.ruletext,width:"100%",style:"padding-bottom: 10px; font-weight:bold;"}),this.rgMethod]});this.testsGrid=new GO.sieve.TestsGrid();this.testsPanel=new GO.sieve.TestsPanel({grid:this.testsGrid});this.testsGrid.on("rowdblclick",function(d,c,f){var b=this.testsGrid.store.getAt(c);this.testsPanel.setFormValues(b,c)},this);this.actionGrid=new GO.sieve.ActionGrid();this.actionPanel=new GO.sieve.ActionPanel({grid:this.actionGrid});this.actionGrid.on("rowdblclick",function(d,c,f){var b=this.actionGrid.store.getAt(c);this.actionPanel.setVisibleFields(b,true,c)},this);this.currentScriptName="";this.currentRuleName="";this.currentScriptIndex=0;this.currentAccountId=0;a.items={autoScroll:true,layout:"anchor",items:[this.formPanel,this.testsPanel,this.testsGrid,new Ext.form.Label({text:GO.sieve.lang.actiontext,width:"100%",style:"padding-bottom: 10px; margin: 5px; font-weight:bold;"}),this.actionPanel,this.actionGrid]};a.collapsible=true;a.maximizable=true;a.layout="fit";a.modal=false;a.resizable=true;a.width=700;a.height=610;a.closeAction="hide";a.title=GO.sieve.lang.sieverules;a.buttons=[{text:GO.lang.cmdOk,handler:function(){this.saveAll()},scope:this},{text:GO.lang.cmdClose,handler:function(){this.hide()},scope:this}];GO.sieve.SieveDialog.superclass.constructor.call(this,a);this.addEvents({save:true})};Ext.extend(GO.sieve.SieveDialog,GO.Window,{show:function(b,c,a){GO.sieve.SieveDialog.superclass.show.call(this);this.formPanel.baseParams.script_index=b;this.formPanel.baseParams.account_id=a;this.formPanel.baseParams.script_name=c;if(b>-1){this.title=GO.sieve.lang.editsieve;this.formPanel.load({success:function(d,e){this.actionGrid.store.loadData(e.result);this.testsGrid.store.loadData(e.result)},failure:function(d,e){Ext.Msg.alert(GO.lang.strError,e.result.feedback)},scope:this})}else{this.title="nieuwe sieve";this.resetForms();this.resetGrids();this.rgMethod.setValue("anyof")}},saveAll:function(){this.formPanel.form.submit({params:{task:"save_sieve_rules",tests:Ext.encode(this.testsGrid.getGridData()),actions:Ext.encode(this.actionGrid.getGridData())},callback:function(b,c,a){if(!c){Ext.MessageBox.alert(GO.lang.strError,a.result.feedback)}else{this.hide()}this.body.unmask()},scope:this})},resetForms:function(){this.formPanel.form.reset();this.testsPanel.resetForm();this.actionPanel.resetForm()},resetGrids:function(){this.actionGrid.store.removeAll();this.testsGrid.store.removeAll()}});GO.sieve.SieveGrid=function(b){this.selectScript=new Ext.form.ComboBox({hiddenName:"selectScript",valueField:"value",displayField:"name",store:new GO.data.JsonStore({url:GO.settings.modules.sieve.url+"fileIO.php",baseParams:{task:"get_sieve_scripts",account_id:0},fields:["name","value"],root:"results"}),mode:"local",triggerAction:"all",editable:false,selectOnFocus:true,forceSelection:true,allowBlank:false,width:140});this.selectScript.on("select",function(e,d){this.setSelectedScript(d.json.value);this.store.reload()},this);if(!b){b={}}b.title=GO.sieve.lang.sieverules;b.layout="fit";b.region="center";b.autoScroll=true;b.border=false;var a={fields:["id","name","index","script_name","disabled"],columns:[{header:GO.sieve.lang.name,dataIndex:"name"},{header:GO.sieve.lang.index,dataIndex:"index"},{header:GO.sieve.lang.scriptname,dataIndex:"script_name"},{header:GO.sieve.lang.disabled,dataIndex:"disabled"}]};b.store=new GO.data.JsonStore({url:GO.settings.modules.sieve.url+"fileIO.php",baseParams:{task:"get_sieve_rules",script_name:""},root:"results",id:"index",totalProperty:"total",fields:a.fields,remoteSort:true});b.paging=true;var c=new Ext.grid.ColumnModel({defaults:{sortable:true,autoFill:true,forceFit:true},columns:a.columns});b.cm=c;b.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});b.sm=new Ext.grid.RowSelectionModel();b.loadMask=true;this.sieveDialog=new GO.sieve.SieveDialog();this.sieveDialog.on("save",function(){this.store.reload()},this);b.tbar=[{iconCls:"btn-add",text:GO.lang.cmdAdd,cls:"x-btn-text-icon",handler:function(){this.sieveDialog.show(-1,"groupoffice",this.store.baseParams.account_id)},scope:this},{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.deleteSelected()},scope:this},this.selectScript,{iconCls:"btn-delete",text:GO.sieve.lang.activate,cls:"x-btn-text-icon",handler:function(){Ext.Ajax.request({url:GO.settings.modules.sieve.url+"fileIO.php",scope:this,params:{task:"set_active_script",script_name:this.selectScript.getValue(),account_id:this.store.baseParams.account_id},success:function(){this.selectScript.store.reload();this.setSelectedScript();this.selectScript.setRawValue(this.selectScript.getRawValue()+" ("+GO.sieve.lang.active+")");this.store.reload()},failure:function(){}},this)},scope:this}];GO.sieve.SieveGrid.superclass.constructor.call(this,b);this.on("rowdblclick",function(e,f){var d=e.getStore().getAt(f);this.sieveDialog.show(d.data.index,d.data.script_name,this.store.baseParams.account_id)},this);this.on("show",function(){this.store.load();this.selectScript.store.load({callback:function(){this.selectScript.setValue(this.selectScript.store.reader.jsonData.active)},scope:this})},this)};Ext.extend(GO.sieve.SieveGrid,GO.grid.GridPanel,{setAccountId:function(a){this.store.baseParams.account_id=a;this.selectScript.store.baseParams.account_id=a},setSelectedScript:function(a){if(a){this.store.baseParams.script_name=a}else{this.store.baseParams.script_name=this.selectScript.getValue()}}});GO.sieve.TestsGrid=function(b){if(!b){b={}}b.autoScroll=true;b.height=180;b.style="margin: 5px;";b.border=true;var a={fields:["test","not","type","arg","arg1","arg2","text"],header:false,columns:[{header:false,dataIndex:"text",renderer:function(i,e,d,j,g,f){var h="";switch(d.data.test){case"header":if(d.data.type=="contains"){if(d.data.not){if(d.data.arg1=="Subject"){txtToDisplay="Onderwerp bevat geen "+d.data.arg2}else{if(d.data.arg1=="From"){txtToDisplay="Afzender bevat geen "+d.data.arg2}else{if(d.data.arg1=="To"){txtToDisplay="Ontvanger bevat geen "+d.data.arg2}}}}else{if(d.data.arg1=="Subject"){txtToDisplay="Onderwerp bevat "+d.data.arg2}else{if(d.data.arg1=="From"){txtToDisplay="Afzender bevat "+d.data.arg2}else{if(d.data.arg1=="To"){txtToDisplay="Ontvanger bevat "+d.data.arg2}}}}}else{if(d.data.type=="is"){if(d.data.not){if(d.data.arg1=="Subject"){txtToDisplay="Onderwerp is niet gelijk aan "+d.data.arg2}else{if(d.data.arg1=="From"){txtToDisplay="Afzender is niet gelijk aan "+d.data.arg2}else{if(d.data.arg1=="To"){txtToDisplay="Ontvanger is niet gelijk aan "+d.data.arg2}}}}else{if(d.data.arg1=="Subject"){txtToDisplay="Onderwerp is gelijk aan "+d.data.arg2}else{if(d.data.arg1=="From"){txtToDisplay="Afzender is gelijk aan "+d.data.arg2}else{if(d.data.arg1=="To"){txtToDisplay="Ontvanger is gelijk aan "+d.data.arg2}}}}}}break;case"exists":if(d.data.not){if(d.data.arg=="Subject"){txtToDisplay="Onderwerp bestaat niet"}else{if(d.data.arg=="From"){txtToDisplay="Afzender bestaat niet"}else{if(d.data.arg=="To"){txtToDisplay="Ontvanger bestaat niet"}}}}else{if(d.data.arg=="Subject"){txtToDisplay="Onderwerp bestaat"}else{if(d.data.arg=="From"){txtToDisplay="Afzender bestaat"}else{if(d.data.arg=="To"){txtToDisplay="Ontvanger bestaat"}}}}break;case"true":txtToDisplay="Alle";break;case"size":if(d.data.type=="under"){txtToDisplay="Grootte is kleiner dan "+d.data.arg}else{txtToDisplay="Grootte is groter dan "+d.data.arg}break;default:txtToDisplay="Fout in weergeven van test";break}return txtToDisplay}}]};b.store=new GO.data.JsonStore({url:GO.settings.modules.sieve.url+"fileIO.php",baseParams:{task:"get_sieve_tests_json"},root:"tests",id:"id",totalProperty:"total",fields:a.fields,remoteSort:true});var c=new Ext.grid.ColumnModel({columns:a.columns});b.cls="go-grid3-hide-headers";b.cm=c;b.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});b.sm=new Ext.grid.RowSelectionModel();b.loadMask=true;b.tbar=[{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.store.remove(this.getSelectionModel().getSelections())},scope:this}];GO.sieve.TestsGrid.superclass.constructor.call(this,b)};Ext.extend(GO.sieve.TestsGrid,GO.grid.GridPanel,{setAccountId:function(a){this.store.baseParams.account_id=a},setScriptName:function(a){this.store.baseParams.script_name=a},setScriptIndex:function(a){this.store.baseParams.script_index=a}});GO.sieve.cmbFieldStore=new Ext.data.ArrayStore({idIndex:1,fields:["field","value"],data:[[GO.sieve.lang.subject,"Subject"],[GO.sieve.lang.from,"From"],[GO.sieve.lang.to,"To"],[GO.sieve.lang.size,"size"],]});GO.sieve.cmbOperatorStore=new Ext.data.ArrayStore({idIndex:1,fields:["field","value"],data:[[GO.sieve.lang.contains,"contains"],[GO.sieve.lang.notcontains,"notcontains"],[GO.sieve.lang.is,"is"],[GO.sieve.lang.notis,"notis"],[GO.sieve.lang.exists,"exists"],[GO.sieve.lang.notexists,"notexists"]]});GO.sieve.cmbActionStore=new Ext.data.ArrayStore({idIndex:1,fields:["field","value"],data:[[GO.sieve.lang.fileinto,"fileinto"],[GO.sieve.lang.copyto,"copyto"],[GO.sieve.lang.redirect,"redirect"],[GO.sieve.lang.redirect_to,"redirect_copy"],[GO.sieve.lang.vacation,"vacation"],[GO.sieve.lang.reject,"reject"],[GO.sieve.lang.discard,"discard"],[GO.sieve.lang.stop,"stop"]]});GO.sieve.cmbUnderOverStore=new Ext.data.ArrayStore({idIndex:1,fields:["field","value"],data:[[GO.sieve.lang.under,"under"],[GO.sieve.lang.over,"over"]]});GO.sieve.ActionGrid=function(b){if(!b){b={}}b.height=180;b.style="margin: 5px;";b.border=true;b.cls="go-grid3-hide-headers";var a={fields:["type","copy","target","days","addresses","reason","text"],header:false,columns:[{header:false,dataIndex:"text",renderer:function(h,e,d,j,g,f){var i="";switch(d.data.type){case"fileinto":if(d.data.copy){i="Kopieer naar "+d.data.target}else{i="Verplaats naar "+d.data.target}break;case"redirect":if(d.data.copy){i="Stuur kopie door naar "+d.data.target}else{i="Stuur door naar "+d.data.target}break;case"vacation":i="Vakantie: Stuur bericht iedere "+d.data.days+" dag(en) en naar de adres(sen) "+d.data.addresses+" Bericht: "+d.data.reason;break;case"reject":i="Weigeren met bericht: "+d.data.target;break;case"discard":i="Verwijderen";break;case"stop":i="Stop";break;default:i="Fout in weergeven van test";break}return i}}]};b.store=new GO.data.JsonStore({url:GO.settings.modules.sieve.url+"fileIO.php",baseParams:{task:"get_sieve_actions_json"},root:"actions",id:"id",totalProperty:"total",fields:a.fields,remoteSort:true});var c=new Ext.grid.ColumnModel({columns:a.columns});b.cm=c;b.view=new Ext.grid.GridView({autoFill:true,forceFit:true,emptyText:GO.lang.strNoItems});b.sm=new Ext.grid.RowSelectionModel();b.loadMask=true;b.tbar=[{iconCls:"btn-delete",text:GO.lang.cmdDelete,cls:"x-btn-text-icon",handler:function(){this.store.remove(this.getSelectionModel().getSelections())},scope:this}];GO.sieve.SieveGrid.superclass.constructor.call(this,b)};Ext.extend(GO.sieve.ActionGrid,GO.grid.GridPanel,{setAccountId:function(a){this.store.baseParams.account_id=a},setScriptName:function(a){this.store.baseParams.script_name=a},setScriptIndex:function(a){this.store.baseParams.script_index=a}});